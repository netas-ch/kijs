'use strict';var _set=function set(object,property,value,receiver){var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent!==null){set(parent,property,value,receiver);}}else if("value"in desc&&desc.writable){desc.value=value;}else{var setter=desc.set;if(setter!==undefined){setter.call(receiver,value);}}return value;};var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{return get(parent,property,receiver);}}else if("value"in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _toArray(arr){return Array.isArray(arr)?arr:Array.from(arr);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
if(typeof Object.assign!=='function'){Object.defineProperty(Object,"assign",{value:function assign(target,varArgs){'use strict';if(target===null){throw new TypeError('Cannot convert undefined or null to object');}var to=Object(target);for(var index=1;index<arguments.length;index++){var nextSource=arguments[index];if(nextSource!==null){for(var nextKey in nextSource){if(Object.prototype.hasOwnProperty.call(nextSource,nextKey)){to[nextKey]=nextSource[nextKey];}}}}return to;},writable:true,configurable:true});}
window.kijs=function(){function kijs(){_classCallCheck(this,kijs);}_createClass(kijs,null,[{key:'createDelegate',value:function createDelegate(fn,context,args){return function(){var callArgs=args||arguments;return fn.apply(context||window,callArgs);};}},{key:'createNamespace',value:function createNamespace(name,object){var parts=name.split('.');var parent=window;var part=void 0;for(var i=0;i<parts.length;i++){part=parts[i];if(!parent[part]){parent[part]=i===parts.length-1&&object?object:{};}parent=parent[part];}return part;}},{key:'defer',value:function defer(fn,millis,context,args){fn=this.createDelegate(fn,context,args);if(millis>0){return setTimeout(fn,millis);}else{fn();return 0;}}},{key:'getGetParameter',value:function getGetParameter(parameterName){var params={};if('search'in window.location){var pt=window.location.search.substr(1).split('&');for(var i=0;i<pt.length;i++){var tmp=pt[i].split('=');params[tmp[0]]=tmp.length===2?tmp[1]:null;};}if(parameterName===undefined){return params;}else{return params[parameterName];}}},{key:'getObjectFromNamespace',value:function getObjectFromNamespace(name){var parts=name.split('.');var parent=window;var part=void 0;for(var i=0;i<parts.length;i++){part=parts[i];if(!parent[part]){return false;}parent=parent[part];}return parent;}},{key:'interval',value:function interval(fn,millis,context,args){fn=this.createDelegate(fn,context,args);return setInterval(fn,millis);}},{key:'isArray',value:function isArray(value){return Object.prototype.toString.call(value)==='[object Array]';}},{key:'isBoolean',value:function isBoolean(value){return value===true||value===false;}},{key:'isDate',value:function isDate(value){return value instanceof Date&&!isNaN(value.valueOf());}},{key:'isDefined',value:function isDefined(value){return typeof value!=='undefined';}},{key:'isEmpty',value:function isEmpty(value){if(value===null||value===''||value===undefined){return true;}if(this.isArray(value)){return value.length===0;}if(this.isObject(value)){return Object.keys(value).length===0;}return false;}},{key:'isFirefox',value:function isFirefox(){return navigator.userAgent.toLowerCase().indexOf('firefox')>-1;}},{key:'isFloat',value:function isFloat(value){return this.isInteger(value)===false&&parseFloat(value)===value;}},{key:'isFunction',value:function isFunction(value){return typeof value==='function';}},{key:'isHTMLElement',value:function isHTMLElement(value){return value instanceof HTMLElement;}},{key:'isInteger',value:function isInteger(value){return parseInt(value)===value;}},{key:'isNumber',value:function isNumber(value){return typeof value==='number';}},{key:'isNumeric',value:function isNumeric(value){return this.isNumber(value)||this.isString(value)&&value.match(/^[0-9]+\.{0,1}[0-9]*$/);}},{key:'isObject',value:function isObject(value){return Object.prototype.toString.call(value)==='[object Object]';}},{key:'isReady',value:function isReady(fn,context){document.addEventListener('DOMContentLoaded',this.createDelegate(fn,context||this),false);}},{key:'isString',value:function isString(value){return typeof value==='string';}},{key:'uniqId',value:function uniqId(){var prefix=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';if(!window.kijs.__uniqId){window.kijs.__uniqId=0;}window.kijs.__uniqId++;return'kijs-'+(prefix?prefix+'-':'')+window.kijs.__uniqId;}},{key:'keys',get:function get(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INS:45,DEL:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,KEYPAD_0:96,KEYPAD_1:97,KEYPAD_2:98,KEYPAD_3:99,KEYPAD_4:100,KEYPAD_5:101,KEYPAD_6:102,KEYPAD_7:103,KEYPAD_8:104,KEYPAD_9:105,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};}}]);return kijs;}();kijs.String=function(){function kijs_String(){_classCallCheck(this,kijs_String);}_createClass(kijs_String,null,[{key:'beginsWith',value:function beginsWith(text,search){return text.indexOf(search)===0;}},{key:'contains',value:function contains(text,search){return text.indexOf(search)>=0;}},{key:'endsWith',value:function endsWith(text,search){return text.indexOf(search,text.length-search.length)!==-1;}},{key:'replaceAll',value:function replaceAll(text,search,replace){text=kijs.isEmpty(text)?'':text;search=kijs.isEmpty(search)?'':search;replace=kijs.isEmpty(replace)?'':replace;return text.split(search).join(replace);}},{key:'padding',value:function padding(text,length,padString,type){length=length||0;text=text+'';while(text.length<length){if(type==='left'||type==='both'){text=padString+text;}if(!type||type==='right'||type==='both'){text=text+padString;}}return text;}},{key:'trunc',value:function trunc(text,length){var useWordBoundary=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var postFixChar=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'…';if(kijs.isEmpty(text)||!length||text.length<=length){return text;}var subString=text.substr(0,length-1);if(useWordBoundary){subString=subString.substr(0,subString.lastIndexOf(' '));}return subString+''+postFixChar;}},{key:'wrap',value:function wrap(text,length){var useWordBoundary=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;if(useWordBoundary){return text.replace(new RegExp('(?![^\\n]{1,'+length+'}$)([^\\n]{1,'+length+'})\\s','g'),'$1\n');}else{return text.replace(new RegExp('(?![^\\n]{1,'+length+'}$)([^\\n]{1,'+length+'})','g'),'$1\n');}}}]);return kijs_String;}();kijs.Array=function(){function kijs_Array(){_classCallCheck(this,kijs_Array);}_createClass(kijs_Array,null,[{key:'clear',value:function clear(array){while(array.length>0){array.pop();}}},{key:'clone',value:function clone(array){return Array.prototype.slice.call(array);}},{key:'compare',value:function compare(array1,array2){if(!kijs.isArray(array1)||!kijs.isArray(array2)){return false;}
if(array1.length!==array2.length){return false;}
for(var i=0,l=array1.length;i<l;i++){if(array1[i]instanceof Array&&array2[i]instanceof Array){if(!this.compare(array1[i],array2[i])){return false;}}else if(array1[i]instanceof Date&&array2[i]instanceof Date){if(array1[i].getTime()!==array2[i].getTime()){return false;}}else if(array1[i]!==array2[i]){return false;}}return true;}},{key:'concat',value:function concat(){var _arr$slice;for(var _len=arguments.length,arrays=Array(_len),_key=0;_key<_len;_key++){arrays[_key]=arguments[_key];}var arr=void 0;var _arrays=arrays;var _arrays2=_toArray(_arrays);arr=_arrays2[0];arrays=_arrays2.slice(1);return(_arr$slice=arr.slice(0)).concat.apply(_arr$slice,_toConsumableArray(arrays));}},{key:'concatUnique',value:function concatUnique(){var _kijs$Array;return kijs.Array.unique((_kijs$Array=kijs.Array).concat.apply(_kijs$Array,arguments));}},{key:'contains',value:function contains(array,value){return array.indexOf(value)!==-1;}},{key:'each',value:function each(array,fn,context,reverse){var len=array.length;if(reverse){for(var i=len-1;i>-1;i--){if(fn.call(context,array[i],i,array)===false){return i;}}}else{for(var _i=0;_i<len;_i++){if(fn.call(context,array[_i],_i,array)===false){return _i;}}}return true;}},{key:'remove',value:function remove(array,value){var index=array.indexOf(value);if(index!==-1){array.splice(index,1);}return array;}},{key:'removeMultiple',value:function removeMultiple(array,values){var len=array.length;var ret=[];for(var i=0;i<len;i++){if(values.indexOf(array[i])===-1){ret.push(array[i]);}}return ret;}},{key:'slice',value:function slice(array,begin,end){if([1,2].slice(1,undefined).length){return Array.prototype.slice.call(array,begin,end);}else{if(typeof begin==='undefined'){return Array.prototype.slice.call(array);}if(typeof end==='undefined'){return Array.prototype.slice.call(array,begin);}return Array.prototype.slice.call(array,begin,end);}}},{key:'unique',value:function unique(array){var ret=[];for(var i=0;i<array.length;++i){if(ret.indexOf(array[i])===-1){ret.push(array[i]);}}return ret;}}]);return kijs_Array;}();kijs.Object=function(){function kijs_Object(){_classCallCheck(this,kijs_Object);}_createClass(kijs_Object,null,[{key:'assignConfig',value:function assignConfig(object,config,configMap){var tmpConfigs=[];kijs.Object.each(config,function(cfgKey,cfgVal){if(!configMap.hasOwnProperty(cfgKey)){throw new Error('Unkown config "'+cfgKey+'"');}
var prio=Number.MIN_VALUE;var fn='replace';var target='_'+cfgKey;var context=object;var map=configMap[cfgKey];if(map===true){}else if(map===false){fn='error';}else if(kijs.isString(map)){target=map;}else if(kijs.isObject(map)){if(kijs.isNumeric(map.prio)){prio=Number(map.prio);}if(map.fn){fn=map.fn;}if(map.target){target=map.target;}if(map.context){context=map.context;}}else{throw new Error('Unkown format on configMap "'+cfgKey+'"');}tmpConfigs.push({prio:prio,key:cfgKey,fn:fn,target:target,context:context,value:cfgVal});},this);tmpConfigs.sort(function(a,b){return a.prio-b.prio;});kijs.Array.each(tmpConfigs,function(cfg){switch(cfg.fn){case'manual':break;case'replace':cfg.context[cfg.target]=cfg.value;break;case'append':if(kijs.isArray(cfg.context[cfg.target])){if(kijs.isArray(cfg.value)){cfg.context[cfg.target]=kijs.Array.concat(cfg.context[cfg.target],cfg.value);}else if(cfg.value){cfg.context[cfg.target].push(cfg.value);}}else{if(kijs.isArray(cfg.value)){cfg.context[cfg.target]=cfg.value;}else if(cfg.value){cfg.context[cfg.target]=[cfg.value];}}break;case'appendUnique':if(kijs.isArray(cfg.context[cfg.target])){if(kijs.isArray(cfg.value)){cfg.context[cfg.target]=kijs.Array.concatUnique(cfg.context[cfg.target],cfg.value);}else if(cfg.value){cfg.context[cfg.target].push(cfg.value);kijs.Array.unique(cfg.context[cfg.target]);}}else{if(kijs.isArray(cfg.value)){cfg.context[cfg.target]=cfg.value;kijs.Array.unique(cfg.context[cfg.target]);}else if(cfg.value){cfg.context[cfg.target]=[cfg.value];}}break;case'assign':if(kijs.isObject(cfg.context[cfg.target])){if(kijs.isObject(cfg.value)){Object.assign(cfg.context[cfg.target],cfg.value);}else if(cfg.value){throw new Error('config "'+cfg.key+'" is not an object');}}else{if(kijs.isObject(cfg.value)){cfg.context[cfg.target]=cfg.value;}else if(cfg.value){throw new Error('config "'+cfg.key+'" is not an object');}}break;case'assignDeep':if(kijs.isObject(cfg.context[cfg.target])){if(kijs.isObject(cfg.value)){kijs.Object.assignDeep(cfg.context[cfg.target],cfg.value);}else if(cfg.value){throw new Error('config "'+cfg.key+'" is not an object');}}else{if(kijs.isObject(cfg.value)){cfg.context[cfg.target]=cfg.value;}else if(cfg.value){throw new Error('config "'+cfg.key+'" is not an object');}}break;case'assignListeners':if(kijs.isObject(cfg.value)){for(var k in cfg.value){if(k!=='context'){if(!kijs.isFunction(cfg.value[k])){throw new Error('Listener "'+k+'" ist not a function.');}cfg.context.on(k,cfg.value[k],cfg.value.context||cfg.context);}}}break;case'function':if(kijs.isFunction(cfg.target)){cfg.target.call(cfg.context,cfg.value);}else{throw new Error('config "'+cfg.key+'" is not a function');}break;case'error':throw new Error('Assignment of config "'+cfg.key+'" is prohibited');break;}},this);tmpConfigs=null;}},{key:'assignDeep',value:function assignDeep(target,source){var overwrite=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;kijs.Object.each(source,function(key,val){if(kijs.isObject(val)){if(kijs.isObject(target[key])){kijs.Object.assignDeep(target[key],val,overwrite);}else{target[key]=kijs.Object.clone(val);}}else if(kijs.isArray(val)){if(overwrite||target[key]===undefined){target[key]=kijs.Array.clone(val);}}else{if(overwrite||target[key]===undefined){target[key]=val;}}},this);return target;}},{key:'clone',value:function clone(object){return JSON.parse(JSON.stringify(object));}},{key:'each',value:function each(object,fn,context){for(var key in object){if(object.hasOwnProperty(key)){if(fn.call(context,key,object[key])===false){return;}}}}}]);return kijs_Object;}();kijs.Date=function(){function kijs_Date(){_classCallCheck(this,kijs_Date);}_createClass(kijs_Date,null,[{key:'addDays',value:function addDays(date,days){var ret=new Date(date.valueOf());ret.setDate(ret.getDate()+days);return ret;}},{key:'addMonths',value:function addMonths(date,months){var ret=new Date(date.valueOf());ret.setMonth(ret.getMonth()+months);return ret;}},{key:'addYears',value:function addYears(date,yars){var ret=new Date(date.valueOf());ret.setFullYear(ret.getFullYear()+yars);return ret;}},{key:'clone',value:function clone(date){return new Date(date.getTime());}},{key:'compare',value:function compare(date1,date2){if(date1 instanceof Date!==date2 instanceof Date){return false;}if(date1 instanceof Date){return date1.getTime()===date2.getTime();}else{return date1===date2;}}},{key:'create',value:function create(arg){var ret=null;if(arg instanceof Date){ret=this.clone(arg);}else if(kijs.isNumber(arg)){ret=new Date(arg*1000);}else if(kijs.isString(arg)&&arg.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}/)){ret=this.getDateFromSqlString(arg);}else if(kijs.isString(arg)&&arg.match(/^[0-9]{1,2}\.?([0-9]{1,2}\.?([0-9]{2,4})?)?/)){ret=this.getDateFromGermanString(arg);}else if(kijs.isString(arg)&&arg.match(/^[^0-9]+[0-9]{1,2}[^0-9]?([0-9]{2,4})?/)){ret=this.getDateFromWeekString(arg);}else if(kijs.isArray(arg)&&arg.length>0){var year=parseInt(arg[0]);var month=1;var day=1;var hour=0;var minute=0;var second=0;if(arg.length>1)month=parseInt(arg[1]);if(arg.length>2)day=parseInt(arg[2]);if(arg.length>3)hour=parseInt(arg[3]);if(arg.length>4)minute=parseInt(arg[4]);if(arg.length>5)second=parseInt(arg[5]);ret=new Date(year,month-1,day,hour,minute,second);}
if(ret&&isNaN(ret.valueOf())){ret=null;}return ret;}},{key:'format',value:function format(date,_format,languageId){var _this=this;_format=_format+'';this.languageId=languageId||'de';return _format.replace(/[a-zA-Z]/g,function(letter){return _this.__formatReplace(letter,date,languageId);});}},{key:'getDateFromGermanString',value:function getDateFromGermanString(strDate){var args=strDate.split(' ');var argsTmp=void 0;var strTime='';if(args.length>=1){if(args[0].indexOf(':')>=0){strTime=args[0];}else{strDate=args[0];}}
if(args.length>=2){if(args[1].indexOf(':')>=0){strTime=args[1];}}
argsTmp=strDate.split('.');var day=argsTmp.length>=1&&argsTmp[0]?parseInt(argsTmp[0]):new Date().getDate();var month=argsTmp.length>=2&&argsTmp[1]?parseInt(argsTmp[1]):new Date().getMonth()+1;var year=argsTmp.length>=3&&argsTmp[2]?parseInt(argsTmp[2]):new Date().getFullYear();if(year<100){if(year<70){year+=2000;}else if(year>=70){year+=1900;}}
argsTmp=strTime.split(':');var hours=argsTmp.length>=2?parseInt(argsTmp[0]):0;var minutes=argsTmp.length>=2?parseInt(argsTmp[1]):0;var seconds=argsTmp.length>=3?parseInt(argsTmp[2]):0;return new Date(year,month-1,day,hours,minutes,seconds,0);}},{key:'getDateFromWeekString',value:function getDateFromWeekString(strWeek){var matches=strWeek.match(/^[^0-9]+([0-9]{1,2})[^0-9]?([0-9]{2,4})?/);var week=parseInt(matches[1]);var year=matches[2]?parseInt(matches[2]):new Date().getFullYear();if(year<100){if(year<70){year+=2000;}else if(year>=70){year+=1900;}}return this.getFirstOfWeek(week,year);}},{key:'getDateFromSqlString',value:function getDateFromSqlString(sqlDate){var year=parseInt(sqlDate.substr(0,4));var month=parseInt(sqlDate.substr(5,2));var day=parseInt(sqlDate.substr(8,2));var hours=0;var minutes=0;var seconds=0;if(sqlDate.length>10){hours=parseInt(sqlDate.substr(11,2));minutes=parseInt(sqlDate.substr(14,2));seconds=parseInt(sqlDate.substr(17,2));}return new Date(year,month-1,day,hours,minutes,seconds,0);}},{key:'getDatePart',value:function getDatePart(date){return new Date(date.getFullYear(),date.getMonth(),date.getDate());}},{key:'getFirstOfMonth',value:function getFirstOfMonth(date){return new Date(date.getFullYear(),date.getMonth(),1);}},{key:'getFirstOfWeek',value:function getFirstOfWeek(week,year){var date=new Date(year,0,4,0,0,0,0);date=this.getMonday(date);return this.addDays(date,(week-1)*7);}},{key:'getLastOfMonth',value:function getLastOfMonth(date){return new Date(date.getFullYear(),date.getMonth()+1,0);}},{key:'getMonday',value:function getMonday(date){var day=date.getDay(),diff=date.getDate()-day+(day===0?-6:1);return new Date(date.setDate(diff));}},{key:'getMonthName',value:function getMonthName(date,languageId,short){languageId=languageId||'de';if(short){return this.months_short[languageId][date.getMonth()];}else{return this.months[languageId][date.getMonth()];}}},{key:'getNumberOfWeeks',value:function getNumberOfWeeks(year){var fd=new Date(year,0,1).getDay();var ld=new Date(year,11,31).getDay();var ly=this.isLeapYear(new Date(year,0,1));if(ly){if(fd===3&&ld===4)return 53;if(fd===4&&ld===5)return 53;}else{if(fd===4&&ld===4)return 53;}return 52;}},{key:'getSunday',value:function getSunday(date){var f=this.getMonday(date);f.setDate(f.getDate()+6);return f;}},{key:'getWeekday',value:function getWeekday(date,languageId,short){languageId=languageId||'de';if(short){return this.weekdays_short[languageId][date.getDay()];}else{return this.weekdays[languageId][date.getDay()];}}},{key:'getWeekOfYear',value:function getWeekOfYear(date){var ms1d=864e5;var ms7d=7*ms1d;var DC3=Date.UTC(date.getFullYear(),date.getMonth(),date.getDate()+3)/ms1d;var AWN=Math.floor(DC3/7);var Wyr=new Date(AWN*ms7d).getUTCFullYear();return AWN-Math.floor(Date.UTC(Wyr,0,7)/ms7d)+1;}},{key:'isLeapYear',value:function isLeapYear(date){var year=date.getFullYear();return!!((year&3)===0&&(year%100||year%400===0&&year));}},{key:'unixTimestamp',value:function unixTimestamp(date){return parseInt(date.getTime()/1000);}},{key:'__formatReplace',value:function __formatReplace(letter,date,languageId){switch(letter){case'd':return kijs.String.padding(date.getDate(),2,'0','left');case'D':return this.getWeekday(date,languageId,true);case'j':return date.getDate();case'l':return this.getWeekday(date,languageId,false);case'F':return this.getMonthName(date,languageId,false);case'm':return kijs.String.padding(date.getMonth()+1,2,'0','left');case'M':return this.getMonthName(date,languageId,true);case'n':return date.getMonth()+1;case'W':return kijs.String.padding(this.getWeekOfYear(date),2,'0','left');case'Y':return date.getFullYear();case'y':return(date.getFullYear()+'').substr(2);case'L':return this.isLeapYear(date)?'1':'0';case'G':return date.getHours();case'H':return kijs.String.padding(date.getHours(),2,'0','left');case'i':return kijs.String.padding(date.getMinutes(),2,'0','left');case's':return kijs.String.padding(date.getSeconds(),2,'0','left');default:return letter;}}},{key:'weekdays',get:function get(){return{en:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],de:['Sonntag','Montag','Dienstag','Mittwoch','Donnerstag','Freitag','Samstag'],fr:['dimanche','lundi','mardi','mercredi','jeudi','vendredi','samedi']};}},{key:'weekdays_short',get:function get(){return{en:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],de:['So','Mo','Di','Mi','Do','Fr','Sa'],fr:['Di','Lu','Ma','Me','Je','Ve','Sa']};}},{key:'months',get:function get(){return{en:['January','February','March','April','May','June','July','August','September','October','November','December'],de:['Januar','Februar','März','April','Mai','Juni','Juli','August','September','Oktober','November','Dezember'],fr:['janvier','février','mars','avril','mai','juin','juillet','août','septembre','octobre','novembre','décembre']};}},{key:'months_short',get:function get(){return{en:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],de:['Jan','Feb','Mär','Apr','Mai','Jun','Jul','Aug','Sep','Okt','Nov','Dez'],fr:['JAN','FÉV','MAR','AVR','MAI','JUN','JUL','AOÛ','SEP','OCT','NOV','DÉC']};}}]);return kijs_Date;}();kijs.Dom=function(){function kijs_Dom(){_classCallCheck(this,kijs_Dom);}_createClass(kijs_Dom,null,[{key:'addEventListener',value:function addEventListener(eventName,node,fn,context,useCapture){useCapture=!!useCapture;context._nodeEventListeners=context._nodeEventListeners||{};context._nodeEventListeners[eventName]=context._nodeEventListeners[eventName]||[];if(!this.hasEventListener(eventName,node,context,useCapture)){var delegate=null;if(kijs.isString(fn)){var kijsEventName=fn;delegate=function delegate(e){return context.raiseEvent(kijsEventName,{eventName:kijsEventName,nodeEventName:eventName,useCapture:useCapture,nodeEvent:e,context:context},this);};}else if(kijs.isFunction(fn)){delegate=function delegate(e){return fn.apply(context,[{nodeEventName:eventName,useCapture:useCapture,nodeEvent:e,context:context}]);};}else{throw new Error('Parameter "fn" can not be empty');}context._nodeEventListeners[eventName].push({node:node,useCapture:useCapture,delegate:delegate});node.addEventListener(eventName,delegate,useCapture);}}},{key:'getAbsolutePos',value:function getAbsolutePos(node){var x=0;var y=0;var w=node.offsetWidth;var h=node.offsetHeight;while(!!node){x+=node.offsetLeft-node.scrollLeft;y+=node.offsetTop-node.scrollTop;node=node.offsetParent;}return{x:x,y:y,w:w,h:h};}},{key:'getFirstFocusableNode',value:function getFirstFocusableNode(node){var subNode=null;if(node.tabIndex>=0){return node;}else{if(node.hasChildNodes()){for(var i=0,len=node.children.length;i<len;i++){subNode=this.getFirstFocusableNode(node.children[i]);if(subNode){return subNode;}}}}return null;}},{key:'getScrollbarWidth',value:function getScrollbarWidth(){if(!this.__scrollbarWidth){var outer=document.createElement("div");outer.style.visibility="hidden";outer.style.width="100px";outer.style.msOverflowStyle="scrollbar";document.body.appendChild(outer);var widthNoScroll=outer.offsetWidth;outer.style.overflow="scroll";var inner=document.createElement("div");inner.style.width="100%";outer.appendChild(inner);var widthWithScroll=inner.offsetWidth;outer.parentNode.removeChild(outer);this.__scrollbarWidth=widthNoScroll-widthWithScroll;}return this.__scrollbarWidth;}},{key:'hasEventListener',value:function hasEventListener(eventName,node,context,useCapture){useCapture=!!useCapture;context._nodeEventListeners=context._nodeEventListeners||{};context._nodeEventListeners[eventName]=context._nodeEventListeners[eventName]||[];var ret=false;if(context._nodeEventListeners[eventName]){kijs.Array.each(context._nodeEventListeners[eventName],function(listener){if(listener.node===node&&listener.useCapture===useCapture){ret=true;return false;}},this);}return ret;}},{key:'htmlentities',value:function htmlentities(html){return(html+'').replace(/[\u00A0-\u9999<>\&]/gim,function(i){return'&#'+i.charCodeAt(0)+';';});}},{key:'insertNodeAfter',value:function insertNodeAfter(node,targetNode){targetNode.parentNode.insertBefore(node,targetNode.nextSibling);}},{key:'isChildOf',value:function isChildOf(childNode,parentNode,sameAlso){if(childNode===parentNode){return!!sameAlso;}if(childNode.parentNode){if(this.isChildOf(childNode.parentNode,parentNode,true)){return true;}}return false;}},{key:'removeAllEventListenersFromContext',value:function removeAllEventListenersFromContext(context){if(!kijs.isEmpty(context._nodeEventListeners)){kijs.Object.each(context._nodeEventListeners,function(eventName,listeners){kijs.Array.each(listeners,function(listener){listener.node.removeEventListener(eventName,listener.delegate,listener.useCapture);},this);},this);}context._nodeEventListeners={};}},{key:'removeEventListener',value:function removeEventListener(eventName,node,context,useCapture){useCapture=!!useCapture;context._nodeEventListeners=context._nodeEventListeners||{};context._nodeEventListeners[eventName]=context._nodeEventListeners[eventName]||[];var delegate=null;if(!kijs.isEmpty(context._nodeEventListeners[eventName])){var arr=[];kijs.Array.each(context._nodeEventListeners[eventName],function(listener){if(listener.node===node&&listener.useCapture===useCapture){delegate=listener.delegate;}else{arr.push(listener);}},this);context._nodeEventListeners[eventName]=arr;}
if(delegate){node.removeEventListener(eventName,delegate,useCapture);}}},{key:'setInnerHtml',value:function setInnerHtml(node,html,htmlDisplayType){html=kijs.isEmpty(html)?'':html;switch(htmlDisplayType){case'code':this.removeAllChildNodes(node);node.appendChild(document.createTextNode(html));break;case'text':var d=document.createElement('div');d.innerHTML=html;node.innerHTML=d.textContent||d.innerText||'';d=null;break;case'html':default:node.innerHTML=html;break;}}},{key:'removeAllChildNodes',value:function removeAllChildNodes(node){while(node.hasChildNodes()){node.removeChild(node.lastChild);}}}]);return kijs_Dom;}();kijs.Grafic=function(){function kijs_Grafic(){_classCallCheck(this,kijs_Grafic);}_createClass(kijs_Grafic,null,[{key:'alignRectToRect',value:function alignRectToRect(rect,targetRect,targetPos,pos,offsetX,offsetY){var ret={x:rect.x,y:rect.y,w:rect.w,h:rect.h};targetPos=targetPos||'bl';pos=pos||'tl';offsetX=offsetX||0;offsetY=offsetY||0;var tAnchor=this.getAnchorPos(targetRect,targetPos);var eAnchor=this.getAnchorPos({x:0,y:0,w:rect.w,h:rect.h},pos);ret.x=tAnchor.x-eAnchor.x+offsetX;ret.y=tAnchor.y-eAnchor.y+offsetY;return ret;}},{key:'getAnchorPos',value:function getAnchorPos(rect,pos){var ret={x:0,y:0};if(pos.indexOf('t')!==-1){ret.y=rect.y;}else if(pos.indexOf('b')!==-1){ret.y=rect.y+rect.h;}else{ret.y=rect.y+Math.floor(rect.h/2);}
if(pos.indexOf('l')!==-1){ret.x=rect.x;}else if(pos.indexOf('r')!==-1){ret.x=rect.x+rect.w;}else{ret.x=rect.x+Math.floor(rect.w/2);}return ret;}},{key:'rectsOverlap',value:function rectsOverlap(rect,rectOuter){var ret={};ret.sizeL=rect.x-rectOuter.x;ret.sizeR=rectOuter.x+rectOuter.w-(rect.x+rect.w);ret.sizeT=rect.y-rectOuter.y;ret.sizeB=rectOuter.y+rectOuter.h-(rect.y+rect.h);ret.fitX=ret.sizeL>=0&&ret.sizeR>=0;ret.fitY=ret.sizeT>=0&&ret.sizeB>=0;ret.fit=ret.fitX&&ret.fitY;return ret;}}]);return kijs_Grafic;}();kijs.Observable=function(){function kijs_Observable(){_classCallCheck(this,kijs_Observable);this._events=this._events||{};}
_createClass(kijs_Observable,[{key:'hasListener',value:function hasListener(name){var callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var context=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var listeners=this._events[name];if(listeners){if(!callback&&!context){return true;}else{for(var i=0;i<listeners.length;i++){var listener=listeners[i];var callbackOk=!callback||callback===listener.callback;var contextOk=!context||context===listener.context;if(callbackOk&&contextOk){return true;}}}}return false;}},{key:'off',value:function off(){var names=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var context=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(!names&&!callback&&!context){this._events={};return;}if(kijs.isEmpty(names)){names=Object.keys(this._events);}else if(!kijs.isArray(names)){names=[names];}
kijs.Array.each(names,function(name){var skip=false;var listeners=this._events[name];if(!listeners){skip=true;}
if(!skip&&!callback&&!context){delete this._events[name];skip=true;}
if(!skip){var remaining=[];for(var j=0;j<listeners.length;j++){var listener=listeners[j];if(callback&&callback!==listener.callback||context&&context!==listener.context){remaining.push(listener);}}if(remaining.length){this._events[name]=remaining;}else{delete this._events[name];}}},this);}},{key:'on',value:function on(names,callback,context){names=kijs.isArray(names)?names:[names];kijs.Array.each(names,function(name){if(!this.hasListener(name,callback,context)){if(!this._events[name]){this._events[name]=[];}this._events[name].push({callback:callback,context:context});}},this);}},{key:'once',value:function once(names,callback,context){var callbackWrapper=function callbackWrapper(e){this.off(names,callbackWrapper,context);return callback.apply(context,arguments);};this.on(names,callbackWrapper,this);}},{key:'raiseEvent',value:function raiseEvent(name){this._events=this._events||{};if(kijs.isEmpty(this._events)){return true;}
if(!kijs.isDefined(name)){name=Object.keys(this._events);}if(!kijs.isArray(name)){name=[name];}
var names=name;var returnValue=true;for(var _len2=arguments.length,args=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){args[_key2-1]=arguments[_key2];}for(var i=0;i<names.length;i++){name=names[i];var listeners=this._events[name];if(listeners){for(var j=0;j<listeners.length;j++){var listener=listeners[j];if(listener.callback.apply(listener.context,args)===false){returnValue=false;}}}}return returnValue;}},{key:'destruct',value:function destruct(){this.off();}}]);return kijs_Observable;}();kijs.Ajax=function(){function kijs_Ajax(){_classCallCheck(this,kijs_Ajax);}_createClass(kijs_Ajax,null,[{key:'request',value:function request(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var postData=void 0;config.method=config.method||'GET';config.format=config.format||'json';config.parameters=config.parameters||{};if(config.disableCaching){config.parameters.noCache=new Date().getTime();}
if(!config.headers||!config.headers['Content-Type']){var contentType='';switch(config.format){case'json':contentType='application/json';break;case'xml':contentType='application/xml';break;case'text':contentType='text/plain';break;}if(contentType){config.headers=config.headers||{};config.headers['Content-Type']=contentType;}}
if(config.method==='GET'){var parString=kijs.Ajax.createQueryStringFromObject(config.parameters);if(parString){config.url+=(/\?/.test(config.url)?'&':'?')+parString;}postData=null;}else{postData=config.postData||null;if(kijs.isObject(postData)||kijs.isArray(postData)){postData=JSON.stringify(postData);}}var xmlhttp=new XMLHttpRequest();xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState===4){var val=null;if(xmlhttp.status===200){switch(config.format){case'text':val=xmlhttp.responseText;break;case'json':val=JSON.parse(xmlhttp.responseText);break;case'xml':val=kijs.Ajax.parseXml(xmlhttp.responseXML);break;}config.fn.call(config.context||this,val,config,false);}else{var error='Verbindung konnte nicht aufgebaut werden!';config.fn.call(config.context||this,val,config,error);}}};xmlhttp.open(config.method,config.url,true);if(config.headers){for(var name in config.headers){if(config.headers[name]!==null){xmlhttp.setRequestHeader(name,config.headers[name]);}}}xmlhttp.send(postData);}},{key:'parseXml',value:function parseXml(xml){var ret={};if(xml.nodeType===1){if(xml.attributes.length>0){for(var j=0;j<xml.attributes.length;j++){var attribute=xml.attributes.item(j);ret[attribute.nodeName]=attribute.nodeValue;}}}else if(xml.nodeType===3){ret=xml.nodeValue.trim();}
if(xml.hasChildNodes()){for(var i=0;i<xml.childNodes.length;i++){var item=xml.childNodes.item(i);var nodeName=item.nodeName;if(typeof ret[nodeName]==='undefined'){var tmp=kijs.Ajax.parseXml(item);if(tmp!==''){ret[nodeName]=tmp;}}else{if(typeof ret[nodeName].push==="undefined"){var old=ret[nodeName];ret[nodeName]=[];ret[nodeName].push(old);}var _tmp=kijs.Ajax.parseXml(item);if(_tmp!==''){ret[nodeName].push(_tmp);}}}}return ret;}},{key:'createQueryStringFromObject',value:function createQueryStringFromObject(obj){var _this2=this;var params=[];var _loop=function _loop(key){var name=encodeURIComponent(key);var val=obj[key];if(kijs.isObject(val)){throw new Error('Objects can not be convert to query strings.');}else if(kijs.isArray(val)){kijs.Array.each(val,function(v){v=encodeURIComponent(v);params.push(name+'='+v);},_this2);}else{val=encodeURIComponent(val);params.push(name+'='+val);}};for(var key in obj){_loop(key);}return params.join('&');}}]);return kijs_Ajax;}();kijs.Rpc=function(){function kijs_Rpc(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_Rpc);this._url='.';this._timeout=10;this._deferId=null;this._queue=null;this._tid=0;this._queue=[];this._configMap={url:true,timeout:true};if(kijs.isObject(config)){this.applyConfig(config);}}
_createClass(kijs_Rpc,[{key:'applyConfig',value:function applyConfig(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};kijs.Object.assignConfig(this,config,this._configMap);}},{key:'do',value:function _do(facadeFn,data,fn,context,cancelRunningRpcs,rpcParams,responseArgs){if(this._deferId){clearTimeout(this._deferId);}if(cancelRunningRpcs){for(var i=0;i<this._queue.length;i++){if(this._queue[i].facadeFn===facadeFn){switch(this._queue[i].state){case 1:this._queue[i].state=kijs.Rpc.states.CANCELED_BEFORE_TRANSMIT;this._receive([{tid:this._queue[i].tid}],{postData:[this._queue[i]]});break;case 2:this._queue[i].state=kijs.Rpc.states.CANCELED_AFTER_TRANSMIT;break;}}}}this._queue.push({facadeFn:facadeFn,data:data,type:'rpc',tid:this._createTid(),fn:fn,context:context,rpcParams:rpcParams,responseArgs:responseArgs,state:kijs.Rpc.states.QUEUE});this._deferId=kijs.defer(this._transmit,this.timeout,this);}},{key:'_createTid',value:function _createTid(){this._tid++;return this._tid;}},{key:'_getByTid',value:function _getByTid(tid){for(var i=0;i<this._queue.length;i++){if(this._queue[i].tid===tid){return this._queue[i];}}return null;}},{key:'_receive',value:function _receive(response,request,errorMsg){for(var i=0;i<request.postData.length;i++){var subResponse=response[i];var subRequest=this._getByTid(request.postData[i].tid);if(kijs.isEmpty(subResponse)){subResponse={errorMsg:'Übertragungsfehler'};}if(!errorMsg&&subResponse.tid!==subRequest.tid){errorMsg='Die RPC-Antwort passt nicht zum Request';}if(errorMsg){subResponse.errorMsg=errorMsg;}
if(subRequest.state===kijs.Rpc.states.CANCELED_BEFORE_TRANSMIT||subRequest.state===kijs.Rpc.states.CANCELED_AFTER_TRANSMIT){subResponse.canceled=true;}
this._removeTid(subRequest.tid);if(subRequest.fn&&kijs.isFunction(subRequest.fn)){subRequest.fn.call(subRequest.context||this,subResponse,subRequest);}}}},{key:'_removeTid',value:function _removeTid(tid){var newQueue=[];for(var i=0;i<this._queue.length;i++){if(this._queue[i].tid!==tid){newQueue.push(this._queue[i]);}}this._queue=newQueue;}},{key:'_transmit',value:function _transmit(){this._deferId=null;var transmitData=[];for(var i=0;i<this._queue.length;i++){if(this._queue[i].state===kijs.Rpc.states.QUEUE){var subRequest=kijs.isObject(this._queue[i].rpcParams)?this._queue[i].rpcParams:{};subRequest.facadeFn=this._queue[i].facadeFn;subRequest.data=this._queue[i].data;subRequest.type=this._queue[i].type;subRequest.tid=this._queue[i].tid;transmitData.push(subRequest);this._queue[i].state=kijs.Rpc.states.TRANSMITTED;}}if(transmitData.length>0){kijs.Ajax.request({method:'POST',headers:{'X-LIBRARY':'kijs'},postData:transmitData,url:this.url,fn:this._receive,context:this});}}},{key:'destruct',value:function destruct(){if(this._deferId){clearTimeout(this._deferId);}
this._queue=null;}},{key:'timeout',get:function get(){return this._timeout;},set:function set(val){this._timeout=val;}},{key:'url',get:function get(){return this._url;},set:function set(val){this._url=val;}}],[{key:'states',get:function get(){return{QUEUE:1,TRANSMITTED:2,CANCELED_BEFORE_TRANSMIT:3,CANCELED_AFTER_TRANSMIT:4};}}]);return kijs_Rpc;}();kijs.gui=function(){function kijs_gui(){_classCallCheck(this,kijs_gui);}_createClass(kijs_gui,null,[{key:'getClassFromXtype',value:function getClassFromXtype(xtype){var parts=xtype.split('.');var parent=window;for(var i=0;i<parts.length;i++){var part=parts[i];if(!parent[part]){console.log(part);return null;}parent=parent[part];}return parent;}}]);return kijs_gui;}();kijs.gui.Dom=function(_kijs$Observable){_inherits(kijs_gui_Dom,_kijs$Observable);function kijs_gui_Dom(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_Dom);var _this3=_possibleConstructorReturn(this,(kijs_gui_Dom.__proto__||Object.getPrototypeOf(kijs_gui_Dom)).call(this));_this3._cls=[];_this3._disableEnterEscBubbeling=false;_this3._html=undefined;_this3._htmlDisplayType='html',_this3._node=null;_this3._nodeEventListeners={};_this3._disabled=false;_this3._nodeAttribute={};_this3._left=undefined;_this3._top=undefined;_this3._width=undefined;_this3._height=undefined;_this3._nodeTagName='div';_this3._style={};_this3._toolTip=null;config=Object.assign({},{},config);_this3._configMap={cls:{fn:'function',target:_this3.clsAdd},disabled:true,disableEnterEscBubbeling:{target:'disableEnterEscBubbeling'},eventMap:{fn:'assign'},html:true,htmlDisplayType:true,left:true,top:true,width:true,height:true,nodeAttribute:{fn:'assign'},nodeTagName:true,on:{fn:'assignListeners'},style:{fn:'assign'},toolTip:{target:'toolTip'}};_this3._eventMap={blur:{nodeEventName:'blur',useCapture:false},click:{nodeEventName:'click',useCapture:false},dblClick:{nodeEventName:'dblclick',useCapture:false},drag:{nodeEventName:'drag',useCapture:false},dragOver:{nodeEventName:'dragover',useCapture:false},dragStart:{nodeEventName:'dragstart',useCapture:false},dragLeave:{nodeEventName:'dragleave',useCapture:false},dragEnd:{nodeEventName:'dragend',useCapture:false},drop:{nodeEventName:'drop',useCapture:false},focus:{nodeEventName:'focus',useCapture:false},mouseDown:{nodeEventName:'mousedown',useCapture:false},mouseLeave:{nodeEventName:'mouseleave',useCapture:false},mouseMove:{nodeEventName:'mousemove',useCapture:false},mouseUp:{nodeEventName:'mouseup',useCapture:false},wheel:{nodeEventName:'wheel',useCapture:false},input:{nodeEventName:'input',useCapture:false},keyDown:{nodeEventName:'keydown',useCapture:false},keyUp:{nodeEventName:'keyup',useCapture:false},enterPress:{nodeEventName:'keydown',keys:[kijs.keys.ENTER],shiftKey:null,ctrlKey:null,altKey:null,usecapture:false},enterEscPress:{nodeEventName:'keydown',keys:[kijs.keys.ENTER,kijs.keys.ESC],shiftKey:null,ctrlKey:null,altKey:null,usecapture:false},escPress:{nodeEventName:'keydown',keys:[kijs.keys.ESC],shiftKey:null,ctrlKey:null,altKey:null,usecapture:false},spacePress:{nodeEventName:'keydown',keys:[kijs.keys.SPACE],shiftKey:null,ctrlKey:null,altKey:null,usecapture:false}};if(kijs.isObject(config)){_this3.applyConfig(config);}return _this3;}
_createClass(kijs_gui_Dom,[{key:'alignToTarget',value:function alignToTarget(targetNode,targetPos,pos,allowSwapX,allowSwapY,offsetX,offsetY){targetPos=targetPos||'bl';pos=pos||'tl';if(targetNode instanceof kijs.gui.Element){targetNode=targetNode.dom;}if(allowSwapX===undefined){allowSwapX=true;}if(allowSwapY===undefined){allowSwapY=true;}offsetX=offsetX||0;offsetY=offsetY||0;var b=kijs.Dom.getAbsolutePos(document.body);var e=kijs.Dom.getAbsolutePos(this._node);var t=kijs.Dom.getAbsolutePos(targetNode);var rect=kijs.Grafic.alignRectToRect(e,t,targetPos,pos,offsetX,offsetY);var overlap=kijs.Grafic.rectsOverlap(rect,b);var posSwap=void 0,targetPosSwap=void 0;var rectSwap=void 0,overlapSwap=void 0;var fit=true;var setHeight=false;var setWidth=false;if(!overlap.fitY){fit=false;if(allowSwapY){posSwap=null;if(pos.indexOf('t')!==-1&&targetPos.indexOf('b')!==-1){posSwap=pos.replace('t','b');targetPosSwap=targetPos.replace('b','t');}else if(pos.indexOf('b')!==-1&&targetPos.indexOf('t')!==-1){posSwap=pos.replace('b','t');targetPosSwap=targetPos.replace('t','b');}
if(posSwap){rectSwap=kijs.Grafic.alignRectToRect(e,t,targetPosSwap,posSwap,offsetX,offsetY);overlapSwap=kijs.Grafic.rectsOverlap(rectSwap,b);if(overlapSwap.fitY){rect=rectSwap;fit=true;}}}
if(!fit){if(rect.h>b.h){rect.h=b.h;setHeight=true;}
if(pos.indexOf('t')!==-1){rect.t=b.h-rect.h;}else{rect.t=0;}fit=true;}}
if(!overlap.fitX){fit=false;if(allowSwapX){posSwap=null;if(pos.indexOf('l')!==-1&&targetPos.indexOf('r')!==-1){posSwap=pos.replace('l','r');targetPosSwap=targetPos.replace('r','l');}else if(pos.indexOf('r')!==-1&&targetPos.indexOf('l')!==-1){posSwap=pos.replace('r','l');targetPosSwap=targetPos.replace('l','r');}
if(posSwap){rectSwap=kijs.Grafic.alignRectToRect(e,t,targetPosSwap,posSwap,offsetX,offsetY);overlapSwap=kijs.Grafic.rectsOverlap(rectSwap,b);if(overlapSwap.fitX){rect=rectSwap;fit=true;}}}
if(!fit){if(rect.w>b.w){rect.w=b.w;setWidth=true;}
if(pos.indexOf('l')!==-1){rect.x=b.w-rect.w;}else if(pos.indexOf('r')!==-1){rect.x=0;}fit=true;}}this.left=rect.x;this.top=rect.y;if(setWidth){this.width=rect.w;}if(setHeight){this.height=rect.h;}return{pos:posSwap?posSwap:pos,targetPos:targetPosSwap?targetPosSwap:targetPos};}},{key:'applyConfig',value:function applyConfig(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};kijs.Object.assignConfig(this,config,this._configMap);}},{key:'clsAdd',value:function clsAdd(cls){if(!cls){return;}if(!kijs.isArray(cls)){cls=cls.split(' ');}this._cls=kijs.Array.concatUnique(this._cls,cls);this._clsApply();}},{key:'clsHas',value:function clsHas(cls){return kijs.Array.contains(this._cls,cls);}},{key:'clsRemove',value:function clsRemove(cls){if(!cls){return;}if(!kijs.isArray(cls)){cls=cls.split(' ');}this._cls=kijs.Array.removeMultiple(this._cls,cls);this._clsApply();}},{key:'clsRemoveAll',value:function clsRemoveAll(){this._cls=[];this._clsApply();}},{key:'clsToggle',value:function clsToggle(cls){if(!cls){return;}var newCls=[];if(!kijs.isArray(cls)){cls=cls.split(' ');}kijs.Array.each(this._cls,function(cl){if(kijs.Array.contains(cls,cl)){kijs.Array.remove(cls,cl);}else{newCls.push(cl);}},this);if(cls){this._cls=newCls.concat(cls);}this._clsApply();}},{key:'focus',value:function focus(){var alsoSetIfNoTabIndex=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(alsoSetIfNoTabIndex){this._node.focus();return this._node;}else{var node=kijs.Dom.getFirstFocusableNode(this._node);if(node){node.focus();}return node;}}},{key:'nodeAttributeGet',value:function nodeAttributeGet(name){if(kijs.isEmpty(name)){return null;}if(this._node){return this._node[name];}else{if(this._nodeAttribute.hasOwnProperty(name)){return this._nodeAttribute[name];}else{return null;}}}},{key:'nodeAttributeSet',value:function nodeAttributeSet(name,value){if(kijs.isEmpty(name)){return;}if(kijs.isEmpty(value)){if(this._nodeAttribute.hasOwnProperty(name)){delete this._nodeAttribute[name];}}else{this._nodeAttribute[name]=value;}if(this._node){this._node[name]=value;}}},{key:'nodeAttributeHas',value:function nodeAttributeHas(name){if(this._node){return kijs.isEmpty(this._nodeAttribute[name]);}else{return!!this._nodeAttribute.hasOwnProperty(name);}}},{key:'on',value:function on(names,callback,context){var eventsCountBefore=Object.keys(this._events).length;_get(kijs_gui_Dom.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Dom.prototype),'on',this).call(this,names,callback,context);var eventsCountAfter=Object.keys(this._events).length;if(this._node&&eventsCountAfter-eventsCountBefore){this._nodeEventListenersAppy();}}},{key:'off',value:function off(names,callback,context){var eventsCountBefore=Object.keys(this._events).length;_get(kijs_gui_Dom.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Dom.prototype),'off',this).call(this,names,callback,context);var eventsCountAfter=Object.keys(this._events).length;if(this._node&&eventsCountAfter-eventsCountBefore){this._nodeEventListenersAppy();}}},{key:'raiseEvent',value:function raiseEvent(name){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};Object.assign(e,{dom:this,eventName:name});return _get(kijs_gui_Dom.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Dom.prototype),'raiseEvent',this).call(this,name,e);}},{key:'render',value:function render(){if(!this._node){this._node=document.createElement(this._nodeTagName);if(!kijs.isEmpty(this._style)){Object.assign(this._node.style,this._style);}
if(!kijs.isEmpty(this._width)){this.width=this._width;}if(!kijs.isEmpty(this._height)){this.height=this._height;}if(!kijs.isEmpty(this._top)){this.top=this._top;}if(!kijs.isEmpty(this._left)){this.left=this._left;}
this._nodeAttributeApply();this.disabled=this._disabled;}
if(kijs.isDefined(this._html)){kijs.Dom.setInnerHtml(this._node,this._html,this._htmlDisplayType);}
this._clsApply();this._nodeEventListenersAppy();}},{key:'renderTo',value:function renderTo(targetNode,insertBefore){this.render();if(insertBefore){targetNode.insertBefore(this._node,insertBefore);}else{targetNode.appendChild(this._node);}}},{key:'unRender',value:function unRender(){if(this._node){if(!kijs.isEmpty(this._nodeEventListeners)){kijs.Dom.removeAllEventListenersFromContext(this);}
kijs.Dom.removeAllChildNodes(this._node);if(this._node!==document.body){this._node.parentNode.removeChild(this._node);}}this._node=null;}},{key:'_clsApply',value:function _clsApply(){if(this._node){this._node.className=this._cls?this._cls.join(' '):'';}}},{key:'_nodeAttributeApply',value:function _nodeAttributeApply(){kijs.Object.each(this._nodeAttribute,function(name,value){this._node[name]=value;},this);}},{key:'_nodeEventListenersAppy',value:function _nodeEventListenersAppy(){var kijsEvents=Object.keys(this._events);if(!kijs.isEmpty(this._nodeEventListeners)){kijs.Dom.removeAllEventListenersFromContext(this);}
kijs.Array.each(kijsEvents,function(kijsEvent){if(this._eventMap[kijsEvent]){var nodeEventName=this._eventMap[kijsEvent].nodeEventName;var useCapture=!!this._eventMap[kijsEvent].useCapture;if(!kijs.Dom.hasEventListener(nodeEventName,this._node,this,useCapture)){kijs.Dom.addEventListener(nodeEventName,this._node,this._onNodeEvent,this,useCapture);}}else{throw new Error('kijsEvent "'+kijsEvent+'" is not mapped');}},this);}},{key:'_onEnterEscPress',value:function _onEnterEscPress(e){e.nodeEvent.stopPropagation();}},{key:'_onNodeEvent',value:function _onNodeEvent(e){var ret=true;kijs.Object.each(this._eventMap,function(eventName,val){if(val.nodeEventName!==e.nodeEventName||!!val.useCapture!==!!e.useCapture){return;}
if(!kijs.isEmpty(val.keys)){var keys=kijs.isArray(val.keys)?val.keys:[val.keys];if(!kijs.Array.contains(keys,e.nodeEvent.keyCode)){return;}}
if(!kijs.isEmpty(val.shiftKey)){if(!!val.shiftKey!==!!e.nodeEvent.shiftKey){return;}}
if(!kijs.isEmpty(val.ctrlKey)){if(!!val.ctrlKey!==!!e.nodeEvent.ctrlKey){return;}}
if(!kijs.isEmpty(val.altKey)){if(!!val.altKey!==!!e.nodeEvent.altKey){return;}}
e.dom=this;e.eventName=eventName;if(this.raiseEvent(eventName,e)===false){ret=false;}},this);return ret;}},{key:'destruct',value:function destruct(){if(this._toolTip){this._toolTip.destruct();}
kijs.Dom.removeAllEventListenersFromContext(this);if(this._node){kijs.Dom.removeAllChildNodes(this._node);if(this._node!==document.body){this._node.parentNode.removeChild(this._node);}}
this._cls=null;this._configMap=null;this._eventMap=null;this._node=null;this._nodeAttribute=null;this._nodeEventListeners=null;this._style=null;this._toolTip=null;_get(kijs_gui_Dom.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Dom.prototype),'destruct',this).call(this);}},{key:'disabled',get:function get(){if(this._node){return!!this._node.disabled;}else{return this._disabled;}},set:function set(val){this._disabled=!!val;if(this._node){this._node.disabled=!!val;}if(this._toolTip){this._toolTip.disabled=!!val;}}},{key:'disableEnterEscBubbeling',get:function get(){return this._disableEnterEscBubbeling;},set:function set(val){this._disableEnterEscBubbeling=val;if(val){this.on('enterEscPress',this._onEnterEscPress,this);}else{this.off('enterEscPress',this._onEnterEscPress,this);}}},{key:'hasLeft',get:function get(){if(this._node){return!kijs.isEmpty(this._node.style.left);}else{return!kijs.isEmpty(this._left);}}},{key:'hasHeight',get:function get(){if(this._node){return!kijs.isEmpty(this._node.style.height);}else{return!kijs.isEmpty(this._height);}}},{key:'hasTop',get:function get(){if(this._node){return!kijs.isEmpty(this._node.style.top);}else{return!kijs.isEmpty(this._top);}}},{key:'hasWidth',get:function get(){if(this._node){return!kijs.isEmpty(this._node.style.width);}else{return!kijs.isEmpty(this._width);}}},{key:'height',get:function get(){if(this._node){return this._node.offsetHeight;}else{return this._height;}},set:function set(val){if(kijs.isEmpty(val)){val=null;}if(val!==null&&!kijs.isNumeric(val)){throw new Error('set height(x). x must be numeric.');}this._height=val;if(this._node){if(!kijs.isEmpty(val)){val+='px';}this._node.style.height=val;}}},{key:'html',get:function get(){return this._html;},set:function set(val){this._html=val;if(this._node){kijs.Dom.setInnerHtml(this._node,this._html,this._htmlDisplayType);}}},{key:'htmlDisplayType',get:function get(){return this._htmlDisplayType;},set:function set(val){this._htmlDisplayType=val;}},{key:'isEmpty',get:function get(){return kijs.isEmpty(this.html);}},{key:'isRendered',get:function get(){return!!this._node;}},{key:'left',get:function get(){if(this._node){return this._node.offsetLeft;}else{return this._left;}},set:function set(val){if(kijs.isEmpty(val)){val=null;}if(val!==null&&!kijs.isNumeric(val)){throw new Error('set left(x). x must be numeric.');}this._left=val;if(this._node){if(!kijs.isEmpty(val)){val+='px';}this._node.style.left=val;}}},{key:'node',get:function get(){return this._node;},set:function set(val){this._node=val;}},{key:'nodeTagName',get:function get(){return this._nodeTagName;},set:function set(val){this._nodeTagName=val;if(!this._node){this._nodeTagName=val;}else if(this._node.tagName.toLowerCase()!==val){throw new Error('Property "nodeTagName" can not be set. The node has allready been rendered.');}}},{key:'style',get:function get(){if(this._node){return this._node.style;}else{return this._style;}},set:function set(val){if(!this._node){this._style=val;}else{throw new Error('Property "style" can not be set. The node has allready been rendered.');}}},{key:'toolTip',get:function get(){return this._toolTip;},set:function set(val){if(val instanceof kijs.gui.ToolTip){this._toolTip=val;}else if(kijs.isObject(val)){if(this._toolTip){this._toolTip.applyConfig(val);}else{this._toolTip=new kijs.gui.ToolTip(val);}}else if(kijs.isArray(val)){if(val.length>1){var tmp='<ul>';kijs.Array.each(val,function(v){tmp+='<li>'+v+'</li>';},this);tmp+='</ul>';val=tmp;}else if(val.length===1){val=val[0];}else{val='';}if(this._toolTip){this._toolTip.html=val;}else{this._toolTip=new kijs.gui.ToolTip({html:val});}}else if(kijs.isString(val)){if(this._toolTip){this._toolTip.html=val;}else{this._toolTip=new kijs.gui.ToolTip({html:val});}}else if(kijs.isEmpty(val)){if(this._toolTip){this._toolTip.destruct();}this._toolTip=null;}else{throw new Error('Unkown toolTip format');}if(this._toolTip){this._toolTip.target=this;}}},{key:'top',get:function get(){if(this._node){return this._node.offsetTop;}else{return this._top;}},set:function set(val){if(kijs.isEmpty(val)){val=null;}if(val!==null&&!kijs.isNumeric(val)){throw new Error('set top(x). x must be numeric.');}this._top=val;if(this._node){if(!kijs.isEmpty(val)){val+='px';}this._node.style.top=val;}}},{key:'width',get:function get(){if(this._node){return this._node.offsetWidth;}else{return this._width;}},set:function set(val){if(kijs.isEmpty(val)){val=null;}if(val!==null&&!kijs.isNumeric(val)){throw new Error('set width(x). x must be numeric.');}this._width=val;if(this._node){if(!kijs.isEmpty(val)){val+='px';}this._node.style.width=val;}}}]);return kijs_gui_Dom;}(kijs.Observable);kijs.gui.ToolTip=function(_kijs$Observable2){_inherits(kijs_gui_ToolTip,_kijs$Observable2);function kijs_gui_ToolTip(config){_classCallCheck(this,kijs_gui_ToolTip);var _this4=_possibleConstructorReturn(this,(kijs_gui_ToolTip.__proto__||Object.getPrototypeOf(kijs_gui_ToolTip)).call(this,false));_this4._disabled=false;_this4._dom=new kijs.gui.Dom();_this4._followPointer=false;_this4._offsetX=10;_this4._offsetY=10;_this4._target=null;config=Object.assign({},{},config);_this4._configMap={cls:{fn:'function',target:_this4._dom.clsAdd,context:_this4._dom},disabled:true,followPointer:true,html:{target:'html',context:_this4._dom},htmlDisplayType:{target:'htmlDisplayType',context:_this4._dom},offsetX:true,offsetY:true,on:{fn:'assignListeners'},target:{target:'target'},style:{fn:'assign',target:'style',context:_this4._dom}};_this4._dom.clsAdd('kijs-tooltip');if(kijs.isObject(config)){_this4.applyConfig(config);}return _this4;}
_createClass(kijs_gui_ToolTip,[{key:'applyConfig',value:function applyConfig(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};kijs.Object.assignConfig(this,config,this._configMap);}},{key:'hide',value:function hide(){this._dom.clsAdd('kijs-hidden');}},{key:'render',value:function render(preventAfterRender){this._dom.render();}},{key:'show',value:function show(x,y){var create=!this.dom.node;if(create){this.render();}
if(create||this._dom.clsHas('kijs-hidden')||this._followPointer){if(kijs.isDefined(x)){if(this._offsetX){x+=this._offsetX;}
if(x+this._dom.node.offsetWidth>window.innerWidth){x=Math.abs(window.innerWidth-this._dom.node.offsetWidth);}
this._dom.style.left=x+'px';}
if(kijs.isDefined(y)){if(this._offsetY){y+=this._offsetY;}
if(y+this._dom.node.offsetHeight>window.innerHeight){y=Math.abs(window.innerHeight-this._dom.node.offsetHeight);}
this._dom.style.top=y+'px';}
this._dom.clsRemove('kijs-hidden');}if(create){document.body.appendChild(this._dom.node);}}},{key:'_bindEventsToTarget',value:function _bindEventsToTarget(){this._target.on('mouseMove',this._onMouseMoveTarget,this);this._target.on('mouseLeave',this._onMouseLeave,this);}},{key:'_onMouseMoveTarget',value:function _onMouseMoveTarget(e){if(!this.disabled){this.show(e.nodeEvent.clientX,e.nodeEvent.clientY);}}},{key:'_onMouseLeave',value:function _onMouseLeave(e){this.hide();}},{key:'destruct',value:function destruct(preventDestructEvent){if(!preventDestructEvent){this.raiseEvent('destruct');}
if(this._target){this._target.off(null,null,this);}
if(this._dom){this._dom.destruct();}
this._dom=null;this._target=null;_get(kijs_gui_ToolTip.prototype.__proto__||Object.getPrototypeOf(kijs_gui_ToolTip.prototype),'destruct',this).call(this);}},{key:'disabled',get:function get(){return this._disabled;},set:function set(val){this._disabled=!!val;if(this._disabled){this.hide();}}},{key:'dom',get:function get(){return this._dom;}},{key:'html',get:function get(){return this._dom.html;},set:function set(val){this._dom.html=val;}},{key:'isEmpty',get:function get(){return this._dom.isEmpty;}},{key:'target',get:function get(){return this._target;},set:function set(val){if(this._target!==val){this._target=val;this._bindEventsToTarget();}}}]);return kijs_gui_ToolTip;}(kijs.Observable);kijs.gui.Element=function(_kijs$Observable3){_inherits(kijs_gui_Element,_kijs$Observable3);function kijs_gui_Element(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_Element);var _this5=_possibleConstructorReturn(this,(kijs_gui_Element.__proto__||Object.getPrototypeOf(kijs_gui_Element)).call(this));_this5._afterResizeDeferHandle=null;_this5._afterResizeDelay=300;_this5._dom=new kijs.gui.Dom();_this5._name=null;_this5._parentEl=null;_this5._visible=true;_this5._lastSize=null;_this5._waitMaskEl=null;_this5._waitMaskCount=0;_this5._waitMaskTargetDomProperty='dom';_this5._preventAfterResize=false;_this5._eventForwards={};config=Object.assign({},{},config);_this5._configMap={afterResizeDelay:true,cls:{fn:'function',target:_this5._dom.clsAdd,context:_this5._dom},disableEnterEscBubbeling:{target:'disableEnterEscBubbeling',context:_this5._dom},nodeTagName:{target:'nodeTagName',context:_this5._dom},defaults:{fn:'manual'},height:{target:'height'},html:{target:'html',context:_this5._dom},htmlDisplayType:{target:'htmlDisplayType',context:_this5._dom},left:{target:'left'},name:true,on:{fn:'assignListeners'},parent:{target:'parent'},style:{fn:'assign',target:'style',context:_this5._dom},toolTip:{target:'toolTip'},top:{target:'top'},visible:true,displayWaitMask:{target:'displayWaitMask'},waitMaskTargetDomProperty:{target:'waitMaskTargetDomProperty'},width:{target:'width'},xtype:{fn:'manual'}};_this5._eventForwardsAdd('click',_this5._dom);_this5._eventForwardsAdd('dblClick',_this5._dom);_this5._eventForwardsAdd('drag',_this5._dom);_this5._eventForwardsAdd('dragOver',_this5._dom);_this5._eventForwardsAdd('dragStart',_this5._dom);_this5._eventForwardsAdd('dragLeave',_this5._dom);_this5._eventForwardsAdd('dragEnd',_this5._dom);_this5._eventForwardsAdd('drop',_this5._dom);_this5._eventForwardsAdd('focus',_this5._dom);_this5._eventForwardsAdd('mouseDown',_this5._dom);_this5._eventForwardsAdd('mouseLeafe',_this5._dom);_this5._eventForwardsAdd('mouseMove',_this5._dom);_this5._eventForwardsAdd('mouseUp',_this5._dom);_this5._eventForwardsAdd('wheel',_this5._dom);_this5._eventForwardsAdd('keyDown',_this5._dom);_this5._eventForwardsAdd('enterPress',_this5._dom);_this5._eventForwardsAdd('enterEscPress',_this5._dom);_this5._eventForwardsAdd('escPress',_this5._dom);_this5._eventForwardsAdd('spacePress',_this5._dom);if(kijs.isObject(config)){_this5.applyConfig(config,true);}return _this5;}
_createClass(kijs_gui_Element,[{key:'applyConfig',value:function applyConfig(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var preventEvents=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var prevAfterRes=this._preventAfterResize;if(preventEvents){this._preventAfterResize=true;}
kijs.Object.assignConfig(this,config,this._configMap);if(preventEvents){this._preventAfterResize=prevAfterRes;}}},{key:'focus',value:function focus(){var alsoSetIfNoTabIndex=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return this._dom.focus(alsoSetIfNoTabIndex);}},{key:'on',value:function on(names,callback,context){names=kijs.isArray(names)?names:[names];kijs.Array.each(names,function(name){if(this._eventForwards[name]){kijs.Array.each(this._eventForwards[name],function(forward){forward.target.on(forward.targetEventName,this._onForwardEvent,this);},this);}},this);_get(kijs_gui_Element.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Element.prototype),'on',this).call(this,names,callback,context);}},{key:'raiseEvent',value:function raiseEvent(name){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};Object.assign(e,{element:this,eventName:name});if(kijs.isEmpty(e.raiseElement)){e.raiseElement=this;}return _get(kijs_gui_Element.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Element.prototype),'raiseEvent',this).call(this,name,e);}},{key:'render',value:function render(preventAfterRender){this._dom.render();if(kijs.isDefined(this._visible)){this.visible=this._visible;}if(this._waitMaskEl){kijs.defer(function(){if(this._waitMaskEl){this._waitMaskEl.show();}},300,this);}
if(!preventAfterRender){this.raiseEvent('afterRender');}}},{key:'renderTo',value:function renderTo(targetNode,insertBefore){var firstRender=!this.isRendered;this.render();if(insertBefore){targetNode.insertBefore(this._dom.node,insertBefore);}else{targetNode.appendChild(this._dom.node);}
if(firstRender){this.raiseEvent('afterFirstRenderTo');}}},{key:'unRender',value:function unRender(){this._dom.unRender();}},{key:'up',value:function up(name){if(!kijs.isEmpty(name)&&this.parent){if(this.parent.name===name){return this.parent;}else if(this.parent.up){return this.parent.up(name);}}return null;}},{key:'upX',value:function upX(xtype){if(!kijs.isEmpty(xtype)&&this.parent){if(this.parent.xtype===xtype){return this.parent;}else if(this.parent.upX){return this.parent.upX(xtype);}}return null;}},{key:'waitMaskAdd',value:function waitMaskAdd(){this._waitMaskCount++;if(!this._waitMaskEl){this.displayWaitMask=true;}return this._waitMaskEl;}},{key:'waitMaskRemove',value:function waitMaskRemove(){if(this._waitMaskEl&&this._waitMaskCount){this._waitMaskCount--;if(this._waitMaskCount<=0){this.displayWaitMask=false;}}}},{key:'_eventForwardsAdd',value:function _eventForwardsAdd(eventName,target,targetEventName){if(!targetEventName){targetEventName=eventName;}if(!this._eventForwardsHas(eventName,target,targetEventName)){this._eventForwards[eventName]=this._eventForwards[eventName]||[];var forward={target:target,targetEventName:targetEventName};this._eventForwards[eventName].push(forward);}}},{key:'_eventForwardsHas',value:function _eventForwardsHas(eventName,target,targetEventName){if(!targetEventName){targetEventName=eventName;}var ret=false;if(!kijs.isEmpty(this._eventForwards[eventName])){kijs.Array.each(this._eventForwards[eventName],function(forward){if(forward.target===target&&forward.targetEventName===targetEventName){ret=true;return;}},this);}return ret;}},{key:'_eventForwardsRemove',value:function _eventForwardsRemove(eventName,target,targetEventName){if(!targetEventName){targetEventName=eventName;}var forwardToDelete=null;if(!kijs.isEmpty(this._eventForwards[eventName])){kijs.Array.each(this._eventForwards[eventName],function(forward){if(forward.target===target&&forward.targetEventName===targetEventName){forwardToDelete=forward;return;}},this);}if(forwardToDelete){kijs.Array.remove(this._eventForwards[eventName],forwardToDelete);}}},{key:'_hasSizeChanged',value:function _hasSizeChanged(){var height=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var width=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!kijs.isObject(this._lastSize)){return true;}if(height===null){height=this.height;}if(width===null){width=this.width;}if(height!==this._lastSize.h||width!==this._lastSize.w){return true;}return false;}},{key:'_raiseAfterResizeEvent',value:function _raiseAfterResizeEvent(){var useDelay=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(this._preventAfterResize){return;}
if(useDelay){if(this._afterResizeDeferHandle){window.clearTimeout(this._afterResizeDeferHandle);}this._afterResizeDeferHandle=kijs.defer(function(){this._afterResizeDeferHandle=null;if(this._hasSizeChanged()){this._lastSize={h:this.height,w:this.width};this.raiseEvent('afterResize',e);}},this._afterResizeDelay,this);}else{if(this._hasSizeChanged()){this._lastSize={h:this.height,w:this.width};this.raiseEvent('afterResize',e);}}}},{key:'_onForwardEvent',value:function _onForwardEvent(e){var ret=true;kijs.Object.each(this._eventForwards,function(eventName,forwards){kijs.Array.each(forwards,function(forward){var eventContextProperty=forward.target instanceof kijs.gui.Dom?'context':'element';if(forward.target===e[eventContextProperty]&&forward.targetEventName===e.eventName){e.element=this;if(!this.raiseEvent(eventName,e)===false){ret=false;}}},this);},this);return ret;}},{key:'_onParentAfterResize',value:function _onParentAfterResize(e){this._raiseAfterResizeEvent(false,e);}},{key:'_onParentChildElementAfterResize',value:function _onParentChildElementAfterResize(e){this._raiseAfterResizeEvent(false,e);}},{key:'destruct',value:function destruct(preventDestructEvent){this._preventAfterResize=true;if(this._afterResizeDeferHandle){window.clearTimeout(this._afterResizeDeferHandle);}
if(!preventDestructEvent){this.raiseEvent('destruct');}
if(this._parentEl){this._parentEl.off(null,null,this);}
if(this._dom){this._dom.destruct();}if(this._waitMaskEl){this._waitMaskEl.destruct;}
this._afterResizeDeferHandle=null;this._dom=null;this._parentEl=null;this._eventForwards=null;this._configMap=null;this._lastSize=null;this._waitMaskEl=null;_get(kijs_gui_Element.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Element.prototype),'destruct',this).call(this);}},{key:'afterResizeDelay',get:function get(){return this._afterResizeDelay;},set:function set(val){this._afterResizeDelay=val;}},{key:'displayWaitMask',get:function get(){return!kijs.isEmpty(this._waitMaskEl);},set:function set(val){if(val){if(kijs.isEmpty(this._waitMaskEl)){this._waitMaskEl=new kijs.gui.Mask({displayWaitIcon:true,target:this,targetDomProperty:this._waitMaskTargetDomProperty});this._waitMaskCount=1;if(this.isRendered){this._waitMaskEl.show();}}}else{if(!kijs.isEmpty(this._waitMaskEl)){this._waitMaskEl.destruct();this._waitMaskEl=null;this._waitMaskCount=0;}}}},{key:'dom',get:function get(){return this._dom;}},{key:'isRendered',get:function get(){return!!this._dom.isRendered;}},{key:'node',get:function get(){return this._dom.node;}},{key:'nodeTagName',get:function get(){return this._dom.nodeTagName;}},{key:'height',get:function get(){return this._dom.height;},set:function set(val){this._dom.height=val;if(this._hasSizeChanged(val)){this._raiseAfterResizeEvent(true);}}},{key:'html',get:function get(){return this._dom.html;},set:function set(val){this._dom.html=val;}},{key:'htmlDisplayType',get:function get(){return this._dom.htmlDisplayType;},set:function set(val){this._dom.htmlDisplayType=val;}},{key:'isEmpty',get:function get(){return this._dom.isEmpty;}},{key:'left',get:function get(){return this._dom.left;},set:function set(val){this._dom.left=val;}},{key:'name',get:function get(){return this._name;},set:function set(val){this._name=val;}},{key:'next',get:function get(){if(!this._parentEl||!this._parentEl.elements){return null;}var index=-1;for(var i=0;i<this._parentEl.elements.length;i++){if(this._parentEl.elements[i]===this){index=i+1;break;}}if(index>-1&&this._parentEl.elements[index]){return this._parentEl.elements[index];}else{return null;}}},{key:'parent',get:function get(){return this._parentEl;},set:function set(val){if(val!==this._parentEl){if(this._parentEl){this._parentEl.off('afterResize',this._onParentAfterResize,this);this._parentEl.off('childElementAfterResize',this._onParentChildElementAfterResize,this);}this._parentEl=val;this._parentEl.on('afterResize',this._onParentAfterResize,this);this._parentEl.on('childElementAfterResize',this._onParentChildElementAfterResize,this);this.applyConfig();}}},{key:'previous',get:function get(){if(!this._parentEl||!this._parentEl.elements){return null;}var index=-1;for(var i=0;i<this._parentEl.elements.length;i++){if(this._parentEl.elements[i]===this){index=i-1;break;}}if(index>-1&&this._parentEl.elements[index]){return this._parentEl.elements[index];}else{return null;}}},{key:'style',get:function get(){return this._dom.style;}},{key:'toolTip',get:function get(){return this._dom.toolTip;},set:function set(val){this._dom.toolTip=val;}},{key:'top',get:function get(){return this._dom.top;},set:function set(val){this._dom.top=val;}},{key:'visible',get:function get(){return this._visible;},set:function set(val){var changed=!!this._visible!==!!val;this._visible=!!val;if(this._visible){this._dom.clsRemove('kijs-hidden');}else{this._dom.clsAdd('kijs-hidden');}if(changed){this.raiseEvent('changeVisibility',{visible:this._visible});}}},{key:'waitMaskTargetDomProperty',get:function get(){return this._waitMaskTargetDomProperty;},set:function set(val){this._waitMaskTargetDomProperty=val;if(!kijs.isEmpty(this._waitMaskEl)){this._waitMaskEl.targetDomProperty=val;}}},{key:'width',get:function get(){return this._dom.width;},set:function set(val){this._dom.width=val;if(this._hasSizeChanged(null,val)){this._raiseAfterResizeEvent(true);}}},{key:'xtype',get:function get(){if(kijs.isString(this.constructor.name)&&!kijs.isEmpty(this.constructor.name)){return this.constructor.name.replace(/_/g,'.');}else{var proto=this;if(!proto.__xtype){var results=/\s*class\s([a-zA-Z0-9_]+)(\sextends\s[a-zA-Z0-9_.]+)?\s*{/.exec(this.constructor.toString());if(results&&results.length>0){proto.__xtype=results[1].trim().replace(/_/g,'.');}}
if(!proto.__xtype){var _results=/\s*function\s([a-zA-Z0-9_]+)\s*\(/.exec(this.constructor.toString());if(_results&&_results.length>0){proto.__xtype=_results[1].trim().replace(/_/g,'.');}}if(proto.__xtype){return proto.__xtype;}else{throw new Error('xtype can not be determined');}}}}]);return kijs_gui_Element;}(kijs.Observable);kijs.gui.Container=function(_kijs$gui$Element){_inherits(kijs_gui_Container,_kijs$gui$Element);function kijs_gui_Container(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_Container);var _this6=_possibleConstructorReturn(this,(kijs_gui_Container.__proto__||Object.getPrototypeOf(kijs_gui_Container)).call(this,false));_this6._innerDom=new kijs.gui.Dom();_this6._defaults={};_this6._elements=[];_this6._dom.clsAdd('kijs-container');_this6._innerDom.clsAdd('kijs-container-inner');config=Object.assign({},{},config);Object.assign(_this6._configMap,{autoScroll:{target:'autoScroll'},defaults:true,html:{target:'html',context:_this6._innerDom},htmlDisplayType:{target:'htmlDisplayType',context:_this6._innerDom},innerCls:{fn:'function',target:_this6._innerDom.clsAdd,context:_this6._innerDom},innerStyle:{fn:'assign',target:'style',context:_this6._innerDom},elements:{prio:1000,fn:'function',target:_this6.add,context:_this6}});if(kijs.isObject(config)){_this6.applyConfig(config,true);}return _this6;}
_createClass(kijs_gui_Container,[{key:'add',value:function add(elements,index){if(!kijs.isArray(elements)){elements=[elements];}var newElements=[];for(var i=0,len=elements.length;i<len;i++){var el=this._getInstanceForAdd(elements[i]);if(el&&!kijs.Array.contains(this._elements,el)){el.on('afterResize',this._onChildElementAfterResize,this);newElements.push(el);}}elements=null;if(this.raiseEvent('beforeAdd',{elements:newElements})===false){return;}
kijs.Array.each(newElements,function(el){this._elements.push(el);if(this._innerDom.node){el.renderTo(this._innerDom.node);}},this);if(this._innerDom.node){this.render();}
this.raiseEvent('add',{elements:newElements});}},{key:'down',value:function down(name){var ret=this.getElementsByName(name,-1,true);if(!kijs.isEmpty(ret)){return ret[0];}else{return null;}}},{key:'downX',value:function downX(xtype){var ret=this.getElementsByXtype(xtype,-1,true);if(!kijs.isEmpty(ret)){return ret[0];}else{return null;}}},{key:'getElementsByName',value:function getElementsByName(name){var deep=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;var breakOnFirst=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var ret=[];if(kijs.isEmpty(name)){return[];}
kijs.Array.each(this._elements,function(el){if(el.name===name){ret.push(el);if(breakOnFirst){return false;}}},this);if(!breakOnFirst||kijs.isEmpty(ret)){if(deep&&deep!==0){if(deep>0){deep--;}kijs.Array.each(this._elements,function(el){if(kijs.isFunction(el.getElementsByName)){var retSub=el.getElementsByName(name,deep,breakOnFirst);if(!kijs.isEmpty(retSub)){ret=ret.concat(retSub);if(breakOnFirst){return false;}}}},this);}}
return ret;}},{key:'getElementsByXtype',value:function getElementsByXtype(xtype){var deep=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;var breakOnFirst=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var ret=[];if(kijs.isEmpty(xtype)){return[];}
kijs.Array.each(this._elements,function(el){if(el.xtype===xtype){ret.push(el);if(breakOnFirst){return false;}}},this);if(!breakOnFirst||kijs.isEmpty(ret)){if(deep&&deep!==0){if(deep>0){deep--;}kijs.Array.each(this._elements,function(el){if(kijs.isFunction(el.getElementsByXtype)){var retSub=el.getElementsByXtype(xtype,deep,breakOnFirst);if(!kijs.isEmpty(retSub)){ret=ret.concat(retSub);if(breakOnFirst){return false;}}}},this);}}
return ret;}},{key:'hasChild',value:function hasChild(element){return kijs.Array.contains(this._elements,element);}},{key:'remove',value:function remove(elements){if(!kijs.isArray(elements)){elements=[elements];}var removeElements=[];for(var i=0,len=elements.length;i<len;i++){if(kijs.Array.contains(this._elements,elements[i])){removeElements.push(elements[i]);}}elements=null;if(this.raiseEvent('beforeRemove',{elements:removeElements})===false){return;}
kijs.Array.each(removeElements,function(el){el.off(null,null,this);if(el.destruct){el.destruct();}kijs.Array.remove(this._elements,el);},this);if(this.dom){this.render();}
this.raiseEvent('remove');}},{key:'removeAll',value:function removeAll(preventRender){if(this.raiseEvent('beforeRemove',{elements:this._elements})===false){return;}
kijs.Array.each(this._elements,function(el){if(el.destruct){el.destruct();}},this);this._elements=[];if(this._innerDom){while(this._innerDom.firstChild){this._innerDom.removeChild(this._innerDom.firstChild);}}if(this.dom&&!preventRender){this.render();}
this.raiseEvent('remove');}},{key:'render',value:function render(preventAfterRender){_get(kijs_gui_Container.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Container.prototype),'render',this).call(this,true);this._innerDom.render();this._dom.node.appendChild(this._innerDom.node);kijs.Array.each(this._elements,function(el){el.renderTo(this._innerDom.node);},this);if(!preventAfterRender){this.raiseEvent('afterRender');}}},{key:'unRender',value:function unRender(){this._innerDom.unRender();_get(kijs_gui_Container.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Container.prototype),'unRender',this).call(this);}},{key:'_getInstanceForAdd',value:function _getInstanceForAdd(obj){if(obj instanceof kijs.gui.Element){}else if(kijs.isObject(obj)){if(!kijs.isEmpty(this._defaults)){kijs.Object.assignDeep(obj,this._defaults,false);}
if(!kijs.isString(obj.xtype)){throw new Error('config missing "xtype".');}
var constr=kijs.gui.getClassFromXtype(obj.xtype);if(!kijs.isFunction(constr)){throw new Error('Unknown xtype "'+obj.xtype+'".');}
obj=new constr(obj);}else{throw new Error('kijs.gui.Container: invalid element.');obj=null;}
obj.parent=this;return obj;}},{key:'_onChildElementAfterResize',value:function _onChildElementAfterResize(e){this.raiseEvent('childElementAfterResize',{childElement:e.element});}},{key:'destruct',value:function destruct(preventDestructEvent){if(!preventDestructEvent){this.raiseEvent('destruct');}
if(this._elements){kijs.Array.each(this._elements,function(el){if(el&&el.destruct){el.destruct();}},this);}if(this._innerDom){this._innerDom.destruct();}
this._defaults=null;this._elements=null;this._innerDom=null;_get(kijs_gui_Container.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Container.prototype),'destruct',this).call(this,true);}},{key:'autoScroll',get:function get(){return this._innerDom.clsHas('kijs-autoscroll');},set:function set(val){if(val){this._innerDom.clsAdd('kijs-autoscroll');}else{this._innerDom.clsRemove('kijs-autoscroll');}}},{key:'elements',get:function get(){return this._elements;}},{key:'html',get:function get(){return this._innerDom.html;},set:function set(val){this._innerDom.html=val;}},{key:'htmlDisplayType',get:function get(){return this._innerDom.htmlDisplayType;},set:function set(val){this._innerDom.htmlDisplayType=val;}},{key:'innerDom',get:function get(){return this._innerDom;}},{key:'isEmpty',get:function get(){return kijs.isEmpty(this._elements);}}]);return kijs_gui_Container;}(kijs.gui.Element);kijs.gui.SpinBox=function(_kijs$gui$Container){_inherits(kijs_gui_SpinBox,_kijs$gui$Container);function kijs_gui_SpinBox(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_SpinBox);var _this7=_possibleConstructorReturn(this,(kijs_gui_SpinBox.__proto__||Object.getPrototypeOf(kijs_gui_SpinBox)).call(this,false));_this7._ownPos='tl';_this7._targetPos='bl';_this7._allowSwapX=true;_this7._allowSwapY=true;_this7._offsetX=0;_this7._offsetY=0;_this7._ownerNodes=[_this7._dom];_this7._openOnInput=true;_this7._preventHide=false;_this7._targetEl=null;_this7._targetDomProperty='dom';_this7._dom.clsRemove('kijs-container');_this7._dom.clsAdd('kijs-spinbox');config=Object.assign({},{},config);Object.assign(_this7._configMap,{allowSwapX:true,allowSwapY:true,offsetX:true,offsetY:true,ownPos:true,openOnInput:true,targetPos:true,target:{target:'target'},targetDomProperty:true,ownerNodes:{fn:'appendUnique',target:'_ownerNodes'}});_this7.on('wheel',_this7._onWheel,_this7);if(kijs.isObject(config)){_this7.applyConfig(config,true);}return _this7;}
_createClass(kijs_gui_SpinBox,[{key:'close',value:function close(){kijs.Dom.removeEventListener('mousedown',document.body,this);kijs.Dom.removeEventListener('resize',window,this);kijs.Dom.removeEventListener('wheel',window,this);kijs.Array.each(this._ownerNodes,function(x){var node=x instanceof kijs.gui.Dom?x.node:x;kijs.Dom.removeEventListener('mousedown',node,this);kijs.Dom.removeEventListener('resize',node,this);},this);this.unRender();}},{key:'show',value:function show(){this.renderTo(document.body);this._adjustPositionToTarget(true);this._raiseAfterResizeEvent(true);this._targetEl.focus();kijs.Dom.addEventListener('mousedown',document.body,this._onBodyMouseDown,this);kijs.Dom.addEventListener('resize',window,this._onWindowResize,this);kijs.Dom.addEventListener('wheel',window,this._onWindowWheel,this);kijs.Array.each(this._ownerNodes,function(x){var node=x instanceof kijs.gui.Dom?x.node:x;kijs.Dom.addEventListener('mousedown',node,this._onNodeMouseDown,this);kijs.Dom.addEventListener('resize',node,this._onNodeResize,this);},this);}},{key:'_adjustPositionToTarget',value:function _adjustPositionToTarget(){var preventEvents=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var prevAfterRes=this._preventAfterResize;this._preventAfterResize=true;var positions=this._dom.alignToTarget(this.targetNode,this._targetPos,this._ownPos,this._allowSwapX,this._allowSwapY,this._offsetX,this._offsetY);var cls='';if(positions.targetPos.indexOf('t')!==-1&&positions.pos.indexOf('b')!==-1){cls='kijs-pos-top';}else if(positions.targetPos.indexOf('b')!==-1&&positions.pos.indexOf('t')!==-1){cls='kijs-pos-bottom';}else if(positions.targetPos.indexOf('l')!==-1&&positions.pos.indexOf('r')!==-1){cls='kijs-pos-left';}else if(positions.targetPos.indexOf('r')!==-1&&positions.pos.indexOf('l')!==-1){cls='kijs-pos-right';}this._dom.clsRemove(['kijs-pos-top','kijs-pos-bottom','kijs-pos-left','kijs-pos-right']);if(cls){this._dom.clsAdd(cls);}
this._preventAfterResize=prevAfterRes;if(!preventEvents&&this._hasSizeChanged()){this._raiseAfterResizeEvent(true);}}},{key:'_onBodyMouseDown',value:function _onBodyMouseDown(e){if(!this._preventHide){this.close();}this._preventHide=false;}},{key:'_onWindowResize',value:function _onWindowResize(e){if(!this._preventHide){this.close();}this._preventHide=false;}},{key:'_onWindowWheel',value:function _onWindowWheel(e){if(!this._preventHide){this.close();}this._preventHide=false;}},{key:'_onNodeMouseDown',value:function _onNodeMouseDown(e){this._preventHide=true;}},{key:'_onNodeResize',value:function _onNodeResize(e){this._preventHide=true;}},{key:'_onWheel',value:function _onWheel(e){this._preventHide=true;}},{key:'_onTargetElInput',value:function _onTargetElInput(e){if(this._openOnInput&&!this.isRendered){this.show();}}},{key:'_onTargetElKeyDown',value:function _onTargetElKeyDown(e){switch(e.nodeEvent.keyCode){case kijs.keys.ESC:case kijs.keys.TAB:this.close();break;case kijs.keys.F4:if(this.isRendered){this.close();}else{this.show();}break;}}},{key:'_onTargetElDestruct',value:function _onTargetElDestruct(e){this.destruct();}},{key:'destruct',value:function destruct(preventDestructEvent){if(!preventDestructEvent){this.raiseEvent('destruct');}
if(this._targetEl){this._targetEl.off(null,null,this);}kijs.Dom.removeEventListener('mousedown',document.body,this);kijs.Dom.removeEventListener('resize',window,this);kijs.Dom.removeEventListener('wheel',window,this);if(!kijs.isEmpty(this._ownerNodes)){kijs.Array.each(this._ownerNodes,function(x){if(x){var node=x instanceof kijs.gui.Dom?x.node:x;if(node){kijs.Dom.removeEventListener('mousedown',node,this);kijs.Dom.removeEventListener('resize',node,this);}}},this);}
this._targetEl=null;this._ownerNodes=null;_get(kijs_gui_SpinBox.prototype.__proto__||Object.getPrototypeOf(kijs_gui_SpinBox.prototype),'destruct',this).call(this,true);}},{key:'allowSwapX',get:function get(){return this._allowSwapX;},set:function set(val){this._allowSwapX=!!val;}},{key:'allowSwapY',get:function get(){return this._allowSwapY;},set:function set(val){this._allowSwapY=!!val;}},{key:'offsetX',get:function get(){return this._offsetX;},set:function set(val){this._offsetX=val;}},{key:'offsetY',get:function get(){return this._offsetY;},set:function set(val){this._offsetY=val;}},{key:'ownPos',get:function get(){this._ownPos;},set:function set(val){if(kijs.Array.contains(['tl','t','tr','l','c','r','bl','b','br'],val)){this._ownPos=val;}else{throw new Error('Unkown format on config "pos"');}}},{key:'openOnInput',get:function get(){return this._openOnInput;},set:function set(val){this._openOnInput=val;}},{key:'target',get:function get(){return this._targetEl;},set:function set(val){if(!kijs.isEmpty(this._targetEl)){this._targetEl.off('input',this._onTargetElInput,this);this._targetEl.off('keyDown',this._onTargetElKeyDown,this);this._targetEl.off('destruct',this._onTargetElDestruct,this);}if(val instanceof kijs.gui.Element){this._targetEl=val;this._targetEl.on('input',this._onTargetElInput,this);this._targetEl.on('keyDown',this._onTargetElKeyDown,this);this._targetEl.on('destruct',this._onTargetElDestruct,this);}else{throw new Error('Unkown format on config "target"');}}},{key:'targetDomProperty',get:function get(){return this._targetDomProperty;},set:function set(val){this._targetDomProperty=val;}},{key:'targetNode',get:function get(){return this._targetEl[this._targetDomProperty].node;}},{key:'targetPos',get:function get(){this._targetPos;},set:function set(val){if(kijs.Array.contains(['tl','t','tr','l','c','r','bl','b','br'],val)){this._targetPos=val;}else{throw new Error('Unkown format on config "targetPos"');}}}]);return kijs_gui_SpinBox;}(kijs.gui.Container);kijs.gui.ViewPort=function(_kijs$gui$Container2){_inherits(kijs_gui_ViewPort,_kijs$gui$Container2);function kijs_gui_ViewPort(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_ViewPort);var _this8=_possibleConstructorReturn(this,(kijs_gui_ViewPort.__proto__||Object.getPrototypeOf(kijs_gui_ViewPort)).call(this,false));_this8._dom.node=document.body;_this8._dom.clsRemove('kijs-container');_this8._dom.clsAdd('kijs-viewport');config=Object.assign({},{},config);Object.assign(_this8._configMap,{});kijs.Dom.addEventListener('resize',window,_this8._onWindowResize,_this8);if(kijs.isObject(config)){_this8.applyConfig(config,true);}return _this8;}
_createClass(kijs_gui_ViewPort,[{key:'render',value:function render(preventAfterRender){_get(kijs_gui_ViewPort.prototype.__proto__||Object.getPrototypeOf(kijs_gui_ViewPort.prototype),'render',this).call(this,true);this._innerDom.render();this._dom.node.appendChild(this._innerDom.node);kijs.Array.each(this._elements,function(el){el.renderTo(this._innerDom.node);},this);if(!preventAfterRender){this.raiseEvent('afterRender');}
this._raiseAfterResizeEvent(true);}},{key:'_onWindowResize',value:function _onWindowResize(e){this._raiseAfterResizeEvent(true,e);}},{key:'destruct',value:function destruct(preventDestructEvent){if(!preventDestructEvent){this.raiseEvent('destruct');}
kijs.Dom.removeEventListener('resize',window,this);_get(kijs_gui_ViewPort.prototype.__proto__||Object.getPrototypeOf(kijs_gui_ViewPort.prototype),'destruct',this).call(this,true);}}]);return kijs_gui_ViewPort;}(kijs.gui.Container);kijs.gui.Icon=function(_kijs$gui$Element2){_inherits(kijs_gui_Icon,_kijs$gui$Element2);function kijs_gui_Icon(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_Icon);var _this9=_possibleConstructorReturn(this,(kijs_gui_Icon.__proto__||Object.getPrototypeOf(kijs_gui_Icon)).call(this,false));_this9._iconCls=null;_this9._dom.nodeTagName='span';_this9._dom.clsAdd('kijs-icon');config=Object.assign({},{},config);Object.assign(_this9._configMap,{disabled:{target:'disabled'},iconChar:{target:'html',context:_this9._dom},iconCls:{target:'iconCls'},iconColor:{target:'iconColor'}});if(kijs.isObject(config)){_this9.applyConfig(config,true);}return _this9;}
_createClass(kijs_gui_Icon,[{key:'disabled',get:function get(){return this._dom.clsHas('kijs-disabled');},set:function set(val){if(val){this._dom.clsAdd('kijs-disabled');}else{this._dom.clsRemove('kijs-disabled');}this._dom.disabled=!!val;}},{key:'iconChar',get:function get(){return this._dom.html;},set:function set(val){this._dom.html=val;}},{key:'iconCls',get:function get(){return this._iconCls;},set:function set(val){if(kijs.isEmpty(val)){val=null;}if(!kijs.isString&&!val){throw new Error('config "iconCls" is not a string');}if(this._iconCls){this._dom.clsRemove(this._iconCls);}this._iconCls=val;if(this._iconCls){this._dom.clsAdd(this._iconCls);}}},{key:'iconColor',get:function get(){return this._dom.style.color;},set:function set(val){this._dom.style.color=val;}},{key:'isEmpty',get:function get(){return kijs.isEmpty(this._dom.html)&&kijs.isEmpty(this._iconCls);}}]);return kijs_gui_Icon;}(kijs.gui.Element);kijs.gui.Button=function(_kijs$gui$Element3){_inherits(kijs_gui_Button,_kijs$gui$Element3);function kijs_gui_Button(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_Button);var _this10=_possibleConstructorReturn(this,(kijs_gui_Button.__proto__||Object.getPrototypeOf(kijs_gui_Button)).call(this,false));_this10._captionDom=new kijs.gui.Dom({cls:'kijs-caption',nodeTagName:'span'});_this10._iconEl=new kijs.gui.Icon({parent:_this10});_this10._dom.nodeTagName='button';_this10._dom.nodeAttributeSet('type','button');_this10._dom.clsAdd('kijs-button');config=Object.assign({},{},config);Object.assign(_this10._configMap,{caption:{target:'html',context:_this10._captionDom},captionCls:{fn:'function',target:_this10._captionDom.clsAdd,context:_this10._captionDom},captionHtmlDisplayType:{target:'htmlDisplayType',context:_this10._captionDom},captionStyle:{fn:'assign',target:'style',context:_this10._captionDom},icon:{target:'icon'},iconChar:{target:'iconChar',context:_this10._iconEl},iconCls:{target:'iconCls',context:_this10._iconEl},iconColor:{target:'iconColor',context:_this10._iconEl},isDefault:{target:'isDefault'},disabled:{prio:100,target:'disabled'}});if(kijs.isObject(config)){_this10.applyConfig(config,true);}return _this10;}
_createClass(kijs_gui_Button,[{key:'render',value:function render(preventAfterRender){_get(kijs_gui_Button.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Button.prototype),'render',this).call(this,true);if(!this._iconEl.isEmpty){this._iconEl.renderTo(this._dom.node);}else{this._iconEl.unRender();}
if(!this._captionDom.isEmpty){this._captionDom.renderTo(this._dom.node);}else{this._captionDom.unRender();}
if(!preventAfterRender){this.raiseEvent('afterRender');}}},{key:'unRender',value:function unRender(){this._iconEl.unRender();this._captionDom.unRender();_get(kijs_gui_Button.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Button.prototype),'unRender',this).call(this);}},{key:'destruct',value:function destruct(preventDestructEvent){if(!preventDestructEvent){this.raiseEvent('destruct');}
if(this._captionDom){this._captionDom.destruct();}if(this._iconEl){this._iconEl.destruct();}
this._captionDom=null;this._iconEl=null;_get(kijs_gui_Button.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Button.prototype),'destruct',this).call(this,true);}},{key:'caption',get:function get(){return this._captionDom.html;},set:function set(val){this._captionDom.html=val;if(this.isRendered){this.render();}}},{key:'captionDom',get:function get(){return this._captionDom;}},{key:'captionHtmlDisplayType',get:function get(){return this._captionDom.htmlDisplayType;},set:function set(val){this._captionDom.htmlDisplayType=val;}},{key:'disabled',get:function get(){return this._dom.disabled;},set:function set(val){if(val){this._dom.clsAdd('kijs-disabled');}else{this._dom.clsRemove('kijs-disabled');}this._dom.disabled=val;}},{key:'icon',get:function get(){return this._iconEl;},set:function set(val){if(kijs.isEmpty(val)){this._iconEl.iconChar=null;this._iconEl.iconCls=null;this._iconEl.iconColor=null;if(this.isRendered){this.render();}}else if(val instanceof kijs.gui.Icon){this._iconEl.destruct();this._iconEl=val;if(this.isRendered){this.render();}}else if(kijs.isObject(val)){this._iconEl.applyConfig(val);if(this.isRendered){this.render();}}else{throw new Error('config "icon" is not valid.');}}},{key:'iconChar',get:function get(){return this._iconEl.iconChar;},set:function set(val){this._iconEl.iconChar=val;if(this.isRendered){this.render();}}},{key:'iconCls',get:function get(){return this._iconEl.iconCls;},set:function set(val){this._iconEl.iconCls=val;if(this.isRendered){this.render();}}},{key:'iconColor',get:function get(){return this._iconEl.iconColor;},set:function set(val){this._iconEl.iconColor=val;if(this.isRendered){this.render();}}},{key:'isDefault',get:function get(){return this._dom.clsHas('kijs-default');},set:function set(val){if(val){this._dom.clsAdd('kijs-default');}else{this._dom.clsRemove('kijs-default');}}},{key:'isEmpty',get:function get(){return this._captionDom.isEmpty&&this._iconEl.isEmpty;}}]);return kijs_gui_Button;}(kijs.gui.Element);kijs.gui.ButtonGroup=function(_kijs$gui$Container3){_inherits(kijs_gui_ButtonGroup,_kijs$gui$Container3);function kijs_gui_ButtonGroup(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_ButtonGroup);var _this11=_possibleConstructorReturn(this,(kijs_gui_ButtonGroup.__proto__||Object.getPrototypeOf(kijs_gui_ButtonGroup)).call(this,false));_this11._captionDom=new kijs.gui.Dom({cls:'kijs-caption',nodeTagName:'span'});_this11._dom.clsRemove('kijs-container');_this11._dom.clsAdd('kijs-buttongroup');config=Object.assign({},{},config);Object.assign(_this11._configMap,{caption:{target:'html',context:_this11._captionDom},captionCls:{fn:'function',target:_this11._captionDom.clsAdd,context:_this11._captionDom},captionHtmlDisplayType:{target:'htmlDisplayType',context:_this11._captionDom},captionStyle:{fn:'assign',target:'style',context:_this11._captionDom}});if(kijs.isObject(config)){_this11.applyConfig(config,true);}return _this11;}
_createClass(kijs_gui_ButtonGroup,[{key:'render',value:function render(preventAfterRender){_get(kijs_gui_ButtonGroup.prototype.__proto__||Object.getPrototypeOf(kijs_gui_ButtonGroup.prototype),'render',this).call(this,true);if(!this._captionDom.isEmpty){this._captionDom.renderTo(this._dom.node,this._innerDom.node);}else{this._captionDom.unRender();}
if(!preventAfterRender){this.raiseEvent('afterRender');}}},{key:'unRender',value:function unRender(){this._captionDom.unRender();_get(kijs_gui_ButtonGroup.prototype.__proto__||Object.getPrototypeOf(kijs_gui_ButtonGroup.prototype),'unRender',this).call(this);}},{key:'destruct',value:function destruct(preventDestructEvent){if(!preventDestructEvent){this.raiseEvent('destruct');}
if(this._captionDom){this._captionDom.destruct();}
this._captionDom=null;_get(kijs_gui_ButtonGroup.prototype.__proto__||Object.getPrototypeOf(kijs_gui_ButtonGroup.prototype),'destruct',this).call(this,true);}},{key:'caption',get:function get(){return this._captionDom.html;},set:function set(val){this._captionDom.html=val;if(this.isRendered){this.render();}}},{key:'captionDom',get:function get(){return this._captionDom;}},{key:'captionHtmlDisplayType',get:function get(){return this._captionDom.htmlDisplayType;},set:function set(val){this._captionDom.htmlDisplayType=val;}},{key:'isEmpty',get:function get(){return this._captionDom.isEmpty&&kijs.isEmpty(this._elements);}}]);return kijs_gui_ButtonGroup;}(kijs.gui.Container);kijs.gui.HeaderBar=function(_kijs$gui$Container4){_inherits(kijs_gui_HeaderBar,_kijs$gui$Container4);function kijs_gui_HeaderBar(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_HeaderBar);var _this12=_possibleConstructorReturn(this,(kijs_gui_HeaderBar.__proto__||Object.getPrototypeOf(kijs_gui_HeaderBar)).call(this));_this12._captionDom=new kijs.gui.Dom({cls:'kijs-caption',nodeTagName:'span'});_this12._iconEl=new kijs.gui.Icon({parent:_this12});_this12._dom.clsRemove('kijs-container');_this12._dom.clsAdd('kijs-headerbar');config=Object.assign({},{},config);Object.assign(_this12._configMap,{caption:{target:'html',context:_this12._captionDom},captionCls:{fn:'function',target:_this12._captionDom.clsAdd,context:_this12._captionDom},captionHtmlDisplayType:{target:'htmlDisplayType',context:_this12._captionDom},captionStyle:{fn:'assign',target:'style',context:_this12._captionDom},icon:{target:'icon'},iconChar:{target:'iconChar',context:_this12._iconEl},iconCls:{target:'iconCls',context:_this12._iconEl},iconColor:{target:'iconColor',context:_this12._iconEl}});_this12._eventForwardsRemove('click',_this12._dom);_this12._eventForwardsAdd('click',_this12._captionDom);_this12._eventForwardsAdd('click',_this12._iconEl.dom);_this12._eventForwardsRemove('dblClick',_this12._dom);_this12._eventForwardsAdd('dblClick',_this12._captionDom);_this12._eventForwardsAdd('dblClick',_this12._iconEl.dom);_this12._eventForwardsRemove('mouseDown',_this12._dom);_this12._eventForwardsAdd('mouseDown',_this12._captionDom);_this12._eventForwardsAdd('mouseDown',_this12._iconEl.dom);if(kijs.isObject(config)){_this12.applyConfig(config,true);}return _this12;}
_createClass(kijs_gui_HeaderBar,[{key:'render',value:function render(preventAfterRender){_get(kijs_gui_HeaderBar.prototype.__proto__||Object.getPrototypeOf(kijs_gui_HeaderBar.prototype),'render',this).call(this,true);if(!this._iconEl.isEmpty){this._iconEl.renderTo(this._dom.node,this._innerDom.node);}else{this._iconEl.unRender();}
if(!this._captionDom.isEmpty){this._captionDom.renderTo(this._dom.node,this._innerDom.node);}else{this._captionDom.unRender();}
if(!preventAfterRender){this.raiseEvent('afterRender');}}},{key:'unRender',value:function unRender(){this._iconEl.unRender();this._captionDom.unRender();_get(kijs_gui_HeaderBar.prototype.__proto__||Object.getPrototypeOf(kijs_gui_HeaderBar.prototype),'unRender',this).call(this);}},{key:'destruct',value:function destruct(preventDestructEvent){if(!preventDestructEvent){this.raiseEvent('destruct');}
if(this._captionDom){this._captionDom.destruct();}if(this._iconEl){this._iconEl.destruct();}
this._captionDom=null;this._iconEl=null;_get(kijs_gui_HeaderBar.prototype.__proto__||Object.getPrototypeOf(kijs_gui_HeaderBar.prototype),'destruct',this).call(this,true);}},{key:'caption',get:function get(){return this._captionDom.html;},set:function set(val){this._captionDom.html=val;if(this.isRendered){this.render();}}},{key:'captionDom',get:function get(){return this._captionDom;}},{key:'captionHtmlDisplayType',get:function get(){return this._captionDom.htmlDisplayType;},set:function set(val){this._captionDom.htmlDisplayType=val;}},{key:'icon',get:function get(){return this._iconEl;},set:function set(val){if(kijs.isEmpty(val)){this._iconEl.iconChar=null;this._iconEl.iconCls=null;this._iconEl.iconColor=null;if(this.isRendered){this.render();}}else if(val instanceof kijs.gui.Icon){this._iconEl.destruct();this._iconEl=val;if(this.isRendered){this.render();}}else if(kijs.isObject(val)){this._iconEl.applyConfig(val);if(this.isRendered){this.render();}}else{throw new Error('config "icon" is not valid.');}}},{key:'iconChar',get:function get(){return this._iconEl.iconChar;},set:function set(val){this._iconEl.iconChar=val;if(this.isRendered){this.render();}}},{key:'iconCls',get:function get(){return this._iconEl.iconCls;},set:function set(val){this._iconEl.iconCls=val;if(this.isRendered){this.render();}}},{key:'iconColor',get:function get(){return this._iconEl.iconColor;},set:function set(val){this._iconEl.iconColor=val;if(this.isRendered){this.render();}}},{key:'isEmpty',get:function get(){return this._captionDom.isEmpty&&this._iconEl.isEmpty&&_get(kijs_gui_HeaderBar.prototype.__proto__||Object.getPrototypeOf(kijs_gui_HeaderBar.prototype),'isEmpty',this);}}]);return kijs_gui_HeaderBar;}(kijs.gui.Container);kijs.gui.FooterBar=function(_kijs$gui$Container5){_inherits(kijs_gui_FooterBar,_kijs$gui$Container5);function kijs_gui_FooterBar(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_FooterBar);var _this13=_possibleConstructorReturn(this,(kijs_gui_FooterBar.__proto__||Object.getPrototypeOf(kijs_gui_FooterBar)).call(this));_this13._captionDom=new kijs.gui.Dom({cls:'kijs-caption',nodeTagName:'span'});_this13._dom.clsRemove('kijs-container');_this13._dom.clsAdd('kijs-footerbar');config=Object.assign({},{},config);Object.assign(_this13._configMap,{caption:{target:'html',context:_this13._captionDom},captionCls:{fn:'function',target:_this13._captionDom.clsAdd,context:_this13._captionDom},captionHtmlDisplayType:{target:'htmlDisplayType',context:_this13._captionDom},captionStyle:{fn:'assign',target:'style',context:_this13._captionDom}});_this13._eventForwardsRemove('click',_this13._dom);_this13._eventForwardsAdd('click',_this13._captionDom);if(kijs.isObject(config)){_this13.applyConfig(config,true);}return _this13;}
_createClass(kijs_gui_FooterBar,[{key:'render',value:function render(preventAfterRender){_get(kijs_gui_FooterBar.prototype.__proto__||Object.getPrototypeOf(kijs_gui_FooterBar.prototype),'render',this).call(this,true);if(!this._captionDom.isEmpty){this._captionDom.render();this._dom.node.appendChild(this._captionDom.node);}else{this._captionDom.unRender();}
if(!preventAfterRender){this.raiseEvent('afterRender');}}},{key:'unRender',value:function unRender(){this._captionDom.unRender();_get(kijs_gui_FooterBar.prototype.__proto__||Object.getPrototypeOf(kijs_gui_FooterBar.prototype),'unRender',this).call(this);}},{key:'destruct',value:function destruct(preventDestructEvent){if(!preventDestructEvent){this.raiseEvent('destruct');}
if(this._captionDom){this._captionDom.destruct();}
this._captionDom=null;_get(kijs_gui_FooterBar.prototype.__proto__||Object.getPrototypeOf(kijs_gui_FooterBar.prototype),'destruct',this).call(this,true);}},{key:'caption',get:function get(){return this._captionDom.html;},set:function set(val){this._captionDom.html=val;if(this.isRendered){this.render();}}},{key:'captionDom',get:function get(){return this._captionDom;}},{key:'captionHtmlDisplayType',get:function get(){return this._captionDom.htmlDisplayType;},set:function set(val){this._captionDom.htmlDisplayType=val;}},{key:'isEmpty',get:function get(){return this._captionDom.isEmpty&&_get(kijs_gui_FooterBar.prototype.__proto__||Object.getPrototypeOf(kijs_gui_FooterBar.prototype),'isEmpty',this);}}]);return kijs_gui_FooterBar;}(kijs.gui.Container);kijs.gui.Resizer=function(_kijs$gui$Element4){_inherits(kijs_gui_Resizer,_kijs$gui$Element4);function kijs_gui_Resizer(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_Resizer);var _this14=_possibleConstructorReturn(this,(kijs_gui_Resizer.__proto__||Object.getPrototypeOf(kijs_gui_Resizer)).call(this));_this14._initialPos=null;_this14._targetEl=null;_this14._targetMaxHeight=null;_this14._targetMaxWidth=null;_this14._targetMinHeight=null;_this14._targetMinWidth=null;_this14._overlayDom=new kijs.gui.Dom({cls:'kijs-resizer-overlay'});_this14._dom.clsAdd('kijs-resizer');config=Object.assign({},{},config);Object.assign(_this14._configMap,{target:{target:'_targetEl'},targetMaxHeight:true,targetMaxWidth:true,targetMinHeight:true,targetMinWidth:true});_this14.on('mouseDown',_this14._onMouseDown,_this14);if(kijs.isObject(config)){_this14.applyConfig(config,true);}return _this14;}
_createClass(kijs_gui_Resizer,[{key:'_getMinMaxSize',value:function _getMinMaxSize(){var ret={wMin:null,wMax:null,hMin:null,hMax:null};var parentNode=void 0;var isWindow=!!this._targetEl.targetNode;if(isWindow){parentNode=this._targetEl.targetNode;}else{parentNode=this._targetEl.dom.node.parentNode;}
if(isWindow){ret.wMax=parentNode.clientWidth+parentNode.offsetLeft-this._targetEl.left;ret.hMax=parentNode.clientHeight+parentNode.offsetTop-this._targetEl.top;}else{switch(parentNode.style.overflowX){case'visible':case'scroll':case'auto':ret.wMax=null;break;case'hidden':default:ret.wMax=parentNode.clientWidth-this._targetEl.left;}
switch(parentNode.style.overflowY){case'visible':case'scroll':case'auto':ret.hMax=null;break;case'hidden':default:ret.hMax=parentNode.clientHeight-this._targetEl.top;}}
if(!kijs.isEmpty(this._targetMaxWidth)){if(ret.wMax===null||this._targetMaxWidth<ret.wMax){ret.wMax=this._targetMaxWidth;}}if(!kijs.isEmpty(this._targetMaxHeight)){if(ret.hMax===null||this._targetMaxHeight<ret.hMax){ret.hMax=this._targetMaxHeight;}}if(!kijs.isEmpty(this._targetMinWidth)){if(ret.wMin===null||this._targetMinWidth<ret.wMin){ret.wMin=this._targetMinWidth;}}if(!kijs.isEmpty(this._targetMinHeight)){if(ret.hMin===null||this._targetMinHeight<ret.hMin){ret.hMin=this._targetMinHeight;}}return ret;}},{key:'_onMouseDown',value:function _onMouseDown(e){this._initialPos={x:e.nodeEvent.clientX,y:e.nodeEvent.clientY,w:this._targetEl.width,h:this._targetEl.height};this._overlayDom.top=this._targetEl.top;this._overlayDom.left=this._targetEl.left;this._overlayDom.width=this._targetEl.width;this._overlayDom.height=this._targetEl.height;this._overlayDom.render();this._targetEl.dom.node.parentNode.appendChild(this._overlayDom.node);kijs.Dom.addEventListener('mousemove',document,this._onMouseMove,this);kijs.Dom.addEventListener('mouseup',document,this._onMouseUp,this);}},{key:'_onMouseMove',value:function _onMouseMove(e){var w=this._initialPos.w+(e.nodeEvent.clientX-this._initialPos.x);var h=this._initialPos.h+(e.nodeEvent.clientY-this._initialPos.y);var minMaxSize=this._getMinMaxSize();if(minMaxSize.wMin!==null&&w<minMaxSize.wMin){w=minMaxSize.wMin;}if(minMaxSize.hMin!==null&&h<minMaxSize.hMin){h=minMaxSize.hMin;}if(minMaxSize.wMax!==null&&w>minMaxSize.wMax){w=minMaxSize.wMax;}if(minMaxSize.hMax!==null&&h>minMaxSize.hMax){h=minMaxSize.hMax;}
this._overlayDom.width=w;this._overlayDom.height=h;}},{key:'_onMouseUp',value:function _onMouseUp(e){kijs.Dom.removeEventListener('mousemove',document,this);kijs.Dom.removeEventListener('mouseup',document,this);var w=this._initialPos.w+(e.nodeEvent.clientX-this._initialPos.x);var h=this._initialPos.h+(e.nodeEvent.clientY-this._initialPos.y);var minMaxSize=this._getMinMaxSize();if(minMaxSize.wMin!==null&&w<minMaxSize.wMin){w=minMaxSize.wMin;}if(minMaxSize.hMin!==null&&h<minMaxSize.hMin){h=minMaxSize.hMin;}if(minMaxSize.wMax!==null&&w>minMaxSize.wMax){w=minMaxSize.wMax;}if(minMaxSize.hMax!==null&&h>minMaxSize.hMax){h=minMaxSize.hMax;}
this._targetEl.width=w;this._targetEl.height=h;this._overlayDom.unRender();}},{key:'destruct',value:function destruct(preventDestructEvent){if(!preventDestructEvent){this.raiseEvent('destruct');}
if(this._overlayDom){this._overlayDom.destruct();}
this._initialPos=null;this._overlayDom=null;this._targetEl=null;_get(kijs_gui_Resizer.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Resizer.prototype),'destruct',this).call(this,true);}},{key:'target',get:function get(){return this._targetEl;}},{key:'targetMaxHeight',get:function get(){return this._targetMaxHeight;},set:function set(val){this._targetMaxHeight=val;}},{key:'targetMaxWidth',get:function get(){return this._targetMaxWidth;},set:function set(val){this._targetMaxWidth=val;}},{key:'targetMinHeight',get:function get(){return this._targetMinHeight;},set:function set(val){this._targetMinHeight=val;}},{key:'targetMinWidth',get:function get(){return this._targetMinWidth;},set:function set(val){this._targetMinWidth=val;}}]);return kijs_gui_Resizer;}(kijs.gui.Element);kijs.gui.Splitter=function(_kijs$gui$Element5){_inherits(kijs_gui_Splitter,_kijs$gui$Element5);function kijs_gui_Splitter(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_Splitter);var _this15=_possibleConstructorReturn(this,(kijs_gui_Splitter.__proto__||Object.getPrototypeOf(kijs_gui_Splitter)).call(this,false));_this15._overlayDom=new kijs.gui.Dom();_this15._targetPos=null;_this15._targetEl=null;config=Object.assign({},{targetPos:'left'},config);Object.assign(_this15._configMap,{target:{target:'target'},targetPos:{target:'targetPos'}});_this15.on('mouseDown',_this15._onMouseDown,_this15);if(kijs.isObject(config)){_this15.applyConfig(config,true);}return _this15;}
_createClass(kijs_gui_Splitter,[{key:'_detectTarget',value:function _detectTarget(){var targetEl=null;if(this._targetPos==='left'||this._targetPos==='top'){targetEl=this.previous;}else if(this._targetPos==='right'||this._targetPos==='bottom'){targetEl=this.next;}return targetEl;}},{key:'_updateOverlayPosition',value:function _updateOverlayPosition(xAbs,yAbs){var parentPos=kijs.Dom.getAbsolutePos(this._dom.node.parentNode);var newPos={x:xAbs-parentPos.x,y:yAbs-parentPos.x};if(this.direction==='horizontal'){this._overlayDom.left=newPos.x;}else{this._overlayDom.top=newPos.y;}}},{key:'_onMouseDown',value:function _onMouseDown(e){if(this.direction==='horizontal'){this._initialPos=e.nodeEvent.clientX;}else{this._initialPos=e.nodeEvent.clientY;}
this._updateOverlayPosition(e.nodeEvent.clientX,e.nodeEvent.clientY);this._overlayDom.render();this._dom.node.parentNode.appendChild(this._overlayDom.node);kijs.Dom.addEventListener('mousemove',document,this._onMouseMove,this);kijs.Dom.addEventListener('mouseup',document,this._onMouseUp,this);}},{key:'_onMouseMove',value:function _onMouseMove(e){this._updateOverlayPosition(e.nodeEvent.clientX,e.nodeEvent.clientY);}},{key:'_onMouseUp',value:function _onMouseUp(e){kijs.Dom.removeEventListener('mousemove',document,this);kijs.Dom.removeEventListener('mouseup',document,this);this._overlayDom.unRender();var offset=void 0;if(this.direction==='horizontal'){offset=e.nodeEvent.clientX-this._initialPos;}else{offset=e.nodeEvent.clientY-this._initialPos;}
switch(this._targetPos){case'top':this.target.height=this.target.height+offset;break;case'right':this.target.width=this.target.width-offset;break;case'bottom':this.target.height=this.target.height-offset;break;case'left':this.target.width=this.target.width+offset;break;}}},{key:'destruct',value:function destruct(preventDestructEvent){if(!preventDestructEvent){this.raiseEvent('destruct');}
if(this._overlayDom){this._overlayDom.destruct();}
this._overlayDom=null;this._targetEl=null;_get(kijs_gui_Splitter.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Splitter.prototype),'destruct',this).call(this,true);}},{key:'direction',get:function get(){if(this._targetPos==='left'||this._targetPos==='right'){return'horizontal';}else if(this._targetPos==='top'||this._targetPos==='bottom'){return'vertical';}else{throw new Error('unknown targetPos');}}},{key:'target',get:function get(){if(!this._targetEl){this.target=this._detectTarget();if(!this._targetEl){throw new Error('config missing "target"');}}return this._targetEl;},set:function set(val){if(!val instanceof kijs.gui.Element){throw new Error('Unkown format on config "target"');}this._targetEl=val;}},{key:'targetPos',get:function get(){return this._targetPos;},set:function set(val){if(!kijs.Array.contains(['top','right','left','bottom'],val)){throw new Error('unknown targetPos');}this._targetPos=val;this._dom.clsRemove(['kijs-splitter-horizontal','kijs-splitter-vertical']);this._dom.clsAdd('kijs-splitter-'+this.direction);this._overlayDom.clsRemove(['kijs-splitter-overlay-horizontal','kijs-splitter-overlay-vertical']);this._overlayDom.clsAdd('kijs-splitter-overlay-'+this.direction);}}]);return kijs_gui_Splitter;}(kijs.gui.Element);kijs.gui.Panel=function(_kijs$gui$Container6){_inherits(kijs_gui_Panel,_kijs$gui$Container6);function kijs_gui_Panel(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_Panel);var _this16=_possibleConstructorReturn(this,(kijs_gui_Panel.__proto__||Object.getPrototypeOf(kijs_gui_Panel)).call(this));_this16._headerBarEl=new kijs.gui.HeaderBar({parent:_this16,on:{click:_this16._onHeaderBarClick,dblClick:_this16._onHeaderBarDblClick,context:_this16}});_this16._headerEl=new kijs.gui.Container({cls:'kijs-header',parent:_this16});_this16._footerEl=new kijs.gui.Container({cls:'kijs-footer',parent:_this16});_this16._footerBarEl=new kijs.gui.FooterBar({parent:_this16});_this16._collapseHeight=null;_this16._collapseWidth=null;_this16._domPos=null;_this16._closeButtonEl=null;_this16._collapseButtonEl=null;_this16._maximizeButtonEl=null;_this16._collapsible=false;_this16._resizerEl=null;_this16._dom.clsRemove('kijs-container');_this16._dom.clsAdd('kijs-panel');config=Object.assign({},{collapseHeight:50,collapseWidth:50},config);Object.assign(_this16._configMap,{caption:{target:'caption',context:_this16._headerBarEl},headerBarElements:{fn:'function',target:_this16._headerBarEl.add,context:_this16._headerBarEl},iconChar:{target:'iconChar',context:_this16._headerBarEl},iconCls:{target:'iconCls',context:_this16._headerBarEl},iconColor:{target:'iconColor',context:_this16._headerBarEl},headerCls:{fn:'function',target:_this16._headerEl.dom.clsAdd,context:_this16._headerEl.dom},headerElements:{fn:'function',target:_this16._headerEl.add,context:_this16._headerEl},headerStyle:{fn:'assign',target:'style',context:_this16._headerEl.dom},footerCls:{fn:'function',target:_this16._footerEl.dom.clsAdd,context:_this16._footerEl.dom},footerElements:{fn:'function',target:_this16._footerEl.add,context:_this16._footerEl},footerStyle:{fn:'assign',target:'style',context:_this16._footerEl.dom},footerCaption:{target:'caption',context:_this16._footerBarEl},footerBarElements:{fn:'function',target:_this16._footerBarEl.add,context:_this16._footerBarEl},resizable:{target:'resizable'},shadow:{target:'shadow'},collapseHeight:true,collapseWidth:true,collapsePos:{prio:1001,target:'collapsePos'},collapsible:{prio:1002,target:'collapsible'},collapseButton:{prio:1003,target:'collapseButton'},collapsed:{prio:1004,target:'collapsed'},maximizable:{prio:1010,target:'maximizable'},maximizeButton:{prio:1011,target:'maximizeButton'},maximized:{prio:1012,target:'maximized'},closable:{prio:1013,target:'closable'},closeButton:{prio:1014,target:'closeButton'}});_this16.on('enterPress',_this16._onEnterPress,_this16);_this16.on('escPress',_this16._onEscPress,_this16);if(kijs.isObject(config)){_this16.applyConfig(config,true);}return _this16;}
_createClass(kijs_gui_Panel,[{key:'close',value:function close(){if(this._parentEl&&this._parentEl instanceof kijs.gui.Container&&this._parentEl.hasChild(this)){this._parentEl.remove(this);}else{this.destruct();}}},{key:'collapse',value:function collapse(direction){var prevAfterRes=this._preventAfterResize;this._preventAfterResize=true;if(this.maximized){this.restore();}if(direction){this._collapsible=direction;}if(!this._collapsible){this._collapsible='top';}this._dom.clsRemove(['kijs-collapse-top','kijs-collapse-right','kijs-collapse-bottom','kijs-collapse-left']);switch(this._collapsible){case'top':this._dom.clsAdd('kijs-collapse-top');break;case'right':this._dom.clsAdd('kijs-collapse-right');break;case'bottom':this._dom.clsAdd('kijs-collapse-bottom');break;case'left':this._dom.clsAdd('kijs-collapse-left');break;}
if(this._collapseButtonEl){this._collapseButtonEl.iconChar=this._getCollapseIconChar();}
this._preventAfterResize=prevAfterRes;this._raiseAfterResizeEvent(true);}},{key:'expand',value:function expand(size){var prevAfterRes=this._preventAfterResize;this._preventAfterResize=true;this._dom.clsRemove(['kijs-collapse-top','kijs-collapse-right','kijs-collapse-bottom','kijs-collapse-left']);if(this._collapseButtonEl){this._collapseButtonEl.iconChar=this._getCollapseIconChar();}
if(!kijs.isEmpty(size)){switch(this._collapsible){case'top':case'bottom':if(size>this._collapseHeight){this.height=size;}break;case'right':case'left':if(size>this._collapseWidth){this.width=size;}break;}}
this._preventAfterResize=prevAfterRes;this._raiseAfterResizeEvent(true);}},{key:'focus',value:function focus(){var alsoSetIfNoTabIndex=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(alsoSetIfNoTabIndex){return _get(kijs_gui_Panel.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Panel.prototype),'focus',this).call(this,alsoSetIfNoTabIndex);}else{var node=this._innerDom.focus(false);if(!node&&!this._footerEl.isEmpty&&this._footerEl.isRendered){node=this._footerEl.focus(alsoSetIfNoTabIndex);}
if(!node){node=_get(kijs_gui_Panel.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Panel.prototype),'focus',this).call(this,alsoSetIfNoTabIndex);}return node;}
if(alsoSetIfNoTabIndex){this._dom.node.focus();}else{var _node=kijs.Dom.getFirstFocusableNode(this._node);if(_node){_node.focus();}}}},{key:'maximize',value:function maximize(){if(this.maximized){return;}
var prevAfterRes=this._preventAfterResize;this._preventAfterResize=true;if(this.collapsed){this.expand();}if(this.isRendered){this._domPos={parent:this._dom.node.parentNode,nextSibling:this._dom.node.nextSibling};document.body.appendChild(this._dom.node);}this._dom.clsAdd('kijs-maximize');if(this._maximizeButtonEl){this._maximizeButtonEl.iconChar=this._getMaximizeIconChar();}
this._preventAfterResize=prevAfterRes;this._raiseAfterResizeEvent(true);}},{key:'render',value:function render(preventAfterRender){_get(kijs_gui_Panel.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Panel.prototype),'render',this).call(this,true);this._dom.node.tabIndex=-1;if(!this._headerBarEl.isEmpty){this._headerBarEl.renderTo(this._dom.node,this._innerDom.node);}else{this._headerBarEl.unRender();}
if(!this._headerEl.isEmpty){this._headerEl.renderTo(this._dom.node,this._innerDom.node);}else{this._headerEl.unRender();}
if(!this._footerEl.isEmpty){this._footerEl.renderTo(this._dom.node);}else{this._footerEl.unRender();}
if(!this._footerBarEl.isEmpty){this._footerBarEl.renderTo(this._dom.node);}else{this._footerBarEl.unRender();}
if(this._resizerEl){this._resizerEl.renderTo(this._dom.node);}
if(!preventAfterRender){this.raiseEvent('afterRender');}}},{key:'renderTo',value:function renderTo(targetNode,insertBefore){if(this.maximized&&kijs.isEmpty(this._domPos)){this._domPos={parent:targetNode,nextSibling:insertBefore};targetNode=document.body;insertBefore=null;}_get(kijs_gui_Panel.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Panel.prototype),'renderTo',this).call(this,targetNode,insertBefore);}},{key:'restore',value:function restore(){if(!this.maximized){return;}
var prevAfterRes=this._preventAfterResize;this._preventAfterResize=true;if(this._domPos.nextSibling){this._domPos.parent.insertBefore(this._dom.node,this._domPos.nextSibling);}else{this._domPos.parent.appendChild(this._dom.node);}this._dom.clsRemove('kijs-maximize');if(this._maximizeButtonEl){this._maximizeButtonEl.iconChar=this._getMaximizeIconChar();}
this._preventAfterResize=prevAfterRes;this._raiseAfterResizeEvent(true);}},{key:'unRender',value:function unRender(){this._headerBarEl.unRender();this._headerEl.unRender();this._footerEl.unRender();this._footerBarEl.unRender();this._resizerEl.unRender();_get(kijs_gui_Panel.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Panel.prototype),'unRender',this).call(this);}},{key:'_getMaximizeIconChar',value:function _getMaximizeIconChar(){var char='';if(this.maximized){char='&#xf2d2';}else{char='&#xf2d0';}return char;}},{key:'_getCollapseIconChar',value:function _getCollapseIconChar(){var char='';if(this.collapsed){switch(this._collapsible){case'top':char='&#xf0d7';break;case'right':char='&#xf0d9';break;case'bottom':char='&#xf0d8';break;case'left':char='&#xf0da';break;}}else{switch(this._collapsible){case'top':char='&#xf0d8';break;case'right':char='&#xf0da';break;case'bottom':char='&#xf0d7';break;case'left':char='&#xf0d9';break;}}return char;}},{key:'_onCloseClick',value:function _onCloseClick(e){this.close();}},{key:'_onCollapseClick',value:function _onCollapseClick(e){if(this.collapsed){this.expand();}else{this.collapse();}}},{key:'_onEscPress',value:function _onEscPress(e){if(this.closable){this.close();}}},{key:'_onEnterPress',value:function _onEnterPress(e){if(this._footerEl){kijs.Array.each(this._footerEl.elements,function(el){if(el instanceof kijs.gui.Button&&el.dom&&el.isDefault){el.raiseEvent('click');return;}},this);}}},{key:'_onHeaderBarClick',value:function _onHeaderBarClick(e){if(this.collapsible&&!this.maximized&&!this.draggable){if(this.collapsed){this.expand();}else{this.collapse();}}}},{key:'_onHeaderBarDblClick',value:function _onHeaderBarDblClick(e){if(this.maximizable&&this.draggable){if(this.maximized){this.restore();}else{this.maximize();}}else if(this.maximizable&&this.maximized){this.restore();}}},{key:'_onMaximizeClick',value:function _onMaximizeClick(e){if(this.maximized){this.restore();}else{this.maximize();}}},{key:'destruct',value:function destruct(preventDestructEvent){if(!preventDestructEvent){this.raiseEvent('destruct');}
if(this._headerBarEl){this._headerBarEl.destruct();}if(this._headerEl){this._headerEl.destruct();}if(this._footerEl){this._footerEl.destruct();}if(this._footerBarEl){this._footerBarEl.destruct();}if(this._resizerEl){this._resizerEl.destruct();}
this._domPos=null;this._headerBarEl=null;this._headerEl=null;this._footerEl=null;this._footerBarEl=null;this._closeButtonEl=null;this._collapseButtonEl=null;this._maximizeButtonEl=null;this._resizerEl=null;_get(kijs_gui_Panel.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Panel.prototype),'destruct',this).call(this,true);}},{key:'closable',get:function get(){return!!this._closeButtonEl;},set:function set(val){if(val){if(!this._closeButtonEl){this.closeButton={iconChar:'&#xf00d'};}}else{if(this._closeButtonEl){this.closeButton=null;}}}},{key:'closeButton',get:function get(){return this._closeButtonEl;},set:function set(val){if(kijs.isEmpty(val)){this._headerBarEl.remove(this._closeButtonEl);this._closeButtonEl=null;}else if(val instanceof kijs.gui.Button){if(this._closeButtonEl){this._headerBarEl.remove(this._closeButtonEl);}this._closeButtonEl=val;this._closeButtonEl.on('click',this._onCloseClick,this);this._headerBarEl.add(this._closeButtonEl);}else if(kijs.isObject(val)){if(this._closeButtonEl){this._closeButtonEl.applyConfig(val);}else{this._closeButtonEl=new kijs.gui.Button(val);this._closeButtonEl.on('click',this._onCloseClick,this);this._headerBarEl.add(this._closeButtonEl);}}else{throw new Error('Unkown format on config "closeButton"');}if(this.isRendered){this.render();}}},{key:'collapsible',get:function get(){if(this._collapseButtonEl){return this._collapsible;}else{return false;}},set:function set(val){var validePos=['top','right','bottom','left'];if(kijs.isEmpty(val)||val===false){val=false;this._collapsible=false;}else{if(kijs.Array.contains(validePos,val)){this._collapsible=val;}else{throw new Error('Unkown pos on config "collapsible"');}}if(val){if(!this._collapseButtonEl){this.collapseButton={iconChar:this._getCollapseIconChar()};}}else{if(this._collapseButtonEl){this.collapseButton=null;}}}},{key:'collapseButton',get:function get(){return this._collapseButtonEl;},set:function set(val){if(kijs.isEmpty(val)){this._headerBarEl.remove(this._collapseButtonEl);this._collapseButtonEl=null;}else if(val instanceof kijs.gui.Button){if(this._collapseButtonEl){this._headerBarEl.remove(this._collapseButtonEl);}this._collapseButtonEl=val;this._collapseButtonEl.on('click',this._onCollapseClick,this);this._headerBarEl.add(this._collapseButtonEl);}else if(kijs.isObject(val)){if(this._collapseButtonEl){this._collapseButtonEl.applyConfig(val);}else{this._collapseButtonEl=new kijs.gui.Button(val);this._collapseButtonEl.on('click',this._onCollapseClick,this);this._headerBarEl.add(this._collapseButtonEl);}}else{throw new Error('Unkown format on config "collapseButton"');}if(this.isRendered){this.render();}}},{key:'collapsed',get:function get(){return this._dom.clsHas('kijs-collapse-top')||this._dom.clsHas('kijs-collapse-right')||this._dom.clsHas('kijs-collapse-bottom')||this._dom.clsHas('kijs-collapse-left');},set:function set(val){if(val){this.collapse();}else{this.expand();}}},{key:'collapseHeight',get:function get(){return this._collapseHeight;},set:function set(val){this._collapseHeight=val;}},{key:'draggable',get:function get(){return false;}},{key:'footer',get:function get(){return this._footerEl;}},{key:'footerBar',get:function get(){return this._footerBarEl;}},{key:'header',get:function get(){return this._headerEl;}},{key:'headerBar',get:function get(){return this._headerBarEl;}},{key:'height',get:function get(){return _get(kijs_gui_Panel.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Panel.prototype),'height',this);},set:function set(val){var doFn=false;if(kijs.Array.contains(['top','bottom'],this.collapsible)&&kijs.isNumber(this._collapseHeight)){if(val<=this._collapseHeight){doFn='collapse';}else if(this.collapsed){doFn='expand';}}if(doFn==='collapse'){if(!this.collapsed){this.collapse();}}else if(doFn==='expand'){this.expand(val);}else{_set(kijs_gui_Panel.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Panel.prototype),'height',val,this);}}},{key:'maximizable',get:function get(){return!!this._closeButtonEl;},set:function set(val){if(val){if(!this._maximizeButtonEl){this.maximizeButton=new kijs.gui.Button({iconChar:this._getMaximizeIconChar()});}}else{if(this._maximizeButtonEl){this.maximizeButton=null;}}}},{key:'maximizeButton',get:function get(){return this._maximizeButtonEl;},set:function set(val){if(kijs.isEmpty(val)){this._headerBarEl.remove(this._maximizeButtonEl);this._maximizeButtonEl=null;}else if(val instanceof kijs.gui.Button){if(this._maximizeButtonEl){this._headerBarEl.remove(this._maximizeButtonEl);}this._maximizeButtonEl=val;this._maximizeButtonEl.on('click',this._onMaximizeClick,this);this._headerBarEl.add(this._maximizeButtonEl);}else if(kijs.isObject(val)){if(this._maximizeButtonEl){this._maximizeButtonEl.applyConfig(val);}else{this._maximizeButtonEl=new kijs.gui.Button(val);this._maximizeButtonEl.on('click',this._onMaximizeClick,this);this._headerBarEl.add(this._maximizeButtonEl);}}else{throw new Error('Unkown format on config "maximizeButton"');}if(this.isRendered){this.render();}}},{key:'maximized',get:function get(){return this._dom.clsHas('kijs-maximize');},set:function set(val){if(val){this.maximize();}else{this.restore();}}},{key:'resizable',get:function get(){return!!this._resizerEl;},set:function set(val){if(!!val!==!!this._resizerEl){if(this._resizerEl){this._resizerEl.destruct();this._resizerEl=null;}else{this._resizerEl=new kijs.gui.Resizer({target:this});if(this._dom.node){this._resizerEl.renderTo(this._dom.node);}}}}},{key:'shadow',get:function get(){this._dom.clsHas('kijs-shadow');},set:function set(val){if(val){this._dom.clsAdd('kijs-shadow');}else{this._dom.clsRemove('kijs-shadow');}}},{key:'width',get:function get(){return _get(kijs_gui_Panel.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Panel.prototype),'width',this);},set:function set(val){var doFn=false;if(kijs.Array.contains(['left','right'],this.collapsible)&&kijs.isNumber(this._collapseWidth)){if(val<=this._collapseWidth){doFn='collapse';}else if(this.collapsed){doFn='expand';}}if(doFn==='collapse'){if(!this.collapsed){this.collapse();}}else if(doFn==='expand'){this.expand(val);}else{_set(kijs_gui_Panel.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Panel.prototype),'width',val,this);}}}]);return kijs_gui_Panel;}(kijs.gui.Container);kijs.gui.Mask=function(_kijs$gui$Element6){_inherits(kijs_gui_Mask,_kijs$gui$Element6);function kijs_gui_Mask(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_Mask);var _this17=_possibleConstructorReturn(this,(kijs_gui_Mask.__proto__||Object.getPrototypeOf(kijs_gui_Mask)).call(this,false));_this17._iconEl=new kijs.gui.Icon({parent:_this17});_this17._targetX=null;_this17._targetDomProperty='dom';_this17._dom.clsAdd('kijs-mask');config=Object.assign({},{target:document.body},config);Object.assign(_this17._configMap,{displayWaitIcon:{target:'displayWaitIcon'},icon:{target:'icon'},iconChar:{target:'iconChar',context:_this17._iconEl},iconCls:{target:'iconCls',context:_this17._iconEl},iconColor:{target:'iconColor',context:_this17._iconEl},target:{target:'target'},targetDomProperty:true});if(kijs.isObject(config)){_this17.applyConfig(config,true);}return _this17;}
_createClass(kijs_gui_Mask,[{key:'render',value:function render(preventAfterRender){_get(kijs_gui_Mask.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Mask.prototype),'render',this).call(this,true);this._updateMaskPosition();if(!this._iconEl.isEmpty){this._iconEl.renderTo(this._dom.node);}else{this._iconEl.unRender();}
if(!preventAfterRender){this.raiseEvent('afterRender');}}},{key:'unRender',value:function unRender(){this._iconEl.unRender();_get(kijs_gui_Mask.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Mask.prototype),'unRender',this).call(this);}},{key:'show',value:function show(){this.renderTo(this.parentNode);}},{key:'_updateMaskPosition',value:function _updateMaskPosition(){if(this._targetX instanceof kijs.gui.Element){this.top=this._targetX[this._targetDomProperty].top;this.left=this._targetX[this._targetDomProperty].left;this.height=this._targetX[this._targetDomProperty].height;this.width=this._targetX[this._targetDomProperty].width;}}},{key:'_onTargetElAfterResize',value:function _onTargetElAfterResize(e){this._updateMaskPosition();}},{key:'_onTargetElChangeVisibility',value:function _onTargetElChangeVisibility(e){this._updateMaskPosition();this.visible=e.visible;}},{key:'_onTargetElDestruct',value:function _onTargetElDestruct(e){this.destruct();}},{key:'destruct',value:function destruct(preventDestructEvent){if(!preventDestructEvent){this.raiseEvent('destruct');}
if(this._targetX instanceof kijs.gui.Element){this._targetX.off(null,null,this);}
if(this._iconEl){this._iconEl.destruct();}
this._iconEl=null;this._targetX=null;_get(kijs_gui_Mask.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Mask.prototype),'destruct',this).call(this,true);}},{key:'displayWaitIcon',get:function get(){return this._iconEl.iconChar==='&#xf110;';},set:function set(val){if(val){this.iconChar='&#xf110;';this._iconEl.dom.clsAdd('kijs-pulse');}else{this.iconChar=null;this._iconEl.dom.clsRemove('kijs-pulse');}}},{key:'icon',get:function get(){return this._iconEl;},set:function set(val){if(kijs.isEmpty(val)){this._iconEl.iconChar=null;this._iconEl.iconCls=null;this._iconEl.iconColor=null;if(this.isRendered){this.render();}}else if(val instanceof kijs.gui.Icon){this._iconEl.destruct();this._iconEl=val;if(this.isRendered){this.render();}}else if(kijs.isObject(val)){this._iconEl.applyConfig(val);if(this.isRendered){this.render();}}else{throw new Error('config "icon" is not valid.');}}},{key:'iconChar',get:function get(){return this._iconEl.iconChar;},set:function set(val){this._iconEl.iconChar=val;if(this.isRendered){this.render();}}},{key:'iconCls',get:function get(){return this._iconEl.iconCls;},set:function set(val){this._iconEl.iconCls=val;if(this.isRendered){this.render();}}},{key:'iconColor',get:function get(){return this._iconEl.iconColor;},set:function set(val){this._iconEl.iconColor=val;if(this.isRendered){this.render();}}},{key:'isEmpty',get:function get(){return this._iconEl.isEmpty;}},{key:'parentNode',get:function get(){if(this._targetX instanceof kijs.gui.Element){return this._targetX[this._targetDomProperty].node.parentNode;}else{return this._targetX;}}},{key:'target',get:function get(){return this._targetX;},set:function set(val){if(!kijs.isEmpty(this._targetX)){if(this._targetX instanceof kijs.gui.Element){this._targetX.off('afterResize',this._onTargetElAfterResize,this);this._targetX.off('changeVisibility',this._onTargetElChangeVisibility,this);this._targetX.off('destruct',this._onTargetElDestruct,this);}}
if(val instanceof kijs.gui.Element){this._targetX=val;this._targetX.on('afterResize',this._onTargetElAfterResize,this);this._targetX.on('changeVisibility',this._onTargetElChangeVisibility,this);this._targetX.on('destruct',this._onTargetElDestruct,this);}else if(val===document.body||val===null){this._targetX=document.body;}else{throw new Error('Unkown format on config "target"');}}},{key:'targetDomProperty',get:function get(){return this._targetDomProperty;},set:function set(val){this._targetDomProperty=val;}},{key:'targetNode',get:function get(){if(this._targetX instanceof kijs.gui.Element){return this._targetX[this._targetDomProperty].node;}else{return this._targetX;}}}]);return kijs_gui_Mask;}(kijs.gui.Element);kijs.gui.LayerManager=function(){function kijs_gui_LayerManager(){_classCallCheck(this,kijs_gui_LayerManager);if(!kijs_gui_LayerManager._singletonInstance){kijs_gui_LayerManager._singletonInstance=this;this._parents=new Map();this._startZIndex=10000;}return kijs_gui_LayerManager._singletonInstance;}
_createClass(kijs_gui_LayerManager,[{key:'getActive',value:function getActive(parentNode){var parentProp=this._parents.get(parentNode);if(parentProp&&parentProp.activeEl){return parentProp.activeEl;}else{return null;}}},{key:'setActive',value:function setActive(el){if(el===this.getActive(el.parentNode)){return false;}
this.removeElement(el,true);this.addElement(el);this._assignZIndexes(el.parentNode);var parentProp=this._parents.get(el.parentNode);parentProp.activeEl=this._getTopVisibleElement(el.parentNode);if(parentProp.activeEl){parentProp.activeEl.focus();}return true;}},{key:'addElement',value:function addElement(el){var parentProp=this._parents.get(el.parentNode);if(!parentProp){parentProp={activeEl:null,stack:[]};this._parents.set(el.parentNode,parentProp);}
if(kijs.Array.contains(parentProp.stack,el)){throw new Error('element is duplicated in layermanager');}parentProp.stack.push(el);el.on('destruct',this._onElementDestruct,this);el.on('changeVisibility',this._onElementChangeVisibility,this);}},{key:'removeElement',value:function removeElement(el,preventReorder){var changed=false;var parentProp=this._parents.get(el.parentNode);if(kijs.isEmpty(parentProp)||kijs.isEmpty(parentProp.stack)){return changed;}var newElements=[];for(var i=0;i<parentProp.stack.length;i++){if(parentProp.stack[i]===el){changed=true;}else{newElements.push(parentProp.stack[i]);}}parentProp.stack=newElements;if(parentProp.stack.length===0){this._parents.delete(el.parentNode);parentProp=null;}
el.off('destruct',this._onElementDestruct,this);el.off('changeVisibility',this._onElementChangeVisibility,this);if(parentProp&&changed&&!preventReorder){this._assignZIndexes(el.parentNode);parentProp.activeEl=this._getTopVisibleElement(el.parentNode);if(parentProp.activeEl){parentProp.activeEl.focus();}}return changed;}},{key:'_assignZIndexes',value:function _assignZIndexes(parentNode){var zIndex=this._startZIndex;var parentProp=this._parents.get(parentNode);if(kijs.isEmpty(parentProp)||kijs.isEmpty(parentProp.stack)){return;}kijs.Array.each(parentProp.stack,function(el){el.style.zIndex=zIndex;zIndex+=10;},this);}},{key:'_getTopVisibleElement',value:function _getTopVisibleElement(parentNode){var parentProp=this._parents.get(parentNode);if(kijs.isEmpty(parentProp)||kijs.isEmpty(parentProp.stack)){return;}for(var i=parentProp.stack.length-1;i>=0;i--){if(parentProp.stack[i].visible){return parentProp.stack[i];}}return null;}},{key:'_onElementDestruct',value:function _onElementDestruct(e){this.removeElement(e.element);}},{key:'_onElementChangeVisibility',value:function _onElementChangeVisibility(e){var el=e.element;var parentProp=this._parents.get(el.parentNode);if(kijs.isEmpty(parentProp)||kijs.isEmpty(parentProp.stack)){return;}
parentProp.activeEl=this._getTopVisibleElement(el.parentNode);if(parentProp.activeEl){parentProp.activeEl.focus();}}},{key:'destruct',value:function destruct(){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=this._parents.values()[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var parentProp=_step.value;kijs.Array.each(parentProp.stack,function(el){el.off(null,null,this);},this);}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}this._parents.clear();this._parents=null;}}]);return kijs_gui_LayerManager;}();kijs.gui.Window=function(_kijs$gui$Panel){_inherits(kijs_gui_Window,_kijs$gui$Panel);function kijs_gui_Window(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_Window);var _this18=_possibleConstructorReturn(this,(kijs_gui_Window.__proto__||Object.getPrototypeOf(kijs_gui_Window)).call(this));_this18._resizeDeferHandle=null;_this18._dragInitialPos=null;_this18._modalMaskEl=null;_this18._draggable=false;_this18._focusDelay=300;_this18._resizeDelay=300;_this18._targetX=null;_this18._targetDomProperty='dom';_this18._dom.clsAdd('kijs-window');config=Object.assign({},{draggable:true,target:document.body,closable:true,maximizable:true,resizable:true,shadow:true},config);Object.assign(_this18._configMap,{draggable:{target:'draggable'},focusDelay:true,modal:{target:'modal'},resizeDelay:true,target:{target:'target'},targetDomProperty:true});_this18.on('mouseDown',_this18._onMouseDown,_this18);if(kijs.isObject(config)){_this18.applyConfig(config,true);}return _this18;}
_createClass(kijs_gui_Window,[{key:'center',value:function center(){var preventEvents=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var targetNode=this.targetNode;var prevAfterRes=this._preventAfterResize;this._preventAfterResize=true;this.left=targetNode.offsetLeft+(targetNode.offsetWidth-this.width)/2;this.top=targetNode.offsetTop+(targetNode.offsetHeight-this.height)/2;this._preventAfterResize=prevAfterRes;if(!preventEvents&&this._hasSizeChanged()){this._raiseAfterResizeEvent(true);}}},{key:'restore',value:function restore(){if(!this.maximized){return;}
var prevAfterRes=this._preventAfterResize;this._preventAfterResize=true;_get(kijs_gui_Window.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Window.prototype),'restore',this).call(this);if(!this._dom.hasLeft||!this._dom.hasTop){this.center(true);}
this._adjustPositionToTarget(true);this._preventAfterResize=prevAfterRes;this._raiseAfterResizeEvent(true);}},{key:'show',value:function show(){if(this._modalMaskEl){this._modalMaskEl.renderTo(this.parentNode);new kijs.gui.LayerManager().setActive(this._modalMaskEl);}
this.renderTo(this.parentNode);if(!this.maximized){if(!this._dom.hasLeft||!this._dom.hasTop){this.center(true);}else{this._adjustPositionToTarget(true);}}
this._raiseAfterResizeEvent(true);this.toFront();this.focus();}},{key:'toFront',value:function toFront(){if(this._dom.node&&this._dom.node.parentNode&&(!this.resizer||this.resizer&&!this.resizer.domOverlay)){new kijs.gui.LayerManager().setActive(this);}}},{key:'_adjustPositionToTarget',value:function _adjustPositionToTarget(){var preventEvents=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var targetNode=this.targetNode;var prevAfterRes=this._preventAfterResize;this._preventAfterResize=true;var left=this.left;var top=this.top;var width=this.width;var height=this.height;if(width>targetNode.offsetWidth){width=targetNode.offsetWidth;}if(height>targetNode.offsetHeight){height=targetNode.offsetHeight;}this.width=width;this.height=height;if(left+width>targetNode.offsetLeft+targetNode.offsetWidth){left=targetNode.offsetLeft+(targetNode.offsetWidth-width);}if(left<0){left=0;}if(top+height>targetNode.offsetTop+targetNode.offsetHeight){top=targetNode.offsetTop+(targetNode.offsetHeight-height);}if(top<0){top=0;}this.left=left;this.top=top;this._preventAfterResize=prevAfterRes;if(!preventEvents&&this._hasSizeChanged()){this._raiseAfterResizeEvent(true);}}},{key:'_onHeaderBarMouseDown',value:function _onHeaderBarMouseDown(e){this.toFront();if(this.maximized){return;}this._dragInitialPos={mouseX:e.nodeEvent.clientX,mouseY:e.nodeEvent.clientY,windowX:this.left,windowY:this.top,windowTransition:this.style.transition?this.style.transition:''};this.style.transition='none';kijs.Dom.addEventListener('mousemove',document,this._onDocumentMouseMove,this);kijs.Dom.addEventListener('mouseup',document,this._onDocumentMouseUp,this);}},{key:'_onDocumentMouseMove',value:function _onDocumentMouseMove(e){if(kijs.isEmpty(this._dragInitialPos)){return;}
var x=this._dragInitialPos.windowX+(e.nodeEvent.clientX-this._dragInitialPos.mouseX);var y=this._dragInitialPos.windowY+(e.nodeEvent.clientY-this._dragInitialPos.mouseY);if(x<0){x=0;}if(y<0){y=0;}
var targetNode=this.targetNode;if(x<targetNode.offsetLeft){x=targetNode.offsetLeft;}if(x+this._dom.width>targetNode.offsetLeft+targetNode.offsetWidth){x=targetNode.offsetLeft+targetNode.offsetWidth-this._dom.width;}if(y<targetNode.offsetTop){y=targetNode.offsetTop;}if(y+this._dom.height>targetNode.offsetTop+targetNode.offsetHeight){y=targetNode.offsetTop+targetNode.offsetHeight-this._dom.height;}
this.left=x;this.top=y;}},{key:'_onDocumentMouseUp',value:function _onDocumentMouseUp(e){kijs.Dom.removeEventListener('mousemove',document,this);kijs.Dom.removeEventListener('mouseup',document,this);if(kijs.isEmpty(this._dragInitialPos)){return;}
this.dom.style.transition=this._dragInitialPos.windowTransition;this._dragInitialPos=null;}},{key:'_onMouseDown',value:function _onMouseDown(e){this.toFront();}},{key:'_onTargetElAfterResize',value:function _onTargetElAfterResize(e){this._adjustPositionToTarget(true);this._raiseAfterResizeEvent(false,e);}},{key:'_onTargetElChangeVisibility',value:function _onTargetElChangeVisibility(e){this.visible=e.visible;}},{key:'_onTargetElDestruct',value:function _onTargetElDestruct(e){this.destruct();}},{key:'_onWindowResize',value:function _onWindowResize(e){this._adjustPositionToTarget(true);this._raiseAfterResizeEvent(true,e);}},{key:'destruct',value:function destruct(preventDestructEvent){if(!preventDestructEvent){this.raiseEvent('destruct');}
if(this._targetX===document.body){kijs.Dom.removeEventListener('resize',window,this);}kijs.Dom.removeEventListener('mouseMove',document,this);kijs.Dom.removeEventListener('mouseUp',document,this);if(this._targetX instanceof kijs.gui.Element){this._targetX.off(null,null,this);}if(this._resizeDeferHandle){window.clearTimeout(this._resizeDeferHandle);}
if(this._modalMaskEl){this._modalMaskEl.destruct();}
this._dragInitialPos=null;this._modalMaskEl=null;this._resizeDeferHandle=null;this._targetX=null;_get(kijs_gui_Window.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Window.prototype),'destruct',this).call(this,true);}},{key:'draggable',get:function get(){return this._draggable;},set:function set(val){if(val&&!this._draggable){this._headerBarEl.on('mouseDown',this._onHeaderBarMouseDown,this);}else if(!val&&this._draggable){this._headerBarEl.off('mouseDown',this._onHeaderBarMouseDown,this);kijs.Dom.removeEventListener('mousemove',document,this);kijs.Dom.removeEventListener('mouseup',document,this);}this._draggable=!!val;}},{key:'focusDelay',get:function get(){return this._focusDelay;},set:function set(val){this._focusDelay=val;}},{key:'modal',get:function get(){return!kijs.isEmpty(this._modalMaskEl);},set:function set(val){if(val){if(kijs.isEmpty(this._modalMaskEl)){this._modalMaskEl=new kijs.gui.Mask({target:this.target,targetDomProperty:this.targetDomProperty});}}else{if(!kijs.isEmpty(this._modalMaskEl)){this._modalMaskEl.destruct();}}}},{key:'parentNode',get:function get(){if(this._targetX instanceof kijs.gui.Element){return this._targetX[this._targetDomProperty].node.parentNode;}else{return this._targetX;}}},{key:'resizeDelay',get:function get(){return this._resizeDelay;},set:function set(val){this._resizeDelay=val;}},{key:'target',get:function get(){return this._targetX;},set:function set(val){if(!kijs.isEmpty(this._targetX)){if(this._targetX instanceof kijs.gui.Element){this._targetX.off('afterResize',this._onTargetElAfterResize,this);this._targetX.off('changeVisibility',this._onTargetElChangeVisibility,this);this._targetX.off('destruct',this._onTargetElDestruct,this);}else if(this._targetX===document.body){kijs.Dom.removeEventListener('resize',window,this);}}
if(val instanceof kijs.gui.Element){this._targetX=val;this._targetX.on('afterResize',this._onTargetElAfterResize,this);this._targetX.on('changeVisibility',this._onTargetElChangeVisibility,this);this._targetX.on('destruct',this._onTargetElDestruct,this);}else if(val===document.body||val===null){this._targetX=document.body;kijs.Dom.addEventListener('resize',window,this._onWindowResize,this);}else{throw new Error('Unkown format on config "target"');}}},{key:'targetDomProperty',get:function get(){return this._targetDomProperty;},set:function set(val){this._targetDomProperty=val;}},{key:'targetNode',get:function get(){if(this._targetX instanceof kijs.gui.Element){return this._targetX[this._targetDomProperty].node;}else{return this._targetX;}}}]);return kijs_gui_Window;}(kijs.gui.Panel);kijs.gui.MsgBox=function(){function kijs_gui_MsgBox(){_classCallCheck(this,kijs_gui_MsgBox);}_createClass(kijs_gui_MsgBox,null,[{key:'alert',value:function alert(caption,msg,fn,context){if(kijs.isArray(msg)){msg=this._convertArrayToHtml(msg);}this.show({caption:caption,msg:msg,fn:fn,context:context,buttons:[{name:'ok',caption:'OK',isDefault:true}]});}},{key:'confirm',value:function confirm(caption,msg,fn,context){if(kijs.isArray(msg)){msg=this._convertArrayToHtml(msg);}this.show({caption:caption,msg:msg,fn:fn,context:context,icon:{iconChar:'&#xf059',style:{color:'#4398dd'}},buttons:[{name:'yes',caption:'Ja'},{name:'no',caption:'Nein'}]});}},{key:'error',value:function error(caption,msg,fn,context){if(kijs.isArray(msg)){msg=this._convertArrayToHtml(msg);}this.show({caption:caption,msg:msg,fn:fn,context:context,icon:{iconChar:'&#xf06a',style:{color:'#be6280'}},buttons:[{name:'ok',caption:'OK',isDefault:true}]});}},{key:'info',value:function info(caption,msg,fn,context){if(kijs.isArray(msg)){msg=this._convertArrayToHtml(msg);}this.show({caption:caption,msg:msg,fn:fn,context:context,icon:{iconChar:'&#xf05a',style:{color:'#4398dd'}},buttons:[{name:'ok',caption:'OK',isDefault:true}]});}},{key:'show',value:function show(config){var btn='none';var elements=[];var footerElements=[];if(config.icon){if(!(config.icon instanceof kijs.gui.Icon)){config.icon.xtype='kijs.gui.Icon';}elements.push(config.icon);}
elements.push({xtype:'kijs.gui.Element',html:config.msg,htmlDisplayType:'html',cls:'kijs-msgbox-inner'});kijs.Array.each(config.buttons,function(button){if(!(button instanceof kijs.gui.Button)){button.xtype='kijs.gui.Button';if(!button.on){button.on={};}if(!button.on.click){button.on.click=function(){btn=button.name;this.upX('kijs.gui.Window').destruct();};}}footerElements.push(button);},this);var win=new kijs.gui.Window({caption:config.caption,iconChar:config.iconChar?config.iconChar:'',collapsible:false,resizable:false,maximizable:false,modal:true,cls:'kijs-msgbox',elements:elements,footerElements:footerElements});if(config.fn){win.on('destruct',function(e){e.btn=btn;config.fn.call(config.context,e);});}
win.show();}},{key:'warning',value:function warning(caption,msg,fn,context){if(kijs.isArray(msg)){msg=this._convertArrayToHtml(msg);}this.show({caption:caption,msg:msg,fn:fn,context:context,icon:{iconChar:'&#xf071',style:{color:'#ff9900'}},buttons:[{name:'ok',caption:'OK',isDefault:true},{name:'cancel',caption:'Abbrechen'}]});}},{key:'_convertArrayToHtml',value:function _convertArrayToHtml(messages){var ret='<ul>';kijs.Array.each(messages,function(msg){ret+='<li>'+msg+'</li>';},this);ret+='</ul>';return ret;}}]);return kijs_gui_MsgBox;}();kijs.gui.CornerTipContainer=function(_kijs$gui$Container7){_inherits(kijs_gui_CornerTipContainer,_kijs$gui$Container7);function kijs_gui_CornerTipContainer(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_CornerTipContainer);var _this19=_possibleConstructorReturn(this,(kijs_gui_CornerTipContainer.__proto__||Object.getPrototypeOf(kijs_gui_CornerTipContainer)).call(this));_this19._dismissDelay=null;_this19._dom.clsRemove('kijs-container');_this19._dom.clsAdd('kijs-cornertipcontainer');config=Object.assign({},{dismissDelay:5000,width:230},config);Object.assign(_this19._configMap,{dismissDelay:true});if(kijs.isObject(config)){_this19.applyConfig(config,true);}return _this19;}
_createClass(kijs_gui_CornerTipContainer,[{key:'alert',value:function alert(caption,msg){if(kijs.isArray(msg)){msg=this._convertArrayToHtml(msg);}this.show({caption:caption,msg:msg});}},{key:'error',value:function error(caption,msg){if(kijs.isArray(msg)){msg=this._convertArrayToHtml(msg);}this.show({caption:caption,msg:msg,icon:{iconChar:'&#xf06a',style:{color:'#be6280'}}});}},{key:'info',value:function info(caption,msg){if(kijs.isArray(msg)){msg=this._convertArrayToHtml(msg);}this.show({caption:caption,msg:msg,icon:{iconChar:'&#xf05a',style:{color:'#4398dd'}}});}},{key:'show',value:function show(config){var elements=[];if(config.icon){if(!(config.icon instanceof kijs.gui.Icon)){config.icon.xtype='kijs.gui.Icon';}elements.push(config.icon);}
elements.push({xtype:'kijs.gui.Element',html:config.msg,htmlDisplayType:'html',cls:'kijs-msgbox-inner'});var tip=new kijs.gui.Panel({caption:config.caption,iconChar:config.iconChar?config.iconChar:'',closable:true,shadow:true,elements:elements,on:{destruct:this._onCornerTipDestruct,context:this}});this.add(tip);if(this._dismissDelay){kijs.defer(function(){if(tip){tip.destruct();}},this._dismissDelay,this);}}},{key:'warning',value:function warning(caption,msg){if(kijs.isArray(msg)){msg=this._convertArrayToHtml(msg);}this.show({caption:caption,msg:msg,icon:{iconChar:'&#xf071',style:{color:'#ff9900'}}});}},{key:'_convertArrayToHtml',value:function _convertArrayToHtml(messages){var ret='<ul>';kijs.Array.each(messages,function(msg){ret+='<li>'+msg+'</li>';},this);ret+='</ul>';return ret;}},{key:'_onCornerTipDestruct',value:function _onCornerTipDestruct(e){this.remove(e.element);}},{key:'destruct',value:function destruct(){this.base(arguments);}},{key:'dismissDelay',get:function get(){return this._dismissDelay;},set:function set(val){this._dismissDelay=val;}}],[{key:'show',value:function show(caption,html){var icon=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'alert';var instance=kijs_gui_CornerTipContainer._singletonInstance;if(!instance){instance=new kijs.gui.CornerTipContainer();instance.renderTo(document.body);kijs_gui_CornerTipContainer._singletonInstance=instance;}switch(icon){case'alert':instance.alert(caption,html);break;case'info':instance.info(caption,html);break;case'warning':instance.warning(caption,html);break;case'error':instance.error(caption,html);break;default:throw new Error('Unknown value on argument "icon"');}}}]);return kijs_gui_CornerTipContainer;}(kijs.gui.Container);kijs.gui.Rpc=function(_kijs$Rpc){_inherits(kijs_gui_Rpc,_kijs$Rpc);function kijs_gui_Rpc(){_classCallCheck(this,kijs_gui_Rpc);return _possibleConstructorReturn(this,(kijs_gui_Rpc.__proto__||Object.getPrototypeOf(kijs_gui_Rpc)).apply(this,arguments));}_createClass(kijs_gui_Rpc,[{key:'do',value:function _do(facadeFn,data,fn,context,cancelRunningRpcs,waitMaskTarget){var waitMaskTargetDomProperty=arguments.length>6&&arguments[6]!==undefined?arguments[6]:'dom';var ignoreWarnings=arguments[7];var fnBeforeMessages=arguments[8];var waitMask=void 0;if(waitMaskTarget instanceof kijs.gui.Element){waitMask=waitMaskTarget.waitMaskAdd();}else{waitMask=new kijs.gui.Mask({displayWaitIcon:true,target:waitMaskTarget,targetDomProperty:waitMaskTargetDomProperty});waitMask.show();}_get(kijs_gui_Rpc.prototype.__proto__||Object.getPrototypeOf(kijs_gui_Rpc.prototype),'do',this).call(this,facadeFn,data,function(response,request){if(request.responseArgs&&request.responseArgs.waitMask){if(request.responseArgs.waitMask.target instanceof kijs.gui.Element){request.responseArgs.waitMask.target.waitMaskRemove();}else{request.responseArgs.waitMask.destruct();}}if(!response.canceled){if(fnBeforeMessages&&kijs.isFunction(fnBeforeMessages)){fnBeforeMessages.call(context||this,response||null);}
if(!kijs.isEmpty(response.errorMsg)){kijs.gui.MsgBox.error('Fehler',response.errorMsg);return;}
if(!kijs.isEmpty(response.warningMsg)){kijs.gui.MsgBox.warning('Warnung',response.warningMsg,function(e){if(e.btn==='ok'){this.do(facadeFn,data,fn,context,cancelRunningRpcs,waitMaskTarget,waitMaskTargetDomProperty,true);}},this);return;}
if(!kijs.isEmpty(response.infoMsg)){kijs.gui.MsgBox.info('Info',response.infoMsg);}
if(!kijs.isEmpty(response.cornerTipMsg)){kijs.gui.CornerTipContainer.show('Info',response.cornerTipMsg,'info');}
if(fn&&kijs.isFunction(fn)){fn.call(context||this,response||null);}}},this,cancelRunningRpcs,{ignoreWarnings:!!ignoreWarnings},{waitMask:waitMask});}}]);return kijs_gui_Rpc;}(kijs.Rpc);kijs.gui.DataViewElement=function(_kijs$gui$Element7){_inherits(kijs_gui_DataViewElement,_kijs$gui$Element7);function kijs_gui_DataViewElement(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_DataViewElement);var _this21=_possibleConstructorReturn(this,(kijs_gui_DataViewElement.__proto__||Object.getPrototypeOf(kijs_gui_DataViewElement)).call(this,false));_this21._dataRow=[];_this21._index=null;_this21._selected=false;_this21._dom.clsAdd('kijs-dataviewelement');_this21._dom.nodeAttributeSet('tabIndex',-1);_this21._dom.nodeAttributeSet('draggable',true);config=Object.assign({},{},config);Object.assign(_this21._configMap,{dataRow:true,index:true,selected:{target:'selected'}});if(kijs.isObject(config)){_this21.applyConfig(config,true);}_this21.applyConfig(config);return _this21;}
_createClass(kijs_gui_DataViewElement,[{key:'destruct',value:function destruct(preventDestructEvent){if(!preventDestructEvent){this.raiseEvent('destruct');}
this._dataRow=null;_get(kijs_gui_DataViewElement.prototype.__proto__||Object.getPrototypeOf(kijs_gui_DataViewElement.prototype),'destruct',this).call(this,true);}},{key:'dataRow',get:function get(){return this._dataRow;},set:function set(val){this._dataRow=val;}},{key:'index',get:function get(){return this._index;},set:function set(val){this._index=val;}},{key:'selected',get:function get(){return this._dom.clsHas('kijs-selected');},set:function set(val){if(val){this._dom.clsAdd('kijs-selected');}else{this._dom.clsRemove('kijs-selected');}}}]);return kijs_gui_DataViewElement;}(kijs.gui.Element);kijs.gui.DataView=function(_kijs$gui$Container8){_inherits(kijs_gui_DataView,_kijs$gui$Container8);function kijs_gui_DataView(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_DataView);var _this22=_possibleConstructorReturn(this,(kijs_gui_DataView.__proto__||Object.getPrototypeOf(kijs_gui_DataView)).call(this,false));_this22._currentEl=null;_this22._lastSelectedEl=null;_this22._currentEl=null;_this22._data=[];_this22._facadeFnLoad=null;_this22._rpc=null;_this22._selectType='none';_this22._dom.clsRemove('kijs-container');_this22._dom.clsAdd('kijs-dataview');_this22._dom.nodeAttributeSet('tabIndex',-1);config=Object.assign({},{selectType:'single'},config);Object.assign(_this22._configMap,{autoLoad:{target:'autoLoad'},data:{target:'data'},facadeFnLoad:true,rpc:{target:'rpc'},selectType:true});if(kijs.isObject(config)){_this22.applyConfig(config,true);}_this22.applyConfig(config);_this22.on('keyDown',_this22._onKeyDown,_this22);_this22.on('elementClick',_this22._onElementClick,_this22);_this22.on('elementFocus',_this22._onElementFocus,_this22);return _this22;}
_createClass(kijs_gui_DataView,[{key:'clearSelections',value:function clearSelections(preventSelectionChange){this.unSelect(this._elements,preventSelectionChange);}},{key:'createElement',value:function createElement(dataRow,index){var html='';html+='<div>';html+=' <span class="label">Nr. '+index+'</span>';html+='</div>';kijs.Object.each(dataRow,function(key,val){html+='<div>';html+=' <span class="label">'+key+': </span>';html+=' <span class="value">'+val+'</span>';html+='</div>';},this);return new kijs.gui.DataViewElement({dataRow:dataRow,html:html});}},{key:'getSelected',value:function getSelected(){var ret=[];for(var i=0,len=this._elements.length;i<len;i++){if(this._elements[i].selected){ret.push(this._elements[i]);}}if(this._selectType==='none'){return null;}else if(this._selectType==='single'){return ret.length?ret[0]:null;}else{return ret;}}},{key:'load',value:function load(args){this._rpc.do(this._facadeFnLoad,args,function(response){this.data=response.rows;if(!kijs.isEmpty(response.selectFilters)){this.selectByFilters(response.selectFilters);}},this,true,this,'dom',false);}},{key:'select',value:function select(elements,keepExisting,preventSelectionChange){if(kijs.isEmpty(elements)){elements=[];}if(!kijs.isArray(elements)){elements=[elements];}if(!keepExisting){this.clearSelections(true);}kijs.Array.each(elements,function(el){el.selected=true;},this);if(!preventSelectionChange){this.raiseEvent('selectionchange',elements,this);}}},{key:'selectByFilters',value:function selectByFilters(filters,keepExisting,preventSelectionChange){if(kijs.isEmpty(filters)){return;}
if(kijs.isObject(filters)){filters=[filters];}for(var i=0;i<filters.length;i++){if(kijs.isObject(filters[i])){filters[i]=[filters[i]];}}
var selElements=[];kijs.Array.each(this._elements,function(el){var row=el.dataRow;kijs.Array.each(filters,function(filterFields){var ok=false;kijs.Array.each(filterFields,function(filterField){if(kijs.isEmpty(filterField.value)||kijs.isEmpty(filterField.field)){throw new Error('Unkown filter format.');}if(filterField.value===row[filterField.field]){ok=true;}else{ok=false;return false;}},this);if(ok){selElements.push(el);return false;}},this);},this);if(!kijs.isEmpty(selElements)){this.select(selElements,keepExisting,preventSelectionChange);}}},{key:'selectBetween',value:function selectBetween(el1,el2,preventSelectionChange){var found=false;var elements=[];kijs.Array.each(this._elements,function(el){if(!found){if(el===el1){found='el1';}else if(el===el2){found='el2';}}if(found){elements.push(el);}if(found==='el1'&&el===el2||found==='el2'&&el===el1){return false;}},this);if(!kijs.isEmpty(elements)){this.select(elements,true,preventSelectionChange);}}},{key:'setFocussableElement',value:function setFocussableElement(el){kijs.Array.each(this._elements,function(elem){elem.dom.nodeAttributeSet('tabIndex',-1);},this);if(!el&&!kijs.isEmpty(this._elements)){el=this._elements[0];}
if(el){el.dom.nodeAttributeSet('tabIndex',0);}}},{key:'unSelect',value:function unSelect(elements,preventSelectionChange){if(!kijs.isArray(elements)){elements=[elements];}kijs.Array.each(elements,function(el){el.selected=false;},this);if(!preventSelectionChange){this.raiseEvent('selectionchange',[],this);}}},{key:'_selectEl',value:function _selectEl(el,shift,ctrl){if(!el){return;}
switch(this._selectType){case'single':shift=false;ctrl=false;break;case'multi':break;case'simple':ctrl=true;break;case'none':default:return;}if(shift&&this._lastSelectedEl){if(!ctrl){this.clearSelections(true);}
this.selectBetween(this._lastSelectedEl,el);}else{if(!ctrl){this.clearSelections(true);}if(el.selected){this.unSelect(el);if(el===this._lastSelectedEl){this._lastSelectedEl=null;}}else{this.select(el,true);this._lastSelectedEl=el;}}}},{key:'_onAfterFirstRenderTo',value:function _onAfterFirstRenderTo(e){this.load();}},{key:'_onElementClick',value:function _onElementClick(e){this.current=e.raiseElement;e.raiseElement.focus();this._selectEl(this._currentEl,e.nodeEvent.shiftKey,e.nodeEvent.ctrlKey);}},{key:'_onElementFocus',value:function _onElementFocus(e){this.setFocussableElement(e.raiseElement);}},{key:'_onKeyDown',value:function _onKeyDown(e){switch(e.nodeEvent.keyCode){case kijs.keys.LEFT_ARROW:if(this._currentEl){var prev=this._currentEl.previous;if(prev){this.current=prev;prev.focus();}if(e.nodeEvent.shiftKey||!e.nodeEvent.ctrlKey&&(this.selectType==='single'||this.selectType==='multi')){this._selectEl(this._currentEl,e.nodeEvent.shiftKey,e.nodeEvent.ctrlKey);}}e.nodeEvent.preventDefault();break;case kijs.keys.UP_ARROW:if(this._currentEl&&this._elements){var found=false;kijs.Array.each(this._elements,function(el){if(found){if(el.top<this._currentEl.top&&el.left===this._currentEl.left){this.current=el;el.focus();return false;}}else{if(el===this._currentEl){found=true;}}},this,true);if(e.nodeEvent.shiftKey||!e.nodeEvent.ctrlKey&&(this._selectType==='single'||this._selectType==='multi')){this._selectEl(this._currentEl,e.nodeEvent.shiftKey,e.nodeEvent.ctrlKey);}}e.nodeEvent.preventDefault();break;case kijs.keys.RIGHT_ARROW:if(this._currentEl){var next=this._currentEl.next;if(next){this.current=next;next.focus();}if(e.nodeEvent.shiftKey||!e.nodeEvent.ctrlKey&&(this._selectType==='single'||this._selectType==='multi')){this._selectEl(this._currentEl,e.nodeEvent.shiftKey,e.nodeEvent.ctrlKey);}}e.nodeEvent.preventDefault();break;case kijs.keys.DOWN_ARROW:if(this._currentEl&&this._elements){var _found=false;kijs.Array.each(this._elements,function(el){if(_found){if(el.top>this._currentEl.top&&el.left===this._currentEl.left){this.current=el;el.focus();return false;}}else{if(el===this._currentEl){_found=true;}}},this);if(e.nodeEvent.shiftKey||!e.nodeEvent.ctrlKey&&(this._selectType==='single'||this._selectType==='multi')){this._selectEl(this._currentEl,e.nodeEvent.shiftKey,e.nodeEvent.ctrlKey);}}e.nodeEvent.preventDefault();break;case kijs.keys.SPACE:this._selectEl(this._currentEl,e.nodeEvent.shiftKey,e.nodeEvent.ctrlKey);e.nodeEvent.preventDefault();break;}}},{key:'destruct',value:function destruct(preventDestructEvent){if(!preventDestructEvent){this.raiseEvent('destruct');}
this._currentEl=null;this._lastSelectedEl=null;this._data=null;this._rpc=null;_get(kijs_gui_DataView.prototype.__proto__||Object.getPrototypeOf(kijs_gui_DataView.prototype),'destruct',this).call(this,true);}},{key:'autoLoad',get:function get(){return this.hasListener('afterFirstRenderTo',this._onAfterFirstRenderTo,this);},set:function set(val){if(val){this.on('afterFirstRenderTo',this._onAfterFirstRenderTo,this);}else{this.off('afterFirstRenderTo',this._onAfterFirstRenderTo,this);}}},{key:'current',get:function get(){return this._currentEl;},set:function set(el){this._currentEl=el;kijs.Array.each(this._elements,function(elem){if(elem===el){elem.dom.clsAdd('kijs-current');}else{elem.dom.clsRemove('kijs-current');}},this);if(el){this.setFocussableElement(el);}}},{key:'data',get:function get(){return this._data;},set:function set(val){this._data=val;if(this._elements){this.removeAll(true);}
var newElements=[];for(var i=0,len=this._data.length;i<len;i++){var newEl=this.createElement(this._data[i],i);newEl.index=i;newEl.parent=this;newEl.on('click',function(e){return this.raiseEvent('elementClick',e);},this);newEl.on('dblClick',function(e){return this.raiseEvent('elementDblClick',e);},this);newEl.on('focus',function(e){return this.raiseEvent('elementFocus',e);},this);newEl.on('dragStart',function(e){return this.raiseEvent('elementDragStart',e);},this);newEl.on('dragOver',function(e){return this.raiseEvent('elementDragOver',e);},this);newEl.on('drag',function(e){return this.raiseEvent('elementDrag',e);},this);newEl.on('dragLeave',function(e){return this.raiseEvent('elementDragLeave',e);},this);newEl.on('dragEnd',function(e){return this.raiseEvent('elementDragEnd',e);},this);newEl.on('drop',function(e){return this.raiseEvent('elementDrop',e);},this);newElements.push(newEl);}
this.add(newElements);this.current=!kijs.isEmpty(this._elements)?this._elements[0]:null;}},{key:'facadeFnLoad',get:function get(){return this._facadeFnLoad;},set:function set(val){this._facadeFnLoad=val;}},{key:'rpc',get:function get(){return this._rpc;},set:function set(val){if(val instanceof kijs.gui.Rpc){this._rpc=val;}else if(kijs.isString(val)){if(this._rpc){this._rpc.url=val;}else{this._rpc=new kijs.gui.Rpc({url:val});}}else{throw new Error('Unkown format on config "rpc"');}}},{key:'selectType',get:function get(){return this._selectType;},set:function set(val){this._selectType=val;}}]);return kijs_gui_DataView;}(kijs.gui.Container);kijs.gui.FormPanel=function(_kijs$gui$Panel2){_inherits(kijs_gui_FormPanel,_kijs$gui$Panel2);function kijs_gui_FormPanel(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_FormPanel);var _this23=_possibleConstructorReturn(this,(kijs_gui_FormPanel.__proto__||Object.getPrototypeOf(kijs_gui_FormPanel)).call(this));_this23._data={};_this23._facadeFnLoad=null;_this23._facadeFnSave=null;_this23._fields=null;_this23._rpc=null;Object.assign(_this23._configMap,{autoLoad:{target:'autoLoad'},data:{target:'data'},facadeFnLoad:true,facadeFnSave:true,rpc:{target:'rpc'}});if(kijs.isObject(config)){_this23.applyConfig(config,true);}return _this23;}
_createClass(kijs_gui_FormPanel,[{key:'load',value:function load(args,searchFields){this._rpc.do(this._facadeFnLoad,args,function(response){if(response.form){this.removeAll();this.add(response.form);}if(searchFields||response.form||kijs.isEmpty(this._fields)){this.searchFields();}
if(response.formData){this.data=response.formData;}this.raiseEvent('afterLoad');},this,true,this,'dom',false,this._onRpcBeforeMessages);}},{key:'save',value:function save(searchFields){var args={};args.formData={};if(searchFields||kijs.isEmpty(this._fields)){this.searchFields();}
var ok=this.validate();args.formData=this.data;if(ok){this._rpc.do(this.facadeFnSave,args,function(response){this.raiseEvent('afterSave');},this,false,this,'dom',false,this._onRpcBeforeMessages);}else{kijs.gui.MsgBox.error('Fehler','Es wurden noch nicht alle Felder richtig ausgefüllt.');}}},{key:'searchFields',value:function searchFields(){var parent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this;var ret=[];for(var i=0;i<parent.elements.length;i++){var el=parent.elements[i];if(el instanceof kijs.gui.field.Field&&!kijs.isEmpty(el.name)){ret.push(el);}else if(el instanceof kijs.gui.Container){ret=ret.concat(this.searchFields(el));}}if(parent===this){this._fields=ret;}return ret;}},{key:'validate',value:function validate(){var ret=true;for(var i=0;i<this._fields.length;i++){if(!this._fields[i].validate()){ret=false;}}return ret;}},{key:'_onRpcBeforeMessages',value:function _onRpcBeforeMessages(response){if(!kijs.isEmpty(response.fieldErrors)){if(!kijs.isEmpty(this._fields)){kijs.Array.each(this._fields,function(field){if(response.fieldErrors[field.name]){field.addValidateErrors(response.fieldErrors[field.name]);}},this);}
var msg='Es wurden noch nicht alle Felder richtig ausgefüllt.';if(kijs.isEmpty(response.errorMsg)){response.errorMsg=msg;}}}},{key:'_onAfterFirstRenderTo',value:function _onAfterFirstRenderTo(e){this.load();}},{key:'destruct',value:function destruct(preventDestructEvent){if(!preventDestructEvent){this.raiseEvent('destruct');}
this._data=null;this._fields=null;this._rpc=null;_get(kijs_gui_FormPanel.prototype.__proto__||Object.getPrototypeOf(kijs_gui_FormPanel.prototype),'destruct',this).call(this,true);}},{key:'autoLoad',get:function get(){return this.hasListener('afterFirstRenderTo',this._onAfterFirstRenderTo,this);},set:function set(val){if(val){this.on('afterFirstRenderTo',this._onAfterFirstRenderTo,this);}else{this.off('afterFirstRenderTo',this._onAfterFirstRenderTo,this);}}},{key:'data',get:function get(){var data={};if(!kijs.isEmpty(this._fields)){kijs.Array.each(this._fields,function(field){data[field.name]=field.value;},this);}
Object.assign(this._data,data);return this._data;},set:function set(val){this._data=val;if(!kijs.isEmpty(this._fields)){kijs.Array.each(this._fields,function(field){if(field.name in this._data){field.value=this._data[field.name];}},this);}}},{key:'fields',get:function get(){return this._fields;}},{key:'facadeFnLoad',get:function get(){return this._facadeFnLoad;},set:function set(val){this._facadeFnLoad=val;}},{key:'facadeFnSave',get:function get(){return this._facadeFnSave;},set:function set(val){this._facadeFnSave=val;}},{key:'rpc',get:function get(){return this._rpc;},set:function set(val){if(val instanceof kijs.gui.Rpc){this._rpc=val;}else if(kijs.isString(val)){if(this._rpc){this._rpc.url=val;}else{this._rpc=new kijs.gui.Rpc({url:val});}}else{throw new Error('Unkown format on config "rpc"');}}}]);return kijs_gui_FormPanel;}(kijs.gui.Panel);kijs.gui.field=function kijs_gui_field(){_classCallCheck(this,kijs_gui_field);};kijs.gui.field.Field=function(_kijs$gui$Container9){_inherits(kijs_gui_field_Field,_kijs$gui$Container9);function kijs_gui_field_Field(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_field_Field);var _this24=_possibleConstructorReturn(this,(kijs_gui_field_Field.__proto__||Object.getPrototypeOf(kijs_gui_field_Field)).call(this,false));_this24._labelHide=false;_this24._inputId=kijs.uniqId('kijs_-_input_');_this24._inputWrapperDom=new kijs.gui.Dom({cls:'kijs-inputwrapper'});_this24._labelDom=new kijs.gui.Dom({cls:'kijs-label',nodeTagName:'label',nodeAttribute:{htmlFor:_this24._inputId}});_this24._spinIconEl=new kijs.gui.Icon({parent:_this24,iconChar:'&#xf0d7',cls:'kijs-icon-spindown',visible:false});_this24._errorIconEl=new kijs.gui.Icon({parent:_this24,iconChar:'&#xf05a',cls:'kijs-icon-error',toolTip:new kijs.gui.ToolTip({cls:'kijs-error'}),visible:false});_this24._errors=[];_this24._helpIconEl=new kijs.gui.Icon({parent:_this24,iconChar:'&#xf059',cls:'kijs-icon-help',toolTip:new kijs.gui.ToolTip({cls:'kijs-help'}),visible:false});_this24._spinBoxEl=null;_this24._maxLength=null;_this24._required=false;_this24._dom.clsRemove('kijs-container');_this24._dom.clsAdd('kijs-field');Object.assign(_this24._configMap,{disabled:{target:'disabled'},label:{target:'html',context:_this24._labelDom},labelCls:{fn:'function',target:_this24._labelDom.clsAdd,context:_this24._labelDom},labelHide:true,labelHtmlDisplayType:{target:'htmlDisplayType',context:_this24._labelDom},labelStyle:{fn:'assign',target:'style',context:_this24._labelDom},labelWidth:{target:'labelWidth'},value:{target:'value'},errorIcon:{target:'errorIcon'},errorIconChar:{target:'errorIconChar',context:_this24._errorIconEl},errorIconCls:{target:'errorIconCls',context:_this24._errorIconEl},errorIconColor:{target:'errorIconColor',context:_this24._errorIconEl},helpIcon:{target:'helpIcon'},helpIconChar:{target:'helpIconChar',context:_this24._helpIconEl},helpIconCls:{target:'helpIconCls',context:_this24._helpIconEl},helpIconColor:{target:'helpIconColor',context:_this24._helpIconEl},helpText:{target:'helpText'},maxLength:true,readOnly:{target:'readOnly'},required:true,spinIcon:{target:'spinIcon'},spinIconChar:{target:'iconChar',context:_this24._spinIconEl},spinIconCls:{target:'iconCls',context:_this24._spinIconEl},spinIconColor:{target:'iconColor',context:_this24._spinIconEl},spinIconVisible:{target:'visible',context:_this24._spinIconEl}});_this24._spinIconEl.on('click',_this24._onSpinButtonClick,_this24);if(kijs.isObject(config)){_this24.applyConfig(config,true);}return _this24;}
_createClass(kijs_gui_field_Field,[{key:'addValidateErrors',value:function addValidateErrors(errors){if(!errors){return;}if(!kijs.isArray(errors)){errors=[errors];}this._errors=this._errors.concat(errors);this._displayErrors();}},{key:'render',value:function render(preventAfterRender){_get(kijs_gui_field_Field.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Field.prototype),'render',this).call(this,true);if(!this._labelHide){this._labelDom.renderTo(this._dom.node,this._innerDom.node);}else{this._labelDom.unRender();}
this._inputWrapperDom.renderTo(this._dom.node,this._innerDom.node);this._spinIconEl.renderTo(this._dom.node,this._innerDom.node);this._helpIconEl.renderTo(this._dom.node);this._errorIconEl.renderTo(this._dom.node);if(!preventAfterRender){this.raiseEvent('afterRender');}}},{key:'unRender',value:function unRender(){this._labelDom.unRender();this._inputWrapperDom.unRender();if(this._spinBox){this._spinBox.unRender();}this._spinIconEl.unRender();this._errorIconEl.unRender();this._helpIconEl.unRender();_get(kijs_gui_field_Field.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Field.prototype),'unRender',this).call(this);}},{key:'validate',value:function validate(){this._errors=[];this._validationRules(this.value);this._displayErrors();return kijs.isEmpty(this._errors);}},{key:'_displayErrors',value:function _displayErrors(){if(!kijs.isEmpty(this._errors)){this._dom.clsAdd('kijs-error');this._errorIconEl.toolTip=this._errors;this._errorIconEl.visible=true;}else{this._dom.clsRemove('kijs-error');this._errorIconEl.visible=false;}}},{key:'_validationRules',value:function _validationRules(value){if(this._required){if(kijs.isEmpty(value)){this._errors.push('Dieses Feld darf nicht leer sein');}}
if(!kijs.isEmpty(this._maxLength)){if(!kijs.isEmpty(value)&&value.length>this._maxLength){this._errors.push('Dieses Feld darf maximal '+this._maxLength+' Zeichen enthalten');}}}},{key:'_onSpinButtonClick',value:function _onSpinButtonClick(e){if(this._spinBoxEl){if(this._spinBoxEl.isRendered){this._spinBoxEl.close();}else{var width=this._inputWrapperDom.width+this._spinIconEl.width;this._spinBoxEl.style.minWidth=width+'px';this._spinBoxEl.show();}}}},{key:'destruct',value:function destruct(preventDestructEvent){if(!preventDestructEvent){this.raiseEvent('destruct');}
if(this._labelDom){this._labelDom.destruct();}if(this._inputWrapperDom){this._inputWrapperDom.destruct();}if(this._spinBoxEl){this._spinBoxEl.destruct();}if(this._spinIconEl){this._spinIconEl.destruct();}if(this._errorIconEl){this._errorIconEl.destruct();}if(this._helpIconEl){this._helpIconEl.destruct();}
this._errors=null;this._labelDom=null;this._inputWrapperDom=null;this._spinBoxEl=null;this._spinIconEl=null;this._errorIconEl=null;this._helpIconEl=null;this._value=null;_get(kijs_gui_field_Field.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Field.prototype),'destruct',this).call(this,true);}},{key:'disabled',get:function get(){return this._dom.clsHas('kijs-disabled');},set:function set(val){if(val){this._dom.clsAdd('kijs-disabled');}else{this._dom.clsRemove('kijs-disabled');}
this._spinIconEl.disabled=val;this._errorIconEl.disabled=val;this._helpIconEl.disabled=val;var buttons=this.getElementsByXtype('kijs.gui.Button',1);kijs.Array.each(buttons,function(button){button.disabled=val;},this);}},{key:'errorIcon',get:function get(){return this._errorIconEl;},set:function set(val){if(kijs.isEmpty(val)){this._errorIconEl.iconChar=null;this._errorIconEl.iconCls=null;this._errorIconEl.iconColor=null;if(this.isRendered){this.render();}}else if(val instanceof kijs.gui.Icon){this._errorIconEl.destruct();this._errorIconEl=val;if(this.isRendered){this.render();}}else if(kijs.isObject(val)){this._errorIconEl.applyConfig(val);if(this.isRendered){this.render();}}else{throw new Error('config "errorIcon" is not valid.');}}},{key:'errorIconChar',get:function get(){return this._errorIconEl.iconChar;},set:function set(val){this._errorIconEl.iconChar=val;if(this.isRendered){this.render();}}},{key:'errorIconCls',get:function get(){return this._errorIconEl.iconCls;},set:function set(val){this._errorIconEl.iconCls=val;if(this.isRendered){this.render();}}},{key:'errorIconColor',get:function get(){return this._errorIconEl.iconColor;},set:function set(val){this._errorIconEl.iconColor=val;if(this.isRendered){this.render();}}},{key:'helpIcon',get:function get(){return this._helpIconEl;},set:function set(val){if(kijs.isEmpty(val)){this._helpIconEl.iconChar=null;this._helpIconEl.iconCls=null;this._helpIconEl.iconColor=null;}else if(val instanceof kijs.gui.Icon){this._helpIconEl.destruct();this._helpIconEl=val;if(this.isRendered){this.render();}}else if(kijs.isObject(val)){this._helpIconEl.applyConfig(val);if(this.isRendered){this._helpIconEl.render();}}else{throw new Error('config "helpIcon" is not valid.');}}},{key:'helpIconChar',get:function get(){return this._helpIconEl.iconChar;},set:function set(val){this._helpIconEl.iconChar=val;}},{key:'helpIconCls',get:function get(){return this._helpIconEl.iconCls;},set:function set(val){this._helpIconEl.iconCls=val;}},{key:'helpIconColor',get:function get(){return this._helpIconEl.iconColor;},set:function set(val){this._helpIconEl.iconColor=val;if(this.isRendered){this.render();}}},{key:'helpText',get:function get(){return this._helpIconEl.toolTip.html;},set:function set(val){this._helpIconEl.toolTip=val;this._helpIconEl.visible=!kijs.isEmpty(this._helpIconEl.toolTip.html);}},{key:'inputWrapperDom',get:function get(){return this._inputWrapperDom;}},{key:'label',get:function get(){return this._labelDom.html;},set:function set(val){this._labelDom.html=val;}},{key:'labelHide',get:function get(){return this._labelHide;},set:function set(val){this._labelHide=val;if(this.isRendered){if(val){this._labelDom.renderTo(this._dom.node,this._inputWrapperDom.node);}else{this._labelDom.unRender();}}}},{key:'labelDom',get:function get(){return this._labelDom;}},{key:'labelHtmlDisplayType',get:function get(){return this._labelDom.htmlDisplayType;},set:function set(val){this._labelDom.htmlDisplayType=val;}},{key:'labelWidth',get:function get(){return this._labelDom.width;},set:function set(val){this._labelDom.width=val;}},{key:'readOnly',get:function get(){return this._dom.clsHas('kijs-readonly');},set:function set(val){if(val){this._dom.clsAdd('kijs-readonly');}else{this._dom.clsRemove('kijs-readonly');}}},{key:'spinIcon',get:function get(){return this._spinIconEl;},set:function set(val){if(kijs.isEmpty(val)){this._spinIconEl.iconChar=null;this._spinIconEl.iconCls=null;this._spinIconEl.iconColor=null;if(this.isRendered){this.render();}}else if(val instanceof kijs.gui.Button){this._spinIconEl.destruct();this._spinIconEl=val;if(this.isRendered){this.render();}}else if(kijs.isObject(val)){this._spinIconEl.applyConfig(val);if(this.isRendered){this.render();}}else{throw new Error('config "spinIcon" is not valid.');}}},{key:'spinIconChar',get:function get(){return this._spinIconEl.iconChar;},set:function set(val){this._spinIconEl.iconChar=val;if(this.isRendered){this.render();}}},{key:'spinIconCls',get:function get(){return this._spinIconEl.iconCls;},set:function set(val){this._spinIconEl.iconCls=val;if(this.isRendered){this.render();}}},{key:'spinIconColor',get:function get(){return this._spinIconEl.iconColor;},set:function set(val){this._spinIconEl.iconColor=val;if(this.isRendered){this.render();}}},{key:'spinIconVisible',get:function get(){return!!this._spinIconEl.visible;},set:function set(val){this._spinIconEl.visible=!!val;if(this.isRendered){this.render();}}},{key:'value',get:function get(){return null;},set:function set(val){}}]);return kijs_gui_field_Field;}(kijs.gui.Container);kijs.gui.field.Text=function(_kijs$gui$field$Field){_inherits(kijs_gui_field_Text,_kijs$gui$field$Field);function kijs_gui_field_Text(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_field_Text);var _this25=_possibleConstructorReturn(this,(kijs_gui_field_Text.__proto__||Object.getPrototypeOf(kijs_gui_field_Text)).call(this,false));_this25._inputDom=new kijs.gui.Dom({disableEnterEscBubbeling:true,nodeTagName:'input',nodeAttribute:{id:_this25._inputId}});_this25._trimValue=true;_this25._dom.clsAdd('kijs-field-text');Object.assign(_this25._configMap,{trimValue:true});_this25._eventForwardsAdd('input',_this25._inputDom);_this25._eventForwardsAdd('blur',_this25._inputDom);_this25._eventForwardsRemove('enterPress',_this25._dom);_this25._eventForwardsRemove('enterEscPress',_this25._dom);_this25._eventForwardsRemove('escPress',_this25._dom);_this25._eventForwardsAdd('enterPress',_this25._inputDom);_this25._eventForwardsAdd('enterEscPress',_this25._inputDom);_this25._eventForwardsAdd('escPress',_this25._inputDom);_this25.on('input',_this25._onInput,_this25);if(kijs.isObject(config)){_this25.applyConfig(config,true);}return _this25;}
_createClass(kijs_gui_field_Text,[{key:'render',value:function render(preventAfterRender){_get(kijs_gui_field_Text.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Text.prototype),'render',this).call(this,true);this._inputDom.renderTo(this._inputWrapperDom.node);if(!preventAfterRender){this.raiseEvent('afterRender');}}},{key:'unRender',value:function unRender(){this._inputDom.unRender();_get(kijs_gui_field_Text.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Text.prototype),'unRender',this).call(this);}},{key:'_onInput',value:function _onInput(e){this.validate();}},{key:'destruct',value:function destruct(preventDestructEvent){if(!preventDestructEvent){this.raiseEvent('destruct');}
if(this._inputDom){this._inputDom.destruct();}
this._inputDom=null;_get(kijs_gui_field_Text.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Text.prototype),'destruct',this).call(this,true);}},{key:'disabled',get:function get(){return _get(kijs_gui_field_Text.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Text.prototype),'disabled',this);},set:function set(val){_set(kijs_gui_field_Text.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Text.prototype),'disabled',!!val,this);if(val||this._dom.clsHas('kijs-readonly')){this._inputDom.nodeAttributeSet('readOnly',true);}else{this._inputDom.nodeAttributeSet('readOnly',false);}}},{key:'isEmpty',get:function get(){return kijs.isEmpty(this._inputDom.value);}},{key:'inputDom',get:function get(){return this._inputDom;}},{key:'readOnly',get:function get(){return _get(kijs_gui_field_Text.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Text.prototype),'readOnly',this);},set:function set(val){_set(kijs_gui_field_Text.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Text.prototype),'readOnly',!!val,this);if(val||this._dom.clsHas('kijs-disabled')){this._inputDom.nodeAttributeSet('readOnly',true);}else{this._inputDom.nodeAttributeSet('readOnly',false);}}},{key:'trimValue',get:function get(){return this._trimValue;},set:function set(val){this._trimValue=val;}},{key:'value',get:function get(){var val=this._inputDom.nodeAttributeGet('value');if(this._trimValue&&kijs.isString(val)){val=val.trim();}return val;},set:function set(val){this._inputDom.nodeAttributeSet('value',val);}}]);return kijs_gui_field_Text;}(kijs.gui.field.Field);kijs.gui.field.Memo=function(_kijs$gui$field$Field2){_inherits(kijs_gui_field_Memo,_kijs$gui$field$Field2);function kijs_gui_field_Memo(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_field_Memo);var _this26=_possibleConstructorReturn(this,(kijs_gui_field_Memo.__proto__||Object.getPrototypeOf(kijs_gui_field_Memo)).call(this,false));_this26._inputDom=new kijs.gui.Dom({disableEnterEscBubbeling:true,nodeTagName:'textarea',nodeAttribute:{id:_this26._inputId}});_this26._trimValue=true;_this26._dom.clsAdd('kijs-field-memo');Object.assign(_this26._configMap,{trimValue:true});_this26._eventForwardsAdd('input',_this26._inputDom);_this26._eventForwardsAdd('blur',_this26._inputDom);_this26._eventForwardsRemove('enterPress',_this26._dom);_this26._eventForwardsRemove('enterEscPress',_this26._dom);_this26._eventForwardsRemove('escPress',_this26._dom);_this26._eventForwardsAdd('enterPress',_this26._inputDom);_this26._eventForwardsAdd('enterEscPress',_this26._inputDom);_this26._eventForwardsAdd('escPress',_this26._inputDom);_this26.on('input',_this26._onInput,_this26);if(kijs.isObject(config)){_this26.applyConfig(config,true);}return _this26;}
_createClass(kijs_gui_field_Memo,[{key:'render',value:function render(preventAfterRender){_get(kijs_gui_field_Memo.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Memo.prototype),'render',this).call(this,true);this._inputDom.renderTo(this._inputWrapperDom.node);if(!preventAfterRender){this.raiseEvent('afterRender');}}},{key:'unRender',value:function unRender(){this._inputDom.unRender();_get(kijs_gui_field_Memo.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Memo.prototype),'unRender',this).call(this);}},{key:'_onInput',value:function _onInput(e){this.validate();}},{key:'destruct',value:function destruct(preventDestructEvent){if(!preventDestructEvent){this.raiseEvent('destruct');}
if(this._inputDom){this._inputDom.destruct();}
this._inputDom=null;_get(kijs_gui_field_Memo.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Memo.prototype),'destruct',this).call(this,true);}},{key:'disabled',get:function get(){return _get(kijs_gui_field_Memo.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Memo.prototype),'disabled',this);},set:function set(val){_set(kijs_gui_field_Memo.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Memo.prototype),'disabled',val,this);if(val){this._inputDom.nodeAttributeSet('readOnly',true);}else{this._inputDom.nodeAttributeSet('readOnly',false);}}},{key:'isEmpty',get:function get(){return kijs.isEmpty(this._inputDom.value);}},{key:'inputDom',get:function get(){return this._inputDom;}},{key:'readOnly',get:function get(){return _get(kijs_gui_field_Memo.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Memo.prototype),'readOnly',this);},set:function set(val){_set(kijs_gui_field_Memo.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Memo.prototype),'readOnly',!!val,this);if(val||this._dom.clsHas('kijs-disabled')){this._inputDom.nodeAttributeSet('readOnly',true);}else{this._inputDom.nodeAttributeSet('readOnly',false);}}},{key:'trimValue',get:function get(){return this._trimValue;},set:function set(val){this._trimValue=val;}},{key:'value',get:function get(){var val=this._inputDom.nodeAttributeGet('value');if(this._trimValue&&kijs.isString(val)){val=val.trim();}return val;},set:function set(val){this._inputDom.nodeAttributeSet('value',val);}}]);return kijs_gui_field_Memo;}(kijs.gui.field.Field);kijs.gui.field.Password=function(_kijs$gui$field$Field3){_inherits(kijs_gui_field_Password,_kijs$gui$field$Field3);function kijs_gui_field_Password(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_field_Password);var _this27=_possibleConstructorReturn(this,(kijs_gui_field_Password.__proto__||Object.getPrototypeOf(kijs_gui_field_Password)).call(this,false));_this27._inputDom=new kijs.gui.Dom({disableEnterEscBubbeling:true,nodeTagName:'password',nodeAttribute:{id:_this27._inputId}});_this27._disableBrowserSecurityWarning=false;_this27._passwordChar='•';_this27._trimValue=false;_this27._value=null;_this27._dom.clsAdd('kijs-field-password');Object.assign(_this27._configMap,{disableBrowserSecurityWarning:{target:'disableBrowserSecurityWarning'},passwordChar:true,trimValue:true});_this27._eventForwardsAdd('blur',_this27._inputDom);_this27._eventForwardsRemove('enterPress',_this27._dom);_this27._eventForwardsRemove('enterEscPress',_this27._dom);_this27._eventForwardsRemove('escPress',_this27._dom);_this27._eventForwardsAdd('enterPress',_this27._inputDom);_this27._eventForwardsAdd('enterEscPress',_this27._inputDom);_this27._eventForwardsAdd('escPress',_this27._inputDom);_this27.on('input',_this27._onInput,_this27);_this27._inputDom.on('input',_this27._onDomInput,_this27);if(kijs.isObject(config)){_this27.applyConfig(config,true);}return _this27;}
_createClass(kijs_gui_field_Password,[{key:'render',value:function render(preventAfterRender){if(this._disableBrowserSecurityWarning){this._inputDom.nodeTagName='input';this._inputDom.on('keyUp',this._onKeyUp,this);this._inputDom.on('mouseUp',this._onMouseUp,this);this._inputDom.on('input',this._onInput,this);}_get(kijs_gui_field_Password.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Password.prototype),'render',this).call(this,true);this._inputDom.renderTo(this._inputWrapperDom.node);if(!preventAfterRender){this.raiseEvent('afterRender');}}},{key:'unRender',value:function unRender(){this._inputDom.unRender();_get(kijs_gui_field_Password.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Password.prototype),'unRender',this).call(this);}},{key:'_reposCursor',value:function _reposCursor(){var val=this._inputDom.node.value;var len=val.length;if(this._inputDom.node.selectionStart===0&&this._inputDom.node.selectionEnd===len){}else if(this._inputDom.node.selectionStart===len&&this._inputDom.node.selectionEnd===len){}else{this._inputDom.node.selectionStart=0;this._inputDom.node.selectionEnd=len;}}},{key:'_onInput',value:function _onInput(e){this.validate();}},{key:'_onDomInput',value:function _onDomInput(e){if(this._disableBrowserSecurityWarning){var _val=this._inputDom.node.value;var len=_val.length;this._value=kijs.isEmpty(this._value)?'':this._value;var newChars=kijs.String.replaceAll(_val,this._passwordChar,'');if(_val===''){this.value='';}else if(_val.substr(0,1)!==this._passwordChar){this.value=newChars;}else if(_val.substr(len-1,1)!==this._passwordChar){var oldChars=this._value.substr(0,len-newChars.length);this.value=oldChars+newChars;}else if(len<this._value.length){this.value=this._value.substr(0,len);}}
e.eventName='input';return this.raiseEvent('input',e,this);}},{key:'_onKeyUp',value:function _onKeyUp(e){this._reposCursor();}},{key:'_onMouseUp',value:function _onMouseUp(e){kijs.defer(this._reposCursor,10,this);}},{key:'destruct',value:function destruct(preventDestructEvent){if(!preventDestructEvent){this.raiseEvent('destruct');}
if(this._inputDom){this._inputDom.destruct();}
this._inputDom=null;_get(kijs_gui_field_Password.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Password.prototype),'destruct',this).call(this,true);}},{key:'disableBrowserSecurityWarning',get:function get(){return this._disableBrowserSecurityWarning;},set:function set(val){if(val==='auto'){if(location.protocol!=='https:'&&kijs.isFirefox()){this.disableBrowserSecurityWarning=true;}else{this.disableBrowserSecurityWarning=false;}}else{this._disableBrowserSecurityWarning=!!val;}}},{key:'disabled',get:function get(){return _get(kijs_gui_field_Password.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Password.prototype),'disabled',this);},set:function set(val){_set(kijs_gui_field_Password.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Password.prototype),'disabled',!!val,this);if(val||this._dom.clsHas('kijs-readonly')){this._inputDom.nodeAttributeSet('readOnly',true);}else{this._inputDom.nodeAttributeSet('readOnly',false);}}},{key:'isEmpty',get:function get(){return kijs.isEmpty(this._inputDom.value);}},{key:'inputDom',get:function get(){return this._inputDom;}},{key:'passwordChar',get:function get(){return this._passwordChar;},set:function set(val){this._passwordChar=val;}},{key:'readOnly',get:function get(){return _get(kijs_gui_field_Password.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Password.prototype),'readOnly',this);},set:function set(val){_set(kijs_gui_field_Password.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Password.prototype),'readOnly',!!val,this);if(val||this._dom.clsHas('kijs-disabled')){this._inputDom.nodeAttributeSet('readOnly',true);}else{this._inputDom.nodeAttributeSet('readOnly',false);}}},{key:'trimValue',get:function get(){return this._trimValue;},set:function set(val){this._trimValue=val;}},{key:'value',get:function get(){var val=void 0;if(this._disableBrowserSecurityWarning){val=this._value;}else{val=this._inputDom.nodeAttributeGet('value');}if(this._trimValue&&kijs.isString(val)){val=val.trim();}return val;},set:function set(val){if(this._disableBrowserSecurityWarning){var oldValue=this.value;this._value=val;this._inputDom.nodeAttributeSet('value',kijs.isEmpty(val)?'':val.replace(/./g,this._passwordChar));if(this._value!==oldValue){this.raiseEvent('change',{eventName:'change',value:val,oldValue:oldValue},this);}}else{this._inputDom.nodeAttributeSet('value',val);}}}]);return kijs_gui_field_Password;}(kijs.gui.field.Field);kijs.gui.field.Checkbox=function(_kijs$gui$field$Field4){_inherits(kijs_gui_field_Checkbox,_kijs$gui$field$Field4);function kijs_gui_field_Checkbox(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_field_Checkbox);var _this28=_possibleConstructorReturn(this,(kijs_gui_field_Checkbox.__proto__||Object.getPrototypeOf(kijs_gui_field_Checkbox)).call(this,false));_this28._captionHide=false;_this28._checked=0;_this28._checkedIconChar='&#xf046';_this28._checkedIconCls=null;_this28._determinatedIconChar='&#xf147';_this28._determinatedIconCls=null;_this28._uncheckedIconChar='&#xf096';_this28._uncheckedIconCls=null;_this28._threeState=false;_this28._valueChecked=true;_this28._valueDeterminated=2;_this28._valueUnchecked=false;_this28._inputWrapperDom.nodeAttributeSet('tabIndex',0);_this28._checkboxIconEl=new kijs.gui.Icon({parent:_this28,cls:'kijs-checkbox-input'});_this28._iconEl=new kijs.gui.Icon({parent:_this28,cls:'kijs-checkbox-icon'});_this28._captionDom=new kijs.gui.Dom({cls:'kijs-caption',nodeTagName:'span'});_this28._dom.clsAdd('kijs-field-checkbox');Object.assign(_this28._configMap,{caption:{target:'html',context:_this28._captionDom},captionCls:{fn:'function',target:_this28._captionDom.clsAdd,context:_this28._captionDom},captionHide:true,captionHtmlDisplayType:{target:'htmlDisplayType',context:_this28._captionDom},captionStyle:{fn:'assign',target:'style',context:_this28._captionDom},captionWidth:{target:'captionWidth'},checkedIconChar:true,checkedIconCls:true,determinatedIconChar:true,determinatedIconCls:true,uncheckedIconChar:true,uncheckedIconCls:true,icon:{target:'icon'},iconChar:{target:'iconChar',context:_this28._iconEl},iconCls:{target:'iconCls',context:_this28._iconEl},iconColor:{target:'iconColor',context:_this28._iconEl},threeState:{prio:1001,target:'_threeState'},valueChecked:{prio:1002,target:'_valueChecked'},valueUnchecked:{prio:1002,target:'_valueUnchecked'},valueDeterminated:{prio:1002,target:'_valueDeterminated'},value:{prio:1003,target:'value'},checked:{prio:1004,target:'checked'}});_this28._eventForwardsAdd('focus',_this28._inputWrapperDom);_this28._eventForwardsAdd('blur',_this28._inputWrapperDom);_this28._inputWrapperDom.on('click',_this28._onClick,_this28);_this28._inputWrapperDom.on('spacePress',_this28._onSpacePress,_this28);if(kijs.isObject(config)){_this28.applyConfig(config,true);}return _this28;}
_createClass(kijs_gui_field_Checkbox,[{key:'render',value:function render(preventAfterRender){_get(kijs_gui_field_Checkbox.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Checkbox.prototype),'render',this).call(this,true);this._checkboxIconEl.renderTo(this._inputWrapperDom.node);this._updateCheckboxIcon();if(!this._iconEl.isEmpty){this._iconEl.renderTo(this._inputWrapperDom.node);}else{this._iconEl.unRender();}
if(!this._captionHide){this._captionDom.renderTo(this._inputWrapperDom.node);}else{this._captionDom.unRender();}
if(!preventAfterRender){this.raiseEvent('afterRender');}}},{key:'unRender',value:function unRender(){this._checkboxIconEl.unRender();this._iconEl.unRender();this._captionDom.unRender();_get(kijs_gui_field_Checkbox.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Checkbox.prototype),'unRender',this).call(this);}},{key:'_updateCheckboxIcon',value:function _updateCheckboxIcon(){var cls=void 0,iconChar=void 0,iconCls=void 0;switch(this._checked){case 0:cls='kijs-unchecked';iconChar=this._uncheckedIconChar;iconCls=this._uncheckedIconCls;break;case 1:cls='kijs-checked';iconChar=this._checkedIconChar;iconCls=this._checkedIconCls;break;case 2:cls='kijs-determinated';iconChar=this._determinatedIconChar;iconCls=this._determinatedIconCls;break;}this._dom.clsRemove(['kijs-checked','kijs-determinated','kijs-unchecked']);this._dom.clsAdd(cls);this._checkboxIconEl.iconChar=iconChar;this._checkboxIconEl.iconCls=iconCls;}},{key:'_onClick',value:function _onClick(e){if(!this.readOnly&&!this.disabled){var oldChecked=this._checked;var oldValue=this.value;this._checked++;if(this._threeState){if(this._checked>2){this._checked=0;}}else{if(this._checked>1){this._checked=0;}}this._updateCheckboxIcon();this._checkboxIconEl.focus();this.validate();this.raiseEvent('input',{oldChecked:oldChecked,checked:this._checked,oldValue:oldValue,value:this.value});}}},{key:'_onSpacePress',value:function _onSpacePress(e){if(!this.readOnly&&!this.disabled){var oldChecked=this._checked;var oldValue=this.value;this._checked++;if(this._threeState){if(this._checked>2){this._checked=0;}}else{if(this._checked>1){this._checked=0;}}this._updateCheckboxIcon();this.validate();this.raiseEvent('input',{oldChecked:oldChecked,checked:this._checked,oldValue:oldValue,value:this.value});}
e.nodeEvent.preventDefault();}},{key:'destruct',value:function destruct(preventDestructEvent){if(!preventDestructEvent){this.raiseEvent('destruct');}
if(this._checkboxIconEl){this._checkboxIconEl.destruct();}if(this._iconEl){this._iconEl.destruct();}if(this._captionDom){this._captionDom.destruct();}
this._checkboxIconEl=null;this._iconEl=null;this._captionDom=null;_get(kijs_gui_field_Checkbox.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Checkbox.prototype),'destruct',this).call(this,true);}},{key:'caption',get:function get(){return this._captionDom.html;},set:function set(val){this._captionDom.html=val;}},{key:'captionHide',get:function get(){return this._captionHide;},set:function set(val){this._captionHide=val;if(this.isRendered){if(val){this._captionDom.renderTo(this._inputWrapperDom.node,this._inputDom.node);}else{this._captionDom.unRender();}}}},{key:'captionDom',get:function get(){return this._captionDom;}},{key:'captionHtmlDisplayType',get:function get(){return this._captionDom.htmlDisplayType;},set:function set(val){this._captionDom.htmlDisplayType=val;}},{key:'captionWidth',get:function get(){return this._captionDom.width;},set:function set(val){this._captionDom.width=val;}},{key:'checked',get:function get(){return this._checked;},set:function set(val){if(val===2||val==='2'){this._checked=2;}else if(val===1||val==='1'||val===true){this._checked=1;}else if(val===0||val==='0'||val===false||kijs.isEmpty(val)){this._checked=0;}else{throw new Error('config "checked" is not valid.');}this._updateCheckboxIcon();}},{key:'checkboxIcon',get:function get(){return this._checkboxIconEl;}},{key:'icon',get:function get(){return this._iconEl;},set:function set(val){if(kijs.isEmpty(val)){this._iconEl.iconChar=null;this._iconEl.iconCls=null;this._iconEl.iconColor=null;if(this.isRendered){this.render();}}else if(val instanceof kijs.gui.Icon){this._iconEl.destruct();this._iconEl=val;if(this.isRendered){this.render();}}else if(kijs.isObject(val)){this._iconEl.applyConfig(val);if(this.isRendered){this.render();}}else{throw new Error('config "icon" is not valid.');}}},{key:'iconChar',get:function get(){return this._iconEl.iconChar;},set:function set(val){this._iconEl.iconChar=val;if(this.isRendered){this.render();}}},{key:'iconCls',get:function get(){return this._iconEl.iconCls;},set:function set(val){this._iconEl.iconCls=val;if(this.isRendered){this.render();}}},{key:'iconColor',get:function get(){return this._iconEl.iconColor;},set:function set(val){this._iconEl.iconColor=val;if(this.isRendered){this.render();}}},{key:'isEmpty',get:function get(){return kijs.isEmpty(this._checked===0);}},{key:'threeState',get:function get(){return this._threeState;},set:function set(val){this._threeState=val;}},{key:'value',get:function get(){switch(this._checked){case 0:return this._valueUnchecked;case 1:return this._valueChecked;case 2:return this._valueDeterminated;}},set:function set(val){if(val===this._valueUnchecked){this._checked=0;}else if(val===this._valueChecked){this._checked=1;}else if(val===this._valueDeterminated){this._checked=2;}else{throw new Error('config "value" is not valid.');}this._updateCheckboxIcon();}},{key:'valueChecked',get:function get(){return this._valueChecked;},set:function set(val){this._valueChecked=val;}},{key:'valueDeterminated',get:function get(){return this._valueDeterminated;},set:function set(val){this._valueDeterminated=val;}},{key:'valueUnchecked',get:function get(){return this._valueUnchecked;},set:function set(val){this._valueUnchecked=val;}}]);return kijs_gui_field_Checkbox;}(kijs.gui.field.Field);kijs.gui.field.CheckboxGroup=function(_kijs$gui$field$Field5){_inherits(kijs_gui_field_CheckboxGroup,_kijs$gui$field$Field5);function kijs_gui_field_CheckboxGroup(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_field_CheckboxGroup);var _this29=_possibleConstructorReturn(this,(kijs_gui_field_CheckboxGroup.__proto__||Object.getPrototypeOf(kijs_gui_field_CheckboxGroup)).call(this,false));_this29._captionField=null;_this29._captionHtmlDisplayType='html';_this29._valueField=null;_this29._iconCharField=null;_this29._iconClsField=null;_this29._iconColorField=null;_this29._checkedIconChar='&#xf046';_this29._checkedIconCls=null;_this29._uncheckedIconChar='&#xf096';_this29._uncheckedIconCls=null;_this29._checkboxElements=[];_this29._data=[];_this29._oldValue=[];_this29._dom.clsAdd('kijs-field-checkboxgroup');Object.assign(_this29._configMap,{autoLoad:{target:'autoLoad'},captionHtmlDisplayType:true,checkedIconChar:true,checkedIconCls:true,uncheckedIconChar:true,uncheckedIconCls:true,data:{target:'data'},facadeFnLoad:true,rpc:{target:'rpc'},captionField:true,iconCharField:true,iconClsField:true,iconColorField:true,valueField:true});if(kijs.isObject(config)){_this29.applyConfig(config,true);}return _this29;}
_createClass(kijs_gui_field_CheckboxGroup,[{key:'load',value:function load(args){this._rpc.do(this._facadeFnLoad,args,function(response){this.data=response.rows;},this,true,this,'dom',false);}},{key:'render',value:function render(preventAfterRender){_get(kijs_gui_field_CheckboxGroup.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_CheckboxGroup.prototype),'render',this).call(this,true);if(!preventAfterRender){this.raiseEvent('afterRender');}if(this._data){this.data=this._data;}
if(!preventAfterRender){this.raiseEvent('afterRender');}}},{key:'unRender',value:function unRender(){kijs.Array.each(this._checkboxElements,function(el){el.destruct();},this);_get(kijs_gui_field_CheckboxGroup.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_CheckboxGroup.prototype),'unRender',this).call(this);}},{key:'_onAfterFirstRenderTo',value:function _onAfterFirstRenderTo(e){this.load();}},{key:'_onCheckboxElementInput',value:function _onCheckboxElementInput(e){var val=this.value;this._value=val;this.raiseEvent('input',{oldValue:this._oldValue,value:val});this._oldValue=val;}},{key:'destruct',value:function destruct(preventDestructEvent){if(!preventDestructEvent){this.raiseEvent('destruct');}
kijs.Array.each(this._checkboxElements,function(el){el.destruct();},this);this._checkboxElements=null;this._data=null;this._oldValue=null;_get(kijs_gui_field_CheckboxGroup.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_CheckboxGroup.prototype),'destruct',this).call(this,true);}},{key:'autoLoad',get:function get(){return this.hasListener('afterFirstRenderTo',this._onAfterFirstRenderTo,this);},set:function set(val){if(val){this.on('afterFirstRenderTo',this._onAfterFirstRenderTo,this);}else{this.off('afterFirstRenderTo',this._onAfterFirstRenderTo,this);}}},{key:'captionField',get:function get(){return this._captionField;},set:function set(val){this._captionField=val;}},{key:'valueField',get:function get(){return this._valueField;},set:function set(val){this._valueField=val;}},{key:'data',get:function get(){return this._data;},set:function set(val){this._data=val;kijs.Array.each(this._checkboxElements,function(el){el.destruct();},this);this._checkboxElements=[];kijs.Array.each(this._data,function(row){var el=new kijs.gui.field.Checkbox({captionHtmlDisplayType:this._captionHtmlDisplayType,checkedIconChar:this._checkedIconChar,checkedIconCls:this._checkedIconCls,uncheckedIconChar:this._uncheckedIconChar,uncheckedIconCls:this._uncheckedIconCls,caption:this._captionField&&row[this._captionField]?row[this._captionField]:'',iconChar:this._iconCharField&&row[this._iconCharField]?row[this._iconCharField]:'',iconCls:this._iconClsField&&row[this._iconClsField]?row[this._iconClsField]:'',iconColor:this._iconColorField&&row[this._iconColorField]?row[this._iconColorField]:undefined,valueChecked:row[this._valueField],valueUnchecked:null,labelHide:true,threeState:false});el.on('input',this._onCheckboxElementInput,this);this._checkboxElements.push(el);},this);this.value=this._value;if(this._inputWrapperDom.isRendered){kijs.Array.each(this._checkboxElements,function(el){el.renderTo(this._inputWrapperDom.node);},this);}}},{key:'disabled',get:function get(){return _get(kijs_gui_field_CheckboxGroup.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_CheckboxGroup.prototype),'disabled',this);},set:function set(val){_set(kijs_gui_field_CheckboxGroup.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_CheckboxGroup.prototype),'disabled',!!val,this);kijs.Array.each(this._checkboxElements,function(el){el.disabled=!!val;},this);}},{key:'facadeFnLoad',get:function get(){return this._facadeFnLoad;},set:function set(val){this._facadeFnLoad=val;}},{key:'isEmpty',get:function get(){return kijs.isEmpty(this.value);}},{key:'readOnly',get:function get(){return _get(kijs_gui_field_CheckboxGroup.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_CheckboxGroup.prototype),'readOnly',this);},set:function set(val){_set(kijs_gui_field_CheckboxGroup.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_CheckboxGroup.prototype),'readOnly',!!val,this);kijs.Array.each(this._checkboxElements,function(el){el.readOnly=!!val;},this);}},{key:'rpc',get:function get(){return this._rpc;},set:function set(val){if(val instanceof kijs.gui.Rpc){this._rpc=val;}else if(kijs.isString(val)){if(this._rpc){this._rpc.url=val;}else{this._rpc=new kijs.gui.Rpc({url:val});}}else{throw new Error('Unkown format on config "rpc"');}}},{key:'value',get:function get(){if(!kijs.isEmpty(this._checkboxElements)){var value=[];kijs.Array.each(this._checkboxElements,function(el){var val=el.value;if(!kijs.isEmpty(val)){value.push(val);}},this);this._value=value;}return this._value;},set:function set(val){if(kijs.isEmpty(val)){val=[];}else if(!kijs.isArray(val)){val=[val];}this._value=val;this._oldValue=val;kijs.Array.each(this._checkboxElements,function(el){el.checked=kijs.Array.contains(val,el.valueChecked)?1:0;},this);}}]);return kijs_gui_field_CheckboxGroup;}(kijs.gui.field.Field);kijs.gui.field.OptionGroup=function(_kijs$gui$field$Check){_inherits(kijs_gui_field_OptionGroup,_kijs$gui$field$Check);function kijs_gui_field_OptionGroup(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_field_OptionGroup);var _this30=_possibleConstructorReturn(this,(kijs_gui_field_OptionGroup.__proto__||Object.getPrototypeOf(kijs_gui_field_OptionGroup)).call(this,false));config=Object.assign({},{checkedIconChar:'&#xf05d',uncheckedIconChar:'&#xf10c'},config);if(kijs.isObject(config)){_this30.applyConfig(config,true);}return _this30;}
_createClass(kijs_gui_field_OptionGroup,[{key:'_onCheckboxElementInput',value:function _onCheckboxElementInput(e){if(e.checked===0){e.element.checked=1;return;}
kijs.Array.each(this._checkboxElements,function(el){if(e.element!==el){el.checked=0;}},this);var val=e.value;this._value=[val];this.raiseEvent('input',{oldValue:kijs.isEmpty(this._oldValue)?null:this._oldValue[0],value:kijs.isEmpty(val)?null:val});this._oldValue=[val];}},{key:'value',get:function get(){var val=_get(kijs_gui_field_OptionGroup.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_OptionGroup.prototype),'value',this);if(kijs.isEmpty(val)){return null;}else{return val[0];}},set:function set(val){_set(kijs_gui_field_OptionGroup.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_OptionGroup.prototype),'value',val,this);}}]);return kijs_gui_field_OptionGroup;}(kijs.gui.field.CheckboxGroup);kijs.gui.field.Combo=function(_kijs$gui$field$Field6){_inherits(kijs_gui_field_Combo,_kijs$gui$field$Field6);function kijs_gui_field_Combo(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kijs_gui_field_Combo);var _this31=_possibleConstructorReturn(this,(kijs_gui_field_Combo.__proto__||Object.getPrototypeOf(kijs_gui_field_Combo)).call(this,false));_this31._captionField=null;_this31._data=[];_this31._facadeFnLoad=null;_this31._optionCaptionDisplayType=null;_this31._rpc=null;_this31._valueField=null;_this31._value=null;_this31._inputDom=new kijs.gui.Dom({disableEnterEscBubbeling:true,nodeTagName:'select',nodeAttribute:{id:_this31._inputId}});_this31._dom.clsAdd('kijs-field-combo');config=Object.assign({},{captionField:'caption',optionCaptionDisplayType:'code',size:1,valueField:'value'},config);Object.assign(_this31._configMap,{autoLoad:{target:'autoLoad'},captionField:true,data:{target:'data'},facadeFnLoad:true,multiselect:{target:'multiselect'},optionCaptionDisplayType:true,rpc:{target:'rpc'},size:{target:'size'},valueField:true});_this31._eventForwardsAdd('input',_this31._inputDom);_this31._eventForwardsAdd('blur',_this31._inputDom);_this31._eventForwardsRemove('enterPress',_this31._dom);_this31._eventForwardsRemove('enterEscPress',_this31._dom);_this31._eventForwardsRemove('escPress',_this31._dom);_this31._eventForwardsAdd('enterPress',_this31._inputDom);_this31._eventForwardsAdd('enterEscPress',_this31._inputDom);_this31._eventForwardsAdd('escPress',_this31._inputDom);_this31.on('input',_this31._onInput,_this31);if(kijs.isObject(config)){_this31.applyConfig(config,true);}return _this31;}
_createClass(kijs_gui_field_Combo,[{key:'load',value:function load(args){this._rpc.do(this._facadeFnLoad,args,function(response){this.data=response.rows;},this,true,this,'dom',false);}},{key:'render',value:function render(preventAfterRender){_get(kijs_gui_field_Combo.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Combo.prototype),'render',this).call(this,true);this._inputDom.renderTo(this._inputWrapperDom.node);if(!preventAfterRender){this.raiseEvent('afterRender');}if(this._data){this.data=this._data;}if(!kijs.isEmpty(this._value)){this.value=this._value;}}},{key:'unRender',value:function unRender(){this._inputDom.unRender();_get(kijs_gui_field_Combo.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Combo.prototype),'unRender',this).call(this);}},{key:'_onAfterFirstRenderTo',value:function _onAfterFirstRenderTo(e){this.load();}},{key:'_onInput',value:function _onInput(e){this._value=this.value;this.validate();}},{key:'destruct',value:function destruct(preventDestructEvent){if(!preventDestructEvent){this.raiseEvent('destruct');}
if(this._inputDom){this._inputDom.destruct();}
this._data=null;this._inputDom=null;this._rpc=null;_get(kijs_gui_field_Combo.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Combo.prototype),'destruct',this).call(this,true);}},{key:'autoLoad',get:function get(){return this.hasListener('afterFirstRenderTo',this._onAfterFirstRenderTo,this);},set:function set(val){if(val){this.on('afterFirstRenderTo',this._onAfterFirstRenderTo,this);}else{this.off('afterFirstRenderTo',this._onAfterFirstRenderTo,this);}}},{key:'captionField',get:function get(){return this._captionField;},set:function set(val){this._captionField=val;}},{key:'valueField',get:function get(){return this._valueField;},set:function set(val){this._valueField=val;}},{key:'data',get:function get(){return this._data;},set:function set(val){this._data=val;if(this._inputDom.isRendered){kijs.Dom.removeAllChildNodes(this._inputDom.node);kijs.Array.each(this._data,function(row){var opt=document.createElement('option');kijs.Dom.setInnerHtml(opt,row[this._captionField],this._optionCaptionDisplayType);opt.value=row[this._valueField];this._inputDom.node.appendChild(opt);},this);this.value=this._value;}}},{key:'disabled',get:function get(){return _get(kijs_gui_field_Combo.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Combo.prototype),'disabled',this);},set:function set(val){_set(kijs_gui_field_Combo.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Combo.prototype),'disabled',!!val,this);if(val||this._dom.clsHas('kijs-readonly')){this._inputDom.nodeAttributeSet('disabled',true);}else{this._inputDom.nodeAttributeSet('disabled',false);}}},{key:'facadeFnLoad',get:function get(){return this._facadeFnLoad;},set:function set(val){this._facadeFnLoad=val;}},{key:'isEmpty',get:function get(){return kijs.isEmpty(this._inputDom.value);}},{key:'inputDom',get:function get(){return this._inputDom;}},{key:'multiselect',get:function get(){return!!this._inputDom.nodeAttributeGet('multiple');},set:function set(val){this._inputDom.nodeAttributeSet('multiple',!!val);}},{key:'readOnly',get:function get(){return _get(kijs_gui_field_Combo.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Combo.prototype),'readOnly',this);},set:function set(val){_set(kijs_gui_field_Combo.prototype.__proto__||Object.getPrototypeOf(kijs_gui_field_Combo.prototype),'readOnly',!!val,this);if(val||this._dom.clsHas('kijs-disabled')){this._inputDom.nodeAttributeSet('disabled',true);}else{this._inputDom.nodeAttributeSet('disabled',false);}}},{key:'rpc',get:function get(){return this._rpc;},set:function set(val){if(val instanceof kijs.gui.Rpc){this._rpc=val;}else if(kijs.isString(val)){if(this._rpc){this._rpc.url=val;}else{this._rpc=new kijs.gui.Rpc({url:val});}}else{throw new Error('Unkown format on config "rpc"');}}},{key:'size',get:function get(){return this._inputDom.nodeAttributeGet('size');},set:function set(val){this._inputDom.nodeAttributeSet('size',val);}},{key:'value',get:function get(){return this._inputDom.nodeAttributeGet('value');},set:function set(val){this._value=val;this._inputDom.nodeAttributeSet('value',val);}}]);return kijs_gui_field_Combo;}(kijs.gui.field.Field);window.kit={};kit.App=function(){function kit_App(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kit_App);var rpcConfig={};if(config.ajaxUrl){rpcConfig.url=config.ajaxUrl;}this._rpc=new kijs.gui.Rpc(rpcConfig);}
_createClass(kit_App,[{key:'run',value:function run(){var _this=this;var viewport=new kijs.gui.ViewPort({cls:'kijs-flexcolumn',elements:[{xtype:'kijs.gui.Panel',caption:'kijs the new aera of multidevice apps',iconCls:'icoWizard16',collapsible:'top',collapsed:true,height:300,style:{margin:'0 0 4px 0'},headerBarElements:[{xtype:'kijs.gui.Button',iconChar:'&#xf059'},{xtype:'kijs.gui.Button',iconChar:'&#xf059',disabled:true}],elements:[]},{xtype:'kijs.gui.Container',cls:'kijs-flexrow',style:{flex:1,minHeight:'40px'},elements:[{xtype:'kijs.gui.Panel',caption:'Navigation',iconChar:'&#xf110',iconCls:'kijs-pulse',collapsible:'left',width:180,cls:'kijs-flexcolumn',elements:[]},{xtype:'kijs.gui.Splitter',targetPos:'left'},{xtype:'kijs.gui.Panel',caption:'Formular',iconChar:'&#xf2bc',footerCaption:'FooterBar',style:{flex:1,minWidth:'40px'},innerStyle:{padding:'10px',overflowY:'auto'},headerBarElements:[{xtype:'kijs.gui.Button',iconChar:'&#xf085'}],headerElements:[{xtype:'kijs.gui.ButtonGroup',caption:'Funktionen',width:240,height:150,innerStyle:{columnCount:3},elements:[{xtype:'kijs.gui.Button',caption:'Neu',iconChar:'&#xf0c7',height:120},{xtype:'kijs.gui.Button',caption:'Duplizieren',iconChar:'&#xf0c7'},{xtype:'kijs.gui.Button',caption:'Aktionen',iconChar:'&#xf02f'},{xtype:'kijs.gui.Button',caption:'Löschen',iconChar:'&#xf0c7'},{xtype:'kijs.gui.Button',caption:'Address Load',on:{click:function click(){}}}]}],elements:[{xtype:'kijs.gui.FormPanel',name:'addressPanel',caption:'Adresse',closable:true,collapsible:'top',resizable:true,height:300,shadow:true,autoLoad:false,rpc:this._rpc,waitMaskTargetDomProperty:'innerDom',facadeFnLoad:'address.load',facadeFnSave:'address.save',innerStyle:{padding:'10px',overflowY:'auto'},defaults:{labelWidth:120,required:true,maxLength:50,style:{marginBottom:'4px'}},elements:[{xtype:'kijs.gui.field.Password',name:'Passwort',label:'Passwort',disableBrowserSecurityWarning:false,width:200,on:{input:function input(e){this.parent.down('Feld 1').value=this.value;}}},{xtype:'kijs.gui.field.Checkbox',name:'Checkbox',label:'Checkbox',caption:'Caption',threeState:true,width:250,on:{input:function input(e){console.log('input:'+this.value);}},elements:[{xtype:'kijs.gui.Button',iconChar:'&#xf0d0',toolTip:'test',on:{click:function click(){this.upX('kijs.gui.field.Checkbox').checked=2;}}}]},{xtype:'kijs.gui.field.Checkbox',name:'CheckboxIcon',label:'... mit Icon',iconCls:'icoWizard16',caption:'Caption',checked:1,width:250},{xtype:'kijs.gui.field.Checkbox',name:'CheckboxColor',label:'... mit Farbe',iconChar:'&#xf111',iconColor:'#ff8800',caption:'Caption',width:250},{xtype:'kijs.gui.field.Checkbox',name:'CheckboxOption',label:'... als Option',caption:'Caption',checkedIconChar:'&#xf05d',uncheckedIconChar:'&#xf10c',determinatedIconChar:'&#xf111',valueChecked:'Ein',valueDeterminated:'wedernoch',valueUnchecked:'Aus',value:'Ein',width:250,on:{input:function input(e){console.log('input:'+this.value);}},elements:[{xtype:'kijs.gui.Button',iconChar:'&#xf0d0',toolTip:'test',on:{click:function click(){var chkBox=this.upX('kijs.gui.field.Checkbox');console.log(chkBox.value);chkBox.checked=2;console.log(chkBox.value);}}}]},{xtype:'kijs.gui.field.CheckboxGroup',name:'CheckboxGroup',label:'CheckboxGroup',valueField:'id',captionField:'Bezeichnung',iconCharField:'Icon',iconColorField:'Color',helpText:'Hilfe Text!',data:[{id:1,Bezeichnung:'blau',Icon:'&#xf111',Color:'#0088ff'},{id:2,Bezeichnung:'grün',Icon:'&#xf111',Color:'#88ff00'},{id:3,Bezeichnung:'pink',Icon:'&#xf111',Color:'#ff0088'}],value:[2,3],on:{input:function input(e){console.log(e);}},elements:[{xtype:'kijs.gui.Button',iconChar:'&#xf0d0',toolTip:'test',on:{click:function click(){var val=this.parent.value;if(kijs.isEmpty(val)){val=0;}else{val=val[0];}val++;if(val>3){val=null;}if(!kijs.isEmpty(val)){val=[val];}this.parent.value=val;}}}]},{xtype:'kijs.gui.field.CheckboxGroup',name:'CheckboxGroupInline',label:'CheckboxGroup Inline',cls:'kijs-inline',valueField:'color',captionField:'Bez',iconCharField:'iconChar',iconColorField:'color',rpc:this._rpc,facadeFnLoad:'color.load',autoLoad:true,value:['#0f0','#ff0'],on:{input:function input(e){console.log(e);}}},{xtype:'kijs.gui.field.OptionGroup',name:'OptionGroupInline',label:'OptionGroup Inline',cls:'kijs-inline',valueField:'id',captionField:'Bezeichnung',iconCharField:'Icon',iconColorField:'Color',data:[{id:1,Bezeichnung:'blau',Icon:'&#xf111',Color:'#0088ff'},{id:2,Bezeichnung:'grün',Icon:'&#xf111',Color:'#88ff00'},{id:3,Bezeichnung:'pink',Icon:'&#xf111',Color:'#ff0088'}],value:2,on:{input:function input(e){console.log('oldValue:'+e.oldValue+' value:'+e.value);}}},{xtype:'kijs.gui.field.Text',name:'Feld 1',label:'Feld <b>1</b>',labelHtmlDisplayType:'html',value:'Hallo Welt 1',helpText:'Hilfe Text!',elements:[{xtype:'kijs.gui.Button',iconChar:'&#xf0d0',toolTip:'Feld leeren',on:{click:function click(){this.parent.value='';}}}]},{xtype:'kijs.gui.field.Text',name:'Feld 2',label:'Feld <b>2</b>',labelHtmlDisplayType:'code',value:'Hallo Welt 2',elements:[{xtype:'kijs.gui.Button',iconChar:'&#xf0d0',caption:'neuer Wert',on:{click:function click(){this.parent.value='neuer Wert';}}}]},new kijs.gui.field.Text({name:'Feld 3',label:'Feld <b>3</b>',labelWidth:120,labelHtmlDisplayType:'text'}),{xtype:'kijs.gui.field.Combo',name:'Anrede',label:'Anrede',optionCaptionDisplayType:'html',value:'w',data:[{caption:'Herr',value:'m'},{caption:'Frau',value:'w'},{caption:'Familie',value:'f'}],elements:[{xtype:'kijs.gui.Button',iconChar:'&#xf00d',on:{click:function click(){this.parent.value='';}}}]},{xtype:'kijs.gui.field.Combo',name:'Land',label:'Land',rpc:this._rpc,facadeFnLoad:'land.load',autoLoad:true,value:'CH'},{xtype:'kijs.gui.field.Memo',name:'Bemerkungen',label:'Bemerkungen (test)',value:'Dieses Bemerkungsfeld hat\nmehrere Zeilen!',helpText:'Bitte geben Sie hier Ihre Bemerkungen ein!'}],footerStyle:{padding:'10px'},footerElements:[{xtype:'kijs.gui.Button',caption:'Menü',iconChar:'&#xf0d7',on:{click:function click(){}}},{xtype:'kijs.gui.Button',caption:'Menü',iconChar:'&#xf0d8',on:{click:function click(){}}},{xtype:'kijs.gui.Button',name:'btnLoad',caption:'RPC Load',on:{click:function click(){this.upX('kijs.gui.FormPanel').load();}}},{xtype:'kijs.gui.Button',caption:'Validieren',toolTip:'Da darfst Du nicht draufdrücken!',on:{click:function click(){this.toolTip='Nein, er hat es tatsächlich getan!';kijs.Array.each(this.parent.parent.elements,function(element){if(element instanceof kijs.gui.field.Field){element.validate();}},this);}}},{xtype:'kijs.gui.Button',name:'btnReadOnly',caption:'ReadOnly',on:{click:function click(){kijs.Array.each(this.parent.parent.elements,function(element){if(element instanceof kijs.gui.field.Field){element.readOnly=true;}},this);this.disabled=true;this.parent.down('btnEnable').disabled=false;}}},{xtype:'kijs.gui.Button',name:'btnDisable',caption:'Deaktivieren',on:{click:function click(){kijs.Array.each(this.parent.parent.elements,function(element){if(element instanceof kijs.gui.field.Field){element.disabled=true;}},this);this.disabled=true;this.parent.down('btnEnable').disabled=false;}}},{xtype:'kijs.gui.Button',name:'btnEnable',caption:'Aktivieren',disabled:true,on:{click:function click(){kijs.Array.each(this.parent.parent.elements,function(element){if(element instanceof kijs.gui.field.Field){element.readOnly=false;element.disabled=false;}},this);this.disabled=true;this.parent.down('btnReadOnly').disabled=false;this.parent.down('btnDisable').disabled=false;}}},{xtype:'kijs.gui.Button',name:'btnRpc',caption:'RPC',on:{click:function click(){_this._rpc.do('test.test','data',function(response){},_this,true,this.parent.parent,'innerDom');}}}]},{xtype:'kijs.gui.FormPanel',rpc:this._rpc,facadeFnLoad:'test.load',facadeFnSave:'test.save',shadow:true,style:{marginTop:'10px'},innerStyle:{padding:'10px',overflowY:'auto'},defaults:{labelWidth:100,required:true,maxLength:50,style:{marginBottom:'4px'}},on:{afterSave:function afterSave(e){kijs.gui.CornerTipContainer.show('Info','Speichern erfolgreich.','info');},enterPress:function enterPress(e){console.log("Panel: enterPress");}},elements:[{xtype:'kijs.gui.field.Memo',name:'Bemerkungen',label:'Bemerkungen (test)',value:'Dieses Bemerkungsfeld hat\nmehrere Zeilen!',helpText:'Bitte geben Sie hier Ihre Bemerkungen ein!',height:100,on:{enterPress:function enterPress(e){console.log('Memo: enterPress');}}}],footerStyle:{padding:'10px'},footerElements:[{xtype:'kijs.gui.Button',name:'btnLoad',caption:'Load',on:{click:function click(){this.parent.parent.load(1);}}},{xtype:'kijs.gui.Button',name:'btnSave',caption:'Save',on:{click:function click(){this.parent.parent.save(1);}}}]},{xtype:'kijs.gui.Panel',caption:'Panel 2',closable:true,collapsible:'top',resizable:true,maximizable:true,height:200,shadow:true,cls:'kijs-flexrow',style:{marginTop:'10px'},elements:[{xtype:'kijs.gui.DataView',selectType:'multi',rpc:this._rpc,autoLoad:true,facadeFnLoad:'dataview.load',waitMaskTargetDomProperty:'innerDom',style:{flex:1},innerStyle:{padding:'10px',overflowY:'auto'}}],footerStyle:{padding:'10px'},footerElements:[{xtype:'kijs.gui.Button',caption:'Alert',on:{click:function click(){kijs.gui.MsgBox.alert('Test','Alert! Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans... Hans geht fischen. So fischt Hans...',function(e,el){kijs.gui.MsgBox.alert('Es wurde geklickt auf',e.btn);});}}},{xtype:'kijs.gui.Button',caption:'Info',on:{click:function click(){kijs.gui.MsgBox.info('Test','Info!',function(e){kijs.gui.MsgBox.alert('Es wurde geklickt auf',e.btn);});}}},{xtype:'kijs.gui.Button',caption:'Warning',on:{click:function click(){kijs.gui.MsgBox.warning('Test','Warning!',function(e){kijs.gui.MsgBox.alert('Es wurde geklickt auf',e.btn);});}}},{xtype:'kijs.gui.Button',caption:'Error',on:{click:function click(){kijs.gui.MsgBox.error('Test','Error!',function(e){kijs.gui.MsgBox.alert('Es wurde geklickt auf',e.btn);});}}},{xtype:'kijs.gui.Button',caption:'Confirm',on:{click:function click(){kijs.gui.MsgBox.confirm('Test','Confirm!',function(e){kijs.gui.MsgBox.alert('Es wurde geklickt auf ',e.btn);});}}},{xtype:'kijs.gui.Button',caption:'CornerTip',on:{click:function click(){if(!this.___cornerTipIcon||this.___cornerTipIcon==='error'){this.___cornerTipIcon='alert';}else if(this.___cornerTipIcon==='alert'){this.___cornerTipIcon='info';}else if(this.___cornerTipIcon==='info'){this.___cornerTipIcon='warning';}else if(this.___cornerTipIcon==='warning'){this.___cornerTipIcon='error';}kijs.gui.CornerTipContainer.show('Test','Meine Nachricht!',this.___cornerTipIcon);},context:this}}]}],footerStyle:{padding:'10px'},footerElements:[{xtype:'kijs.gui.Button',caption:'Fenster',iconChar:'&#xf2d0',on:{click:function click(){var window=new kijs.gui.Window({caption:'Fenster',iconChar:'&#xf2d0',collapsible:'top',modal:false,height:200,width:250,innerStyle:{padding:'10px'},elements:[],footerStyle:{padding:'10px'},footerElements:[{xtype:'kijs.gui.Button',caption:'OK',isDefault:true,on:{click:function click(){kijs.gui.MsgBox.warning('Warnung','Wirklich schliessen?',function(e){if(e.btn==='ok'){window.destruct();}});}}}]});window.show();}}},{xtype:'kijs.gui.Button',caption:'Fenster modal',iconChar:'&#xf2d0',on:{click:function click(){var window=new kijs.gui.Window({caption:'Fenster',iconChar:'&#xf2d0',collapsible:'top',modal:true,height:160,width:210,innerStyle:{padding:'10px'},elements:[{xtype:'kijs.gui.Button',caption:'weiteres Fenster',iconChar:'&#xf2d0'}]});window.show();window.elements[0].on('click',function(){var window2=new kijs.gui.Window({caption:'Fenster',iconChar:'&#xf2d0',collapsible:'top',target:window.dom.node.parentNode,height:160,width:210});window2.show();},this);}}},{xtype:'kijs.gui.Button',caption:'Fenster modal mit target+maximiert',iconChar:'&#xf2d0',on:{click:function click(){var window=new kijs.gui.Window({target:this.parent.parent.down('addressPanel'),targetDomProperty:'innerDom',caption:'Fenster',iconChar:'&#xf2d0',collapsible:'top',maximized:true,modal:true,height:170,width:220});window.show();}}},{xtype:'kijs.gui.Button',caption:'Lademaske',iconChar:'&#xf1ce',on:{click:function click(){var addressPanel=this.parent.parent.down('addressPanel');addressPanel.displayWaitMask=!addressPanel.displayWaitMask;}}},{xtype:'kijs.gui.Button',caption:'Neu laden',iconChar:'&#xf021',on:{click:function click(){location.reload();}}},{xtype:'kijs.gui.Button',caption:'Schliessen',iconChar:'&#xf00d',on:{click:function click(){viewport.destruct();}}}],footerBarElements:[{xtype:'kijs.gui.Button',iconChar:'&#xf085'}]},{xtype:'kijs.gui.Splitter',targetPos:'right'},{xtype:'kijs.gui.Panel',caption:'Vorschau',iconChar:'&#xf2c8',collapsible:'right',width:240,cls:'kijs-flexrow',headerBarElements:[{xtype:'kijs.gui.Button',iconChar:'&#xf02f',on:{click:function click(e,el){var editor=el.parent.parent.up('editor');console.log(editor.getValue());}}}],elements:[]}]},{xtype:'kijs.gui.Splitter',targetPos:'bottom'},{xtype:'kijs.gui.Panel',caption:'Panel Süd',collapsible:'bottom',collapsed:true,height:200,elements:[{xtype:'kijs.gui.Element',style:{margin:'4px 0 0 4px'}},{xtype:'kijs.gui.Button',caption:'set html',on:{click:function click(e){this.__testState=this.__testState||0;var el=this.parent.elements[0];var html='Text mit <span style="color:#f00">Formatierung</span>';switch(this.__testState){case 0:el.htmlDisplayType='html';el.html=html;this.caption='code';break;case 1:el.htmlDisplayType='code';el.html=html;this.caption='text';break;case 2:el.htmlDisplayType='text';el.html=html;this.caption='html';break;}this.__testState++;if(this.__testState>2){this.__testState=0;}}}}]}]});viewport.render();}},{key:'rpc',value:function rpc(facadeFn,data,fn,context,cancelRunningRpcs,waitMaskTarget){var waitMaskTargetDomPropertyName=arguments.length>6&&arguments[6]!==undefined?arguments[6]:'dom';var ignoreWarnings=arguments[7];var fnBeforeDisplayError=arguments[8];this._rpc.do(facadeFn,data,fn,context,cancelRunningRpcs,waitMaskTarget,waitMaskTargetDomPropertyName,ignoreWarnings,fnBeforeDisplayError);}},{key:'destruct',value:function destruct(){this._rpc.destruct();this._rpc=null;}}]);return kit_App;}();